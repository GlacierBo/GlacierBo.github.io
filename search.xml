<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>233333å¤§ä½¬çš„qqéŸ³ä¹çˆ¬è™«</title>
      <link href="/2020/05/22/yuque/233333%E5%A4%A7%E4%BD%AC%E7%9A%84qq%E9%9F%B3%E4%B9%90%E7%88%AC%E8%99%AB/"/>
      <url>/2020/05/22/yuque/233333%E5%A4%A7%E4%BD%AC%E7%9A%84qq%E9%9F%B3%E4%B9%90%E7%88%AC%E8%99%AB/</url>
      
        <content type="html"><![CDATA[<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># -*- coding: UTF-8 -*-</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> requests, json, re</span><br><span class="line"><span class="keyword">from</span> selenium <span class="keyword">import</span> webdriver</span><br><span class="line"><span class="keyword">from</span> selenium.webdriver.common.by <span class="keyword">import</span> By</span><br><span class="line"><span class="keyword">from</span> selenium.webdriver.support.ui <span class="keyword">import</span> WebDriverWait</span><br><span class="line"><span class="keyword">from</span> selenium.webdriver.support <span class="keyword">import</span> expected_conditions <span class="keyword">as</span> EC</span><br><span class="line"><span class="keyword">from</span> random <span class="keyword">import</span> randint</span><br><span class="line"><span class="comment"># æ–‡ä»¶è·¯å¾„</span></span><br><span class="line">MUSIC_PATH=<span class="string">'music/'</span></span><br><span class="line"><span class="comment"># chrome driverè·¯å¾„</span></span><br><span class="line">DRIVERS_PATH=<span class="string">'drivers/chromedriver-mac'</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ParseQQmusic</span>:</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self,ranking)</span>:</span></span><br><span class="line">        self.url =ranking</span><br><span class="line">        self.music_name =<span class="literal">None</span></span><br><span class="line">        self.headers = &#123;</span><br><span class="line">            <span class="string">'user-agent'</span>: <span class="string">'Mozilla/5.0 (iPhone; CPU iPhone OS 11_0 like Mac OS X) AppleWebKit/604.1.38 (KHTML, like Gecko) Version/11.0 Mobile/15A372 Safari/604.1'</span>,</span><br><span class="line">            <span class="string">'Referer'</span>: <span class="string">'https://u.y.qq.com'</span></span><br><span class="line">        &#125;</span><br><span class="line">        self.session = requests.session()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">download_music</span><span class="params">(self,songmid)</span>:</span></span><br><span class="line">        data = &#123;</span><br><span class="line">            <span class="string">"req"</span>: &#123;</span><br><span class="line">                <span class="string">"module"</span>: <span class="string">"CDN.SrfCdnDispatchServer"</span>,</span><br><span class="line">                <span class="string">"method"</span>: <span class="string">"GetCdnDispatch"</span>,</span><br><span class="line">                <span class="string">"param"</span>: &#123;</span><br><span class="line">                    <span class="string">"guid"</span>: <span class="string">''</span>,</span><br><span class="line">                    <span class="string">"calltype"</span>: <span class="number">0</span>,</span><br><span class="line">                    <span class="string">"userip"</span>: <span class="string">""</span></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;,</span><br><span class="line">            <span class="string">"req_0"</span>: &#123;</span><br><span class="line">                <span class="string">"module"</span>: <span class="string">"vkey.GetVkeyServer"</span>,</span><br><span class="line">                <span class="string">"method"</span>: <span class="string">"CgiGetVkey"</span>,</span><br><span class="line">                <span class="string">"param"</span>: &#123;</span><br><span class="line">                    <span class="string">"guid"</span>: str(random_with_N_digits(<span class="number">9</span>)),</span><br><span class="line">                    <span class="string">"songmid"</span>: [songmid],</span><br><span class="line">                    <span class="string">"songtype"</span>: [<span class="number">0</span>],</span><br><span class="line">                    <span class="string">"uin"</span>: <span class="string">"0"</span>,</span><br><span class="line">                    <span class="string">"loginflag"</span>: <span class="number">1</span>,</span><br><span class="line">                    <span class="string">"platform"</span>: <span class="string">"20"</span></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;,</span><br><span class="line">            <span class="string">"comm"</span>: &#123;</span><br><span class="line">                <span class="string">"uin"</span>: <span class="number">0</span>,</span><br><span class="line">                <span class="string">"format"</span>: <span class="string">"json"</span>,</span><br><span class="line">                <span class="string">"ct"</span>: <span class="number">24</span>,</span><br><span class="line">                <span class="string">"cv"</span>: <span class="number">0</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        api = <span class="string">'http://u.y.qq.com/cgi-bin/musicu.fcg'</span></span><br><span class="line">        jsondata = json.dumps(data)</span><br><span class="line">        response = self.session.post(api, data=jsondata)</span><br><span class="line">        resJson = json.loads(response.content, encoding=<span class="string">'utf-8'</span>)</span><br><span class="line">        sip = resJson.get(<span class="string">'req_0'</span>).get(<span class="string">'data'</span>).get(<span class="string">'sip'</span>)[<span class="number">0</span>]</span><br><span class="line">        purl = resJson.get(<span class="string">'req_0'</span>).get(<span class="string">'data'</span>).get(<span class="string">'midurlinfo'</span>)[<span class="number">0</span>].get(<span class="string">'purl'</span>)</span><br><span class="line">        <span class="keyword">if</span> purl != <span class="literal">None</span> <span class="keyword">and</span> purl.strip():</span><br><span class="line">            print(self.music_name)</span><br><span class="line">            download_url= sip + purl</span><br><span class="line">            <span class="comment"># ä¸‹è½½åˆ°æœ¬åœ°</span></span><br><span class="line">            music = self.session.get(download_url,headers=self.headers)</span><br><span class="line">            <span class="comment"># æ–‡ä»¶åå»é™¤ç‰¹æ®Šç¬¦å·</span></span><br><span class="line">            <span class="keyword">with</span> open(MUSIC_PATH + <span class="string">"&#123;&#125;.m4a"</span>.format(re.sub(<span class="string">r'[\s+|@&lt;&gt;:\\"/]'</span>, <span class="string">''</span>, self.music_name)), <span class="string">"wb"</span>) <span class="keyword">as</span> m:</span><br><span class="line">                m.write(music.content)</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">view_html</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="comment"># qqéŸ³ä¹é¡µé¢æ˜¯jsåŠ è½½çš„ï¼Œè¿™é‡Œç”¨chrome headlessæ¨¡å¼è®¿é—®</span></span><br><span class="line">        option = webdriver.ChromeOptions()</span><br><span class="line">        option.add_argument(<span class="string">'headless'</span>)</span><br><span class="line">        driver = webdriver.Chrome(DRIVERS_PATH, chrome_options=option)</span><br><span class="line">        <span class="comment"># æ’è¡Œæ¦œé¡µé¢</span></span><br><span class="line">        driver.get(self.url)</span><br><span class="line">        print(driver.title)</span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            <span class="comment"># ç­‰å¾…æ’­æ”¾åˆ—è¡¨åŠ è½½å®Œæ¯•</span></span><br><span class="line">            WebDriverWait(driver, <span class="number">10</span>).until(EC.presence_of_element_located((By.CLASS_NAME, <span class="string">"songlist__songname_txt"</span>)))</span><br><span class="line">            lis = driver.find_elements_by_class_name(<span class="string">'songlist__songname_txt'</span>)</span><br><span class="line">            pattern = re.compile(<span class="string">r'https://y.qq.com/n/yqq/song/(\S+).html'</span>)</span><br><span class="line">            <span class="keyword">for</span> i <span class="keyword">in</span> range(lis.__len__()):</span><br><span class="line">                li = lis.__getitem__(i)</span><br><span class="line">                a = li.find_element_by_class_name(<span class="string">'js_song'</span>)</span><br><span class="line">                <span class="comment"># è·å¾—songid</span></span><br><span class="line">                href = a.get_attribute(<span class="string">'href'</span>)</span><br><span class="line">                music_name = a.get_attribute(<span class="string">'title'</span>)</span><br><span class="line">                self.music_name=music_name</span><br><span class="line"></span><br><span class="line">                m = pattern.match(href)</span><br><span class="line">                self.download_music(m.group(<span class="number">1</span>))</span><br><span class="line"></span><br><span class="line">        <span class="keyword">finally</span>:</span><br><span class="line">            driver.quit()</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">start</span><span class="params">(self)</span>:</span></span><br><span class="line">        self.view_html()</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">random_with_N_digits</span><span class="params">(n)</span>:</span></span><br><span class="line">    range_start = <span class="number">10</span>**(n<span class="number">-1</span>)</span><br><span class="line">    range_end = (<span class="number">10</span>**n)<span class="number">-1</span></span><br><span class="line">    <span class="keyword">return</span> randint(range_start, range_end)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    <span class="comment"># ç›®æ ‡ æŠ–éŸ³æ’è¡Œæ¦œ</span></span><br><span class="line">    qm = ParseQQmusic(<span class="string">'https://y.qq.com/n/yqq/toplist/60.html#stat=y_new.toplist.menu.60'</span>)</span><br><span class="line">    qm.start()</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>Scrapy å®ç°è±†ç“£ç”µå½±çˆ¬è™«</title>
      <link href="/2020/05/22/yuque/Scrapy%20%E5%AE%9E%E7%8E%B0%E8%B1%86%E7%93%A3%E7%94%B5%E5%BD%B1%E7%88%AC%E8%99%AB/"/>
      <url>/2020/05/22/yuque/Scrapy%20%E5%AE%9E%E7%8E%B0%E8%B1%86%E7%93%A3%E7%94%B5%E5%BD%B1%E7%88%AC%E8%99%AB/</url>
      
        <content type="html"><![CDATA[<blockquote><p>æœ¬ demo åªåšå­¦ä¹ ä¹‹ç”¨ï¼Œè¯·å‹¿è½¬è½½å’Œå•†ç”¨ï¼Œè°¢è°¢ ğŸ™</p></blockquote><h3 id="è§‚å¯Ÿé“¾æ¥"><a href="#è§‚å¯Ÿé“¾æ¥" class="headerlink" title="è§‚å¯Ÿé“¾æ¥"></a>è§‚å¯Ÿé“¾æ¥</h3><blockquote><p><a href="https://movie.douban.com/explore#!type=movie&amp;tag=%E5%86%B7%E9%97%A8%E4%BD%B3%E7%89%87&amp;sort=recommend&amp;page_limit=20&amp;page_start=0" target="_blank" rel="noopener">https://movie.douban.com/explore#!type=movie&amp;tag=%E5%86%B7%E9%97%A8%E4%BD%B3%E7%89%87&amp;sort=recommend&amp;page_limit=20&amp;page_start=0</a></p></blockquote><h3 id="åˆ›å»ºçˆ¬è™«"><a href="#åˆ›å»ºçˆ¬è™«" class="headerlink" title="åˆ›å»ºçˆ¬è™«"></a>åˆ›å»ºçˆ¬è™«</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span> åˆ›å»ºé¡¹ç›®</span><br><span class="line"><span class="meta">$</span> scrapy startproject douban</span><br><span class="line"><span class="meta">#</span> åˆ›å»ºçˆ¬è™«</span><br><span class="line"><span class="meta">$</span> scrapy genspider doubanSpider https://www.douban.com/</span><br></pre></td></tr></table></figure><h4 id="doubanSpider-py"><a href="#doubanSpider-py" class="headerlink" title="doubanSpider.py"></a>doubanSpider.py</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># -*- coding: utf-8 -*-</span></span><br><span class="line"><span class="keyword">import</span> scrapy</span><br><span class="line"><span class="keyword">import</span> json</span><br><span class="line"><span class="keyword">from</span> douban.items <span class="keyword">import</span> DoubanItem</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">DoubanspiderSpider</span><span class="params">(scrapy.Spider)</span>:</span></span><br><span class="line">    name = <span class="string">'doubanSpider'</span></span><br><span class="line">    allowed_domains = [<span class="string">'https://movie.douban.com/'</span>]</span><br><span class="line">    start_urls = [</span><br><span class="line">        <span class="string">"https://movie.douban.com/j/search_subjects?type=movie&amp;tag=%E5%86%B7%E9%97%A8%E4%BD%B3%E7%89%87&amp;sort=recommend&amp;page_limit=20&amp;page_start="</span></span><br><span class="line">        + str(x) <span class="keyword">for</span> x <span class="keyword">in</span> range(<span class="number">1</span>, <span class="number">50</span>, <span class="number">1</span>)]</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">parse</span><span class="params">(self, response)</span>:</span></span><br><span class="line">        rs = json.loads(response.text)</span><br><span class="line">        datas = rs.get(<span class="string">"subjects"</span>)</span><br><span class="line">        item = DoubanItem()</span><br><span class="line">        <span class="keyword">for</span> data <span class="keyword">in</span> datas:</span><br><span class="line">            item[<span class="string">'title'</span>] = data.get(<span class="string">'title'</span>)</span><br><span class="line">            item[<span class="string">'rate'</span>] = data.get(<span class="string">'rate'</span>)</span><br><span class="line">            item[<span class="string">'url'</span>] = data.get(<span class="string">'url'</span>)</span><br><span class="line">            item[<span class="string">'id'</span>] = data.get(<span class="string">'id'</span>)</span><br><span class="line">            <span class="keyword">yield</span> item</span><br></pre></td></tr></table></figure><h4 id="items-py"><a href="#items-py" class="headerlink" title="items.py"></a>items.py</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># -*- coding: utf-8 -*-</span></span><br><span class="line"><span class="keyword">import</span> scrapy</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">DoubanItem</span><span class="params">(scrapy.Item)</span>:</span></span><br><span class="line">    title = scrapy.Field()</span><br><span class="line">    rate = scrapy.Field()</span><br><span class="line">    url = scrapy.Field()</span><br><span class="line">    id = scrapy.Field()</span><br><span class="line">    cover = scrapy.Field()</span><br></pre></td></tr></table></figure><h4 id="pipelines-py"><a href="#pipelines-py" class="headerlink" title="pipelines.py"></a>pipelines.py</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># -*- coding: utf-8 -*-</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">DoubanPipeline</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">process_item</span><span class="params">(self, item, spider)</span>:</span></span><br><span class="line">        <span class="keyword">with</span> open(<span class="string">'text.txt'</span>, <span class="string">'a'</span>) <span class="keyword">as</span> f:</span><br><span class="line">            f.write(item[<span class="string">'id'</span>] +<span class="string">","</span>+item[<span class="string">'rate'</span>]+<span class="string">","</span>+item[<span class="string">'title'</span>]+<span class="string">","</span>+item[<span class="string">'url'</span>] + <span class="string">"\n"</span>)</span><br><span class="line">            f.close()</span><br><span class="line">        <span class="keyword">return</span> item</span><br></pre></td></tr></table></figure><h4 id="ç‰¹åˆ«æ³¨æ„-setting-py-æ–‡ä»¶"><a href="#ç‰¹åˆ«æ³¨æ„-setting-py-æ–‡ä»¶" class="headerlink" title="ç‰¹åˆ«æ³¨æ„ setting.py æ–‡ä»¶"></a>ç‰¹åˆ«æ³¨æ„ setting.py æ–‡ä»¶</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Crawl responsibly by identifying yourself (and your website) on the user-agent</span></span><br><span class="line"><span class="comment"># USER_AGENT éœ€è¦ï¼Œä¸å¼€å¯ä¼šä¸€ç›´ 403 æ‹’ç»è®¿é—®</span></span><br><span class="line">USER_AGENT = <span class="string">'douban (+http://www.yourdomain.com)'</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Obey robots.txt rules</span></span><br><span class="line"><span class="comment"># å¿½ç•¥ robots.txt æ–‡ä»¶</span></span><br><span class="line">ROBOTSTXT_OBEY = <span class="literal">False</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># åšä¸€ä¸ªæœ‰é“å¾·çš„äºº è®¾ç½®ä¸€ä¸‹ä¸‹è½½å»¶è¿Ÿ</span></span><br><span class="line">DOWNLOAD_DELAY = <span class="number">3</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Configure item pipelines</span></span><br><span class="line"><span class="comment"># See https://docs.scrapy.org/en/latest/topics/item-pipeline.html</span></span><br><span class="line"><span class="comment"># ITEM_PIPELINES è®°å¾—å¼€å¯ä¸€ä¸‹</span></span><br><span class="line">ITEM_PIPELINES = &#123;</span><br><span class="line">   <span class="string">'douban.pipelines.DoubanPipeline'</span>: <span class="number">300</span>,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="è¿è¡Œçˆ¬è™«"><a href="#è¿è¡Œçˆ¬è™«" class="headerlink" title="è¿è¡Œçˆ¬è™«"></a>è¿è¡Œçˆ¬è™«</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span> scrapy crawl doubanSpider</span><br></pre></td></tr></table></figure><p><img src="https://cdn.nlark.com/yuque/0/2020/png/113243/1590079232312-85b645ae-306b-48fd-9e31-9306aa83e8d0.png#align=left&amp;display=inline&amp;height=473&amp;margin=%5Bobject%20Object%5D&amp;name=image.png&amp;originHeight=946&amp;originWidth=2362&amp;size=352775&amp;status=done&amp;style=none&amp;width=1181" alt="image.png"></p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>Scrapy åˆçª¥</title>
      <link href="/2020/05/17/yuque/Scrapy%20%E5%88%9D%E7%AA%A5/"/>
      <url>/2020/05/17/yuque/Scrapy%20%E5%88%9D%E7%AA%A5/</url>
      
        <content type="html"><![CDATA[<h3 id="Scrapy"><a href="#Scrapy" class="headerlink" title="Scrapy"></a>Scrapy</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span> åˆ›å»ºæ–°çš„å·¥ç¨‹</span><br><span class="line">scrapy startproject [name]</span><br><span class="line"><span class="meta">#</span> åˆ›å»ºä¸€ä¸ªçˆ¬è™«</span><br><span class="line">scrapy genspider [name] [domain]</span><br><span class="line">scrapy settings</span><br><span class="line"><span class="meta">#</span> è¿è¡Œä¸€ä¸ªçˆ¬è™«</span><br><span class="line">scrapy crawl [spider]</span><br><span class="line">scrapy list</span><br><span class="line"><span class="meta">#</span> å¯ç”¨urlè°ƒè¯•å‘½ä»¤è¡Œ</span><br><span class="line">scrapy shell [url]</span><br></pre></td></tr></table></figure><p><img src="https://cdn.nlark.com/yuque/0/2020/png/113243/1589684474404-8f737713-8f2e-4031-9663-c9f5c55d0e6d.png#align=left&amp;display=inline&amp;height=283&amp;margin=%5Bobject%20Object%5D&amp;name=image.png&amp;originHeight=566&amp;originWidth=1746&amp;size=669192&amp;status=done&amp;style=none&amp;width=873" alt="image.png"></p><h3 id="Scrapyd"><a href="#Scrapyd" class="headerlink" title="Scrapyd"></a>Scrapyd</h3><p><a href="https://piaosanlang.gitbooks.io/spiders/05day/section5.3.html" target="_blank" rel="noopener">https://piaosanlang.gitbooks.io/spiders/05day/section5.3.html</a></p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>è§†é¢‘èµ„æ–™</title>
      <link href="/2020/05/12/yuque/%E8%A7%86%E9%A2%91%E8%B5%84%E6%96%99/"/>
      <url>/2020/05/12/yuque/%E8%A7%86%E9%A2%91%E8%B5%84%E6%96%99/</url>
      
        <content type="html"><![CDATA[<p>01ã€Java av47103781<br>02ã€Spring av47103781<br>03ã€Spring Mvc av47176832<br>04ã€MyBatis av47228830<br>05ã€Hibernate av47382482<br>06ã€Spring Boot av47230137<br>07ã€Spring Cloud av47228830<br>08ã€Dubbo av47009143<br>09ã€MySQL av47702905<br>10ã€Redis av47423174<br>11ã€MongoDB av47425352<br>12ã€Elasticsearch av48279989<br>13ã€Zookeeper av47773419<br>14ã€Kafka av47773990<br>15ã€Linux av47702283<br>16ã€Docker av47715282<br>17ã€Maven av47382482<br>18ã€Git av47701443<br>19ã€Jenkins av47714706<br>20ã€IDEA av47382482<br>21ã€Shiro av47382482<br>22ã€React av48033695<br>23ã€Vue av50886891<br>24ã€ç”µå•†é¡¹ç›®å®æˆ˜ av48308453<br>25ã€RBAC æƒé™ç³»ç»Ÿ av48305719<br>26ã€æ•°æ®ç»“æ„ä¸ç®—æ³• av48505556<br>27ã€Oracle av48502473<br>28ã€ActiveMQ av48562474<br>29ã€TCP/IP av48562426<br>30ã€HTTP av48561455<br>31ã€Netty av48570202<br>32ã€Gradle av48581119<br>33ã€HBase av48581792<br>34ã€Kubernetes av48582456<br>35ã€Hive av48609427<br>36ã€Hadoop av48621769<br>37ã€Spark av48668079<br>38ã€Python av48324668<br>39ã€Python é¡¹ç›®å®æˆ˜ av48921588<br>40ã€äººå·¥æ™ºèƒ½ av49122347<br>41ã€HTML + CSS av49126649<br>42ã€Javascript av48927313<br>43ã€å¾®ä¿¡å°ç¨‹åº av48324778<br>44ã€React é¡¹ç›®å®æˆ˜ av48495066<br>45ã€Vue é¡¹ç›®å®æˆ˜ av48333477<br>å°šç¡…è°· spring æ³¨è§£ç‰ˆ</p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>vue å¾ªç¯map</title>
      <link href="/2020/05/06/yuque/vue%20%E5%BE%AA%E7%8E%AFmap/"/>
      <url>/2020/05/06/yuque/vue%20%E5%BE%AA%E7%8E%AFmap/</url>
      
        <content type="html"><![CDATA[<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&lt;el-collapse&gt;</span><br><span class="line">            &lt;el-collapse-item v-<span class="keyword">for</span>=<span class="string">"(val, key) in forbiddenFieldData"</span> :key=<span class="string">"val.id"</span>&gt;</span><br><span class="line">              &lt;template slot=<span class="string">"title"</span>&gt;</span><br><span class="line">                &lt;el-checkbox&gt;</span><br><span class="line">                  &#123;&#123; key &#125;&#125;</span><br><span class="line">                &lt;<span class="regexp">/el-checkbox&gt;</span></span><br><span class="line"><span class="regexp">              &lt;/</span>template&gt;</span><br><span class="line">              &lt;el-row&gt;</span><br><span class="line">                &lt;el-col v-<span class="keyword">for</span>=<span class="string">"(option) in val"</span> :key=<span class="string">"option.id"</span> :span=<span class="string">"8"</span>&gt;</span><br><span class="line">                  &lt;el-checkbox &gt;</span><br><span class="line">                    &#123;&#123; option.name &#125;&#125;</span><br><span class="line">                  &lt;<span class="regexp">/el-checkbox&gt;</span></span><br><span class="line"><span class="regexp">                &lt;/</span>el-col&gt;</span><br><span class="line">              &lt;<span class="regexp">/el-row&gt;</span></span><br><span class="line"><span class="regexp">            &lt;/</span>el-collapse-item&gt;</span><br><span class="line">          &lt;<span class="regexp">/el-collapse&gt;</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>æ ‘</title>
      <link href="/2020/05/06/yuque/%E6%A0%91/"/>
      <url>/2020/05/06/yuque/%E6%A0%91/</url>
      
        <content type="html"><![CDATA[<p><a href="https://www.cnblogs.com/youyouxiaosheng-lh/p/11052045.html" target="_blank" rel="noopener">https://www.cnblogs.com/youyouxiaosheng-lh/p/11052045.html</a></p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>Windows å°æ’ä»¶</title>
      <link href="/2020/03/25/yuque/Windows%20%E5%B0%8F%E6%8F%92%E4%BB%B6/"/>
      <url>/2020/03/25/yuque/Windows%20%E5%B0%8F%E6%8F%92%E4%BB%B6/</url>
      
        <content type="html"><![CDATA[<blockquote><p>å·¥æ¬²å–„å…¶äº‹å¿…å…ˆåˆ©å…¶å™¨</p></blockquote><h3 id="Everything-Wox"><a href="#Everything-Wox" class="headerlink" title="Everything + Wox"></a>Everything + Wox</h3><h3 id="æ²¹çŒ´æ’ä»¶-IDM"><a href="#æ²¹çŒ´æ’ä»¶-IDM" class="headerlink" title="æ²¹çŒ´æ’ä»¶ + IDM"></a>æ²¹çŒ´æ’ä»¶ + IDM</h3><p>Tampermonkey</p><h3 id="è§£å‹-7z"><a href="#è§£å‹-7z" class="headerlink" title="è§£å‹ 7z"></a>è§£å‹ 7z</h3><h3 id="PDF-ç¦æ˜•"><a href="#PDF-ç¦æ˜•" class="headerlink" title="PDF ç¦æ˜•"></a>PDF ç¦æ˜•</h3>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>Linux ç›®å½•ç»“æ„</title>
      <link href="/2020/03/18/yuque/Linux%20%E7%9B%AE%E5%BD%95%E7%BB%93%E6%9E%84/"/>
      <url>/2020/03/18/yuque/Linux%20%E7%9B%AE%E5%BD%95%E7%BB%93%E6%9E%84/</url>
      
        <content type="html"><![CDATA[<p><img src="https://cdn.nlark.com/yuque/0/2020/png/113243/1584501700984-a5dd1cac-a29c-4603-94a7-64ba3087c562.png#align=left&amp;display=inline&amp;height=553&amp;name=L%7DYP%291OV9T%28ICCO4%7D140M%258.png&amp;originHeight=553&amp;originWidth=1055&amp;size=236107&amp;status=done&amp;style=none&amp;width=1055" alt="L}YP)1OV9T(ICCO4}140M%8.png"></p><p><a href="https://www.runoob.com/linux/linux-system-contents.html" target="_blank" rel="noopener">https://www.runoob.com/linux/linux-system-contents.html</a></p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>nginx åŸºç¡€é…ç½®</title>
      <link href="/2020/02/18/yuque/nginx%20%E5%9F%BA%E7%A1%80%E9%85%8D%E7%BD%AE/"/>
      <url>/2020/02/18/yuque/nginx%20%E5%9F%BA%E7%A1%80%E9%85%8D%E7%BD%AE/</url>
      
        <content type="html"><![CDATA[<h4 id="åå‘ä»£ç†"><a href="#åå‘ä»£ç†" class="headerlink" title="åå‘ä»£ç†"></a>åå‘ä»£ç†</h4><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">server &#123;</span><br><span class="line">      listen       9001;</span><br><span class="line">      server_name  192.168.88.128;</span><br><span class="line"></span><br><span class="line">      location ~ /edu/ &#123;</span><br><span class="line">          proxy_pass http://127.0.0.1:8080;</span><br><span class="line">      &#125;</span><br><span class="line">      location ~ /vod/ &#123;</span><br><span class="line">          proxy_pass http://127.0.0.1:8081;</span><br><span class="line">      &#125;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure><h4 id="è´Ÿè½½å‡è¡¡"><a href="#è´Ÿè½½å‡è¡¡" class="headerlink" title="è´Ÿè½½å‡è¡¡"></a>è´Ÿè½½å‡è¡¡</h4><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">upstream myserver &#123;</span><br><span class="line">server 192.168.17.129:8080;</span><br><span class="line">  server 192.168.17.129:8081;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">server &#123;</span><br><span class="line">       listen       80;</span><br><span class="line">       server_name  192.168.88.128;</span><br><span class="line"></span><br><span class="line">       #charset koi8-r;</span><br><span class="line"></span><br><span class="line">       #access_log  logs/host.access.log  main;</span><br><span class="line"></span><br><span class="line">       location / &#123;</span><br><span class="line">           proxy_pass http://myserver;</span><br><span class="line">           root   html;</span><br><span class="line">           index  index.html index.htm;</span><br><span class="line">       &#125;</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure><h4 id="åŠ¨é™åˆ†ç¦»"><a href="#åŠ¨é™åˆ†ç¦»" class="headerlink" title="åŠ¨é™åˆ†ç¦»**"></a>åŠ¨é™åˆ†ç¦»**</h4><p>**<br>autoindex on; ä¼šåˆ—å‡ºæ‰€æœ‰æ–‡ä»¶</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">location /www/ &#123;</span><br><span class="line">  root /data/;</span><br><span class="line">  index index.html index.htm;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">location /image/ &#123;</span><br><span class="line">  root /data/;</span><br><span class="line">  autoindex on;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>zsh shell ç¯å¢ƒé…ç½®ä¸ç”Ÿæ•ˆ</title>
      <link href="/2020/01/26/yuque/zsh%20shell%20%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE%E4%B8%8D%E7%94%9F%E6%95%88/"/>
      <url>/2020/01/26/yuque/zsh%20shell%20%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE%E4%B8%8D%E7%94%9F%E6%95%88/</url>
      
        <content type="html"><![CDATA[<p>åœ¨ç»ˆç«¯è¾“å…¥<code>vim ~/.zshrc</code><br>åŠ ä¸€å¥  <code>source ~/.bash_profile</code></p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>ruby ç¯å¢ƒæ­å»º</title>
      <link href="/2019/12/06/yuque/ruby%20%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/"/>
      <url>/2019/12/06/yuque/ruby%20%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/</url>
      
        <content type="html"><![CDATA[<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span> curl -sSL https://rvm.io/mpapis.asc | gpg --import -</span><br><span class="line"><span class="meta">$</span> curl -sSL https://rvm.io/pkuczynski.asc | gpg --import -</span><br><span class="line"><span class="meta">$</span> curl -L https://get.rvm.io | bash -s stable</span><br></pre></td></tr></table></figure><p><img src="https://cdn.nlark.com/yuque/0/2019/png/113243/1575618459340-9bfd13f7-fe27-4799-b738-69f026a167be.png#align=left&amp;display=inline&amp;height=412&amp;name=image.png&amp;originHeight=824&amp;originWidth=1444&amp;size=215915&amp;status=done&amp;style=none&amp;width=722" alt="image.png"></p><p>ä¼šæœ‰æç¤ºä½ çš„ RVM å®‰è£…ç›®å½•ï¼Œæˆ‘çš„ç›®å½•æ˜¯ï¼š  /usr/local/rvm/</p><p>ä¸‹é¢è¿˜ä¼šæç¤ºä½  ï¼š source /etc/profile.d/rvm.sh<br>æ›´æ–°ä¸€ä¸‹ä½ çš„é…ç½®ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span> rvm requirements</span><br><span class="line"><span class="meta">$</span> rvm install 2.6.0</span><br><span class="line"><span class="meta">$</span> gem install bundler</span><br><span class="line"><span class="meta">$</span> gem install rails</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>å·¥å…·</title>
      <link href="/2019/11/30/yuque/%E5%B7%A5%E5%85%B7/"/>
      <url>/2019/11/30/yuque/%E5%B7%A5%E5%85%B7/</url>
      
        <content type="html"><![CDATA[<h3 id="è‡ªå¸¦å·¥å…·"><a href="#è‡ªå¸¦å·¥å…·" class="headerlink" title="è‡ªå¸¦å·¥å…·"></a>è‡ªå¸¦å·¥å…·</h3><p><strong>èšç„¦æœç´¢ spotright ï¼ˆå¿«æ·é”®ï¼šcommand+ç©ºæ ¼ï¼‰</strong><br><strong>Air Drop éš”ç©ºæŠ•é€ï¼ˆéœ€è¦å¼€å¯è“ç‰™ï¼‰</strong><br><strong>é”å±å¿«æ·é”®</strong> control + shift + ç”µæºé”®<br>**</p><h3 id="å…¶ä»–å·¥å…·"><a href="#å…¶ä»–å·¥å…·" class="headerlink" title="å…¶ä»–å·¥å…·"></a>å…¶ä»–å·¥å…·</h3><p>æ–‡æœ¬å·¥å…·ï¼š Typoraï¼ˆMarkdown è¯­æ³•ï¼‰</p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>interface default method/static method</title>
      <link href="/2019/11/12/yuque/interface%20default%20method!static%20method/"/>
      <url>/2019/11/12/yuque/interface%20default%20method!static%20method/</url>
      
        <content type="html"><![CDATA[<p>default å¯ä»¥å®ç°å¯ä»¥ä¸å®ç°ï¼Œå‘å‰å…¼å®¹æ€§</p><p>1.8 çš„æ”¹åŠ¨æ¯”è¾ƒå¤§ï¼Œstream çš„å¼•å…¥è®©æ‰€æœ‰æ¥å£éƒ½éœ€è¦å®ç° stream æ”¹åŠ¨æ˜¯æ¯”è¾ƒå¤§çš„æ‰€ä»¥å¼•å…¥äº† default æ–¹æ³•ã€‚</p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>Kafka æ ¸å¿ƒåœºæ™¯</title>
      <link href="/2019/10/31/yuque/Kafka%20%E6%A0%B8%E5%BF%83%E5%9C%BA%E6%99%AF/"/>
      <url>/2019/10/31/yuque/Kafka%20%E6%A0%B8%E5%BF%83%E5%9C%BA%E6%99%AF/</url>
      
        <content type="html"><![CDATA[<h3 id="è§£è€¦"><a href="#è§£è€¦" class="headerlink" title="è§£è€¦"></a>è§£è€¦</h3><p>ç›´æ¥æ¥å£è°ƒç”¨å‘é€ï¼Œä¸€å¯¹å¤šçš„åœºæ™¯éå¸¸çš„ä¸æ–¹ä¾¿ã€‚<br>æ¥å£è°ƒç”¨çš„è€¦åˆæ€§æ¯”è¾ƒé«˜ï¼Œå‡è®¾ A è°ƒç”¨ B ï¼ŒA éœ€è¦è€ƒè™‘å¦‚æœ B æŒ‚äº†æ€ä¹ˆåŠï¼Ÿ<br>å¦‚æœæ˜¯ MQ ï¼ŒA å°±ä¸ç”¨æ‹…å¿ƒè¿™ä¸ªé—®é¢˜ï¼ŒA å‘äº†åˆ° MQ ä¸­ï¼ŒB éœ€è¦äº†å»å–ï¼ŒA ä¸­æ ¹æœ¬ä¸éœ€è¦è€ƒè™‘å‘ç»™è°ï¼Œä¹Ÿä¸éœ€è¦è€ƒè™‘æ˜¯å¦è°ƒç”¨æ¥å£æ˜¯å¦æˆåŠŸã€‚</p><h3 id="å¼‚æ­¥"><a href="#å¼‚æ­¥" class="headerlink" title="å¼‚æ­¥"></a>å¼‚æ­¥</h3><p>MQ å¼‚æ­¥å‘è¯·æ±‚ï¼Œç”¨æˆ·æ— æ„ŸçŸ¥ã€‚</p><h3 id="å‰Šå³°"><a href="#å‰Šå³°" class="headerlink" title="å‰Šå³°"></a>å‰Šå³°</h3><p>ä¸€èˆ¬çš„ MySQLï¼Œæ‰›åˆ°æ¯ç§’ 2K ä¸ªè¯·æ±‚å°±å·®ä¸å¤šäº†ï¼Œå¦‚æœæ¯ç§’è¯·æ±‚åˆ° 5k çš„è¯ï¼Œå¯èƒ½å°±ç›´æ¥æŠŠ MySQL ç»™æ‰“æ­»äº†ï¼Œå¯¼è‡´ç³»ç»Ÿå´©æºƒï¼Œç”¨æˆ·ä¹Ÿå°±æ²¡æ³•å†ä½¿ç”¨ç³»ç»Ÿäº†ã€‚<br>ä½†æ˜¯é«˜å³°æœŸä¸€è¿‡ï¼Œä½å³°æœŸç”¨æˆ·çš„è¯·æ±‚å°±æ²¡è¿™ä¹ˆå¤šäº†ã€‚<br>æ¶ˆæ¯æ”¾åˆ° MQ ä¸­ä¸šåŠ¡ç«¯æ¯ç§’æ‹‰å– 2K ä¸ªè¯·æ±‚ï¼Œè§£ææ’å…¥æ•°æ®åº“ï¼Œå¯¹æ•´ä¸ªç³»ç»Ÿå‡ ä¹æ²¡æœ‰ä»»ä½•å‹åŠ›ã€‚</p><h3 id="Kafkaã€ActiveMQã€RabbitMQã€RocketMQ-æœ‰ä»€ä¹ˆä¼˜ç¼ºç‚¹ï¼Ÿ"><a href="#Kafkaã€ActiveMQã€RabbitMQã€RocketMQ-æœ‰ä»€ä¹ˆä¼˜ç¼ºç‚¹ï¼Ÿ" class="headerlink" title="Kafkaã€ActiveMQã€RabbitMQã€RocketMQ æœ‰ä»€ä¹ˆä¼˜ç¼ºç‚¹ï¼Ÿ"></a>Kafkaã€ActiveMQã€RabbitMQã€RocketMQ æœ‰ä»€ä¹ˆä¼˜ç¼ºç‚¹ï¼Ÿ</h3><table><thead><tr><th>ç‰¹æ€§</th><th>ActiveMQ</th><th>RabbitMQ</th><th>RocketMQ</th><th>Kafka</th></tr></thead><tbody><tr><td>å•æœºååé‡</td><td>ä¸‡çº§ï¼Œæ¯” RocketMQã€Kafka ä½ä¸€ä¸ªæ•°é‡çº§</td><td>åŒ ActiveMQ</td><td>10 ä¸‡çº§ï¼Œæ”¯æ’‘é«˜åå</td><td>10 ä¸‡çº§ï¼Œé«˜ååï¼Œä¸€èˆ¬é…åˆå¤§æ•°æ®ç±»çš„ç³»ç»Ÿæ¥è¿›è¡Œå®æ—¶æ•°æ®è®¡ç®—ã€æ—¥å¿—é‡‡é›†ç­‰åœºæ™¯</td></tr><tr><td>topic æ•°é‡å¯¹ååé‡çš„å½±å“</td><td></td><td></td><td>topic å¯ä»¥è¾¾åˆ°å‡ ç™¾/å‡ åƒçš„çº§åˆ«ï¼Œååé‡ä¼šæœ‰è¾ƒå°å¹…åº¦çš„ä¸‹é™ï¼Œè¿™æ˜¯ RocketMQ çš„ä¸€å¤§ä¼˜åŠ¿ï¼Œåœ¨åŒç­‰æœºå™¨ä¸‹ï¼Œå¯ä»¥æ”¯æ’‘å¤§é‡çš„ topic</td><td>topic ä»å‡ ååˆ°å‡ ç™¾ä¸ªæ—¶å€™ï¼Œååé‡ä¼šå¤§å¹…åº¦ä¸‹é™ï¼Œåœ¨åŒç­‰æœºå™¨ä¸‹ï¼ŒKafka å°½é‡ä¿è¯ topic æ•°é‡ä¸è¦è¿‡å¤šï¼Œå¦‚æœè¦æ”¯æ’‘å¤§è§„æ¨¡çš„ topicï¼Œéœ€è¦å¢åŠ æ›´å¤šçš„æœºå™¨èµ„æº</td></tr><tr><td>æ—¶æ•ˆæ€§</td><td>ms çº§</td><td>å¾®ç§’çº§ï¼Œè¿™æ˜¯ RabbitMQ çš„ä¸€å¤§ç‰¹ç‚¹ï¼Œå»¶è¿Ÿæœ€ä½</td><td>ms çº§</td><td>å»¶è¿Ÿåœ¨ ms çº§ä»¥å†…</td></tr><tr><td>å¯ç”¨æ€§</td><td>é«˜ï¼ŒåŸºäºä¸»ä»æ¶æ„å®ç°é«˜å¯ç”¨</td><td>åŒ ActiveMQ</td><td>éå¸¸é«˜ï¼Œåˆ†å¸ƒå¼æ¶æ„</td><td>éå¸¸é«˜ï¼Œåˆ†å¸ƒå¼ï¼Œä¸€ä¸ªæ•°æ®å¤šä¸ªå‰¯æœ¬ï¼Œå°‘æ•°æœºå™¨å®•æœºï¼Œä¸ä¼šä¸¢å¤±æ•°æ®ï¼Œä¸ä¼šå¯¼è‡´ä¸å¯ç”¨</td></tr><tr><td>æ¶ˆæ¯å¯é æ€§</td><td>æœ‰è¾ƒä½çš„æ¦‚ç‡ä¸¢å¤±æ•°æ®</td><td>åŸºæœ¬ä¸ä¸¢</td><td>ç»è¿‡å‚æ•°ä¼˜åŒ–é…ç½®ï¼Œå¯ä»¥åšåˆ° 0 ä¸¢å¤±</td><td>åŒ RocketMQ</td></tr><tr><td>åŠŸèƒ½æ”¯æŒ</td><td>MQ é¢†åŸŸçš„åŠŸèƒ½æå…¶å®Œå¤‡</td><td>åŸºäº erlang å¼€å‘ï¼Œå¹¶å‘èƒ½åŠ›å¾ˆå¼ºï¼Œæ€§èƒ½æå¥½ï¼Œå»¶æ—¶å¾ˆä½</td><td>MQ åŠŸèƒ½è¾ƒä¸ºå®Œå–„ï¼Œè¿˜æ˜¯åˆ†å¸ƒå¼çš„ï¼Œæ‰©å±•æ€§å¥½</td><td>åŠŸèƒ½è¾ƒä¸ºç®€å•ï¼Œä¸»è¦æ”¯æŒç®€å•çš„ MQ åŠŸèƒ½ï¼Œåœ¨å¤§æ•°æ®é¢†åŸŸçš„å®æ—¶è®¡ç®—ä»¥åŠæ—¥å¿—é‡‡é›†è¢«å¤§è§„æ¨¡ä½¿ç”¨</td></tr></tbody></table><p>###</p><h3 id="Kerry-åœºæ™¯"><a href="#Kerry-åœºæ™¯" class="headerlink" title="Kerry åœºæ™¯"></a>Kerry åœºæ™¯</h3><p>å¤–éƒ¨æ¨¡å—å¤„ç†è¯·æ±‚ï¼Œç®€å•è§£æä¹‹åå†™æ—¥å¿—å†æ”¾å…¥ Kafkaã€‚<br>ä¸šåŠ¡æ¨¡å—ä» Kafka æ‰¹é‡æ‹‰å–æ•°æ®ï¼Œæ‰¹é‡å…¥åº“æ“ä½œã€‚</p><p>æœ‰ä¸ªé«˜å¹¶å‘å…¥åº“çš„åœºæ™¯ï¼Œå®¢æˆ·è¦æ±‚åº“å­˜å¿«é€Ÿå…¥åº“ï¼ŒKafka æ‹‰å–åå³äº‹ä»¶å‘å¸ƒï¼Œäº‹ä»¶ç›‘å¬åˆ°ä¹‹åå°†æ¶ˆæ¯è§£ææ”¾å…¥é˜Ÿåˆ—ï¼Œå½“é˜Ÿåˆ—å¤§äºç­‰äº 1000 æ¡è¿›è¡Œæ‰¹é‡å…¥åº“æ“ä½œã€‚å®æµ‹æ•ˆç‡éå¸¸é«˜ï¼Œ30w æ¡å†™åº“æ“ä½œå¤§æ¦‚ 6 åˆ†é’Ÿå·¦å³ã€‚</p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>Kerry</title>
      <link href="/2019/10/30/yuque/Kerry/"/>
      <url>/2019/10/30/yuque/Kerry/</url>
      
        <content type="html"><![CDATA[<h3 id="æ—¥å¿—"><a href="#æ—¥å¿—" class="headerlink" title="æ—¥å¿—"></a>æ—¥å¿—</h3><ul><li>è¯·æ±‚å†…å®¹</li><li>è¯·æ±‚æ—¶é—´</li><li>å“åº”å†…å®¹</li><li>å“åº”æ—¶é—´</li><li>message</li></ul><h3 id="å®šæ—¶ä»»åŠ¡"><a href="#å®šæ—¶ä»»åŠ¡" class="headerlink" title="å®šæ—¶ä»»åŠ¡"></a>å®šæ—¶ä»»åŠ¡</h3><p>å®šæ—¶ä»»åŠ¡å¯ä»¥åŠ ä¸Š open å­—æ®µæ¥æ§åˆ¶æ˜¯å¦æ‰§è¡Œ</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">task:</span><br><span class="line">    callbackCorn: 0 0/5 * * * ?</span><br><span class="line">    sapStockCallback: 0 5 0,6,12,18 * * ?</span><br><span class="line">    transactionCallback: 0 0 21 * * ?</span><br><span class="line">    open: false</span><br></pre></td></tr></table></figure><h4 id="å¸¸ç”¨å®šæ—¶"><a href="#å¸¸ç”¨å®šæ—¶" class="headerlink" title="å¸¸ç”¨å®šæ—¶"></a>å¸¸ç”¨å®šæ—¶</h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"># å‡Œæ™¨</span><br><span class="line">0 0 0 * * ?</span><br><span class="line"># 2ç‚¹</span><br><span class="line">0 0 2 * * ?</span><br><span class="line"># æ¯äº”åˆ†é’Ÿ</span><br><span class="line">0 0/5 * * * ?</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>windows æ€è¿›ç¨‹</title>
      <link href="/2019/10/16/yuque/windows%20%E6%9D%80%E8%BF%9B%E7%A8%8B/"/>
      <url>/2019/10/16/yuque/windows%20%E6%9D%80%E8%BF%9B%E7%A8%8B/</url>
      
        <content type="html"><![CDATA[<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">netstat -ano |findstr "8001"</span><br><span class="line">taskkill /f /pid 13236</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>Docker å®‰è£…</title>
      <link href="/2019/09/30/yuque/Docker%20%E5%AE%89%E8%A3%85/"/>
      <url>/2019/09/30/yuque/Docker%20%E5%AE%89%E8%A3%85/</url>
      
        <content type="html"><![CDATA[<h3 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget -qO- https://get.docker.com/ | sh</span><br></pre></td></tr></table></figure><p>æŸ¥çœ‹æ˜¯å¦å®‰è£…æˆåŠŸ</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker version</span><br></pre></td></tr></table></figure><p>å¯åŠ¨ docker</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">service docker start</span><br></pre></td></tr></table></figure><h3 id="æ¢æº"><a href="#æ¢æº" class="headerlink" title="æ¢æº"></a>æ¢æº</h3><p>ä¿®æ”¹æˆ–æ–°å¢ /etc/docker/daemon.json</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span> vim /etc/docker/daemon.json</span><br></pre></td></tr></table></figure><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">"registry-mirrors"</span>: [<span class="string">"http://hub-mirror.c.163.com"</span>]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span> systemctl restart docker.service</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>git open /dev/null</title>
      <link href="/2019/09/27/yuque/git%20open%20!dev!null/"/>
      <url>/2019/09/27/yuque/git%20open%20!dev!null/</url>
      
        <content type="html"><![CDATA[<p><a href="https://www.cnblogs.com/ricklz/p/9216395.html" target="_blank" rel="noopener">https://www.cnblogs.com/ricklz/p/9216395.html</a></p><p>cmd å¯åŠ¨ null<br>sc start null</p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>Kafka é›†ç¾¤</title>
      <link href="/2019/09/18/yuque/Kafka%20%E9%9B%86%E7%BE%A4/"/>
      <url>/2019/09/18/yuque/Kafka%20%E9%9B%86%E7%BE%A4/</url>
      
        <content type="html"><![CDATA[<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span> 192.168.2.128</span><br><span class="line">Kafka</span><br></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span> 192.168.2.129</span><br><span class="line">Kafka</span><br></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span> 192.168.2.130</span><br><span class="line">Redis</span><br><span class="line">Zookeeper</span><br><span class="line">Kafka</span><br></pre></td></tr></table></figure><h4 id="é…ç½®æº"><a href="#é…ç½®æº" class="headerlink" title="é…ç½®æº"></a>é…ç½®æº</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">deb-src http://archive.ubuntu.com/ubuntu xenial main restricted #Added by software-properties</span><br><span class="line">deb http://mirrors.aliyun.com/ubuntu/ xenial main restricted</span><br><span class="line">deb-src http://mirrors.aliyun.com/ubuntu/ xenial main restricted multiverse universe #Added by software-properties</span><br><span class="line">deb http://mirrors.aliyun.com/ubuntu/ xenial-updates main restricted</span><br><span class="line">deb-src http://mirrors.aliyun.com/ubuntu/ xenial-updates main restricted multiverse universe #Added by software-properties</span><br><span class="line">deb http://mirrors.aliyun.com/ubuntu/ xenial universe</span><br><span class="line">deb http://mirrors.aliyun.com/ubuntu/ xenial-updates universe</span><br><span class="line">deb http://mirrors.aliyun.com/ubuntu/ xenial multiverse</span><br><span class="line">deb http://mirrors.aliyun.com/ubuntu/ xenial-updates multiverse</span><br><span class="line">deb http://mirrors.aliyun.com/ubuntu/ xenial-backports main restricted universe multiverse</span><br><span class="line">deb-src http://mirrors.aliyun.com/ubuntu/ xenial-backports main restricted universe multiverse #Added by software-properties</span><br><span class="line">deb http://archive.canonical.com/ubuntu xenial partner</span><br><span class="line">deb-src http://archive.canonical.com/ubuntu xenial partner</span><br><span class="line">deb http://mirrors.aliyun.com/ubuntu/ xenial-security main restricted</span><br><span class="line">deb-src http://mirrors.aliyun.com/ubuntu/ xenial-security main restricted multiverse universe #Added by software-properties</span><br><span class="line">deb http://mirrors.aliyun.com/ubuntu/ xenial-security universe</span><br><span class="line">deb http://mirrors.aliyun.com/ubuntu/ xenial-security multiverse</span><br></pre></td></tr></table></figure><h4 id="å®‰è£…-docker"><a href="#å®‰è£…-docker" class="headerlink" title="å®‰è£… docker"></a>å®‰è£… docker</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span> wget -qO- https://get.docker.com/ | sh</span><br></pre></td></tr></table></figure><p>é…ç½®ä¸ç”¨ sudo</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo usermod -aG docker $USER</span><br></pre></td></tr></table></figure><ul><li>å®‰è£… Zookeeper å’Œ Kafka</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span> docker pull wurstmeister/zookeeper</span><br><span class="line"><span class="meta">$</span> docker pull wurstmeister/kafka</span><br></pre></td></tr></table></figure><h4 id="Zookeeper"><a href="#Zookeeper" class="headerlink" title="Zookeeper**"></a>Zookeeper**</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span> docker run -d --name zookeeper -p 2181:2181 -t wurstmeister/zookeeper</span><br></pre></td></tr></table></figure><h4 id="Kafka"><a href="#Kafka" class="headerlink" title="Kafka**"></a>Kafka**</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span> docker run -d --name kafka -p 9092:9092 \</span><br><span class="line">-e KAFKA_BROKER_ID=0 \</span><br><span class="line">-e KAFKA_ZOOKEEPER_CONNECT=192.168.2.130:2181 \</span><br><span class="line">-e KAFKA_ADVERTISED_LISTENERS=PLAINTEXT://192.168.2.130:9092 \</span><br><span class="line">-e KAFKA_LISTENERS=PLAINTEXT://0.0.0.0:9092 988f4a6ca13c(é•œåƒID)</span><br></pre></td></tr></table></figure><p>å…¶ä»–ä¸¤å° <strong>Kafka </strong>ä¹Ÿè¿æ¥åˆ° 130 çš„ <strong>Zookeeper</strong></p><p>kafka01  128</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span> docker run -d --name kafka01 -p 9092:9092 \</span><br><span class="line">-e KAFKA_BROKER_ID=1 \</span><br><span class="line">-e KAFKA_ZOOKEEPER_CONNECT=192.168.2.130:2181 \</span><br><span class="line">-e KAFKA_ADVERTISED_LISTENERS=PLAINTEXT://192.168.2.128:9092 \</span><br><span class="line">-e KAFKA_LISTENERS=PLAINTEXT://0.0.0.0:9092 988f4a6ca13c</span><br></pre></td></tr></table></figure><p>kafka02 129</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span> docker run -d --name kafka02 -p 9092:9092 \</span><br><span class="line">-e KAFKA_BROKER_ID=2 \</span><br><span class="line">-e KAFKA_ZOOKEEPER_CONNECT=192.168.2.130:2181 \</span><br><span class="line">-e KAFKA_ADVERTISED_LISTENERS=PLAINTEXT://192.168.2.129:9092 \</span><br><span class="line">-e KAFKA_LISTENERS=PLAINTEXT://0.0.0.0:9092 988f4a6ca13c</span><br></pre></td></tr></table></figure><h4 id="æŸ¥çœ‹-Zookeeper-çŠ¶æ€"><a href="#æŸ¥çœ‹-Zookeeper-çŠ¶æ€" class="headerlink" title="æŸ¥çœ‹ Zookeeper çŠ¶æ€"></a>æŸ¥çœ‹ Zookeeper çŠ¶æ€</h4><ul><li>è¿›å…¥å®¹å™¨</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span> docker exec -it bb189e36e49a /bin/bash</span><br></pre></td></tr></table></figure><ul><li>æŸ¥çœ‹ ids</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[zk: localhost:2181(CONNECTED) 3] ls /brokers/ids</span><br><span class="line">[2, 1, 0]</span><br></pre></td></tr></table></figure><p>è¿™è¾¹çš„è¿™ä¸ª <strong>id </strong>å°±æ˜¯æˆ‘ä»¬åˆšæ‰è®¾ç½®çš„ <strong>KAFKA_BROKER_ID</strong></p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>bash è„šæœ¬æ¨¡æ¿</title>
      <link href="/2019/09/18/yuque/bash%20%E8%84%9A%E6%9C%AC%E6%A8%A1%E6%9D%BF/"/>
      <url>/2019/09/18/yuque/bash%20%E8%84%9A%E6%9C%AC%E6%A8%A1%E6%9D%BF/</url>
      
        <content type="html"><![CDATA[<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span>!/bin/bash</span><br><span class="line"></span><br><span class="line">case $1 in</span><br><span class="line">"start")&#123;</span><br><span class="line">for i in xx xx xx</span><br><span class="line">  do</span><br><span class="line">  echo "********** $1 start ***********"</span><br><span class="line">      ssh $i "xxx xxx xxx"</span><br><span class="line">  done</span><br><span class="line">&#125;;;</span><br><span class="line">"stop")&#123;</span><br><span class="line">for i in xx xx xx</span><br><span class="line">  do</span><br><span class="line">  echo "********** $1 stop ***********"</span><br><span class="line">      ssh $i "xxx xxx xxx"</span><br><span class="line">  done</span><br><span class="line">&#125;;;</span><br><span class="line"></span><br><span class="line">esac</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>Java è¿›åˆ¶è½¬åŒ–</title>
      <link href="/2019/08/13/yuque/Java%20%E8%BF%9B%E5%88%B6%E8%BD%AC%E5%8C%96/"/>
      <url>/2019/08/13/yuque/Java%20%E8%BF%9B%E5%88%B6%E8%BD%AC%E5%8C%96/</url>
      
        <content type="html"><![CDATA[<p>åè¿›åˆ¶è½¬æˆåå…­è¿›åˆ¶ï¼š<br>Integer.toHexString(int i)</p><p>åè¿›åˆ¶è½¬æˆå…«è¿›åˆ¶<br>Integer.toOctalString(int i)</p><p>åè¿›åˆ¶è½¬æˆäºŒè¿›åˆ¶<br>Integer.toBinaryString(int i)</p><p>åå…­è¿›åˆ¶è½¬æˆåè¿›åˆ¶<br>Integer.valueOf(â€œFFFFâ€,16).toString()</p><p>å…«è¿›åˆ¶è½¬æˆåè¿›åˆ¶<br>Integer.valueOf(â€œ876â€,8).toString()</p><p>äºŒè¿›åˆ¶è½¬åè¿›åˆ¶<br>Integer.valueOf(â€œ0101â€,2).toString()</p><p>æœ‰ä»€ä¹ˆæ–¹æ³•å¯ä»¥ç›´æ¥å°† 2,8,16 è¿›åˆ¶ç›´æ¥è½¬æ¢ä¸º 10 è¿›åˆ¶çš„å—?<br>java.lang.Integer ç±»<br>parseInt(String s, int radix)</p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>ä½è¿ç®—</title>
      <link href="/2019/08/12/yuque/%E4%BD%8D%E8%BF%90%E7%AE%97/"/>
      <url>/2019/08/12/yuque/%E4%BD%8D%E8%BF%90%E7%AE%97/</url>
      
        <content type="html"><![CDATA[<p>0s è¡¨ç¤ºä¸€ä¸² 0ï¼Œ1s è¡¨ç¤ºä¸€ä¸² 1ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">x ^ 0s = x      x &amp; 0s = 0      x | 0s = x</span><br><span class="line">x ^ 1s = ~x     x &amp; 1s = x      x | 1s = 1s</span><br><span class="line">x ^ x = 0       x &amp; x = x       x | x = x</span><br></pre></td></tr></table></figure><ul><li>åˆ©ç”¨ x ^ 1s = ~x çš„ç‰¹ç‚¹ï¼Œå¯ä»¥å°†ä½çº§è¡¨ç¤ºç¿»è½¬ï¼›åˆ©ç”¨ x ^ x = 0 çš„ç‰¹ç‚¹ï¼Œå¯ä»¥å°†ä¸‰ä¸ªæ•°ä¸­é‡å¤çš„ä¸¤ä¸ªæ•°å»é™¤ï¼Œåªç•™ä¸‹å¦ä¸€ä¸ªæ•°ã€‚</li><li>åˆ©ç”¨ x &amp; 0s = 0 å’Œ x &amp; 1s = x çš„ç‰¹ç‚¹ï¼Œå¯ä»¥å®ç°æ©ç æ“ä½œã€‚ä¸€ä¸ªæ•° num ä¸ maskï¼š00111100 è¿›è¡Œä½ä¸æ“ä½œï¼Œåªä¿ç•™ num ä¸­ä¸ mask çš„ 1 éƒ¨åˆ†ç›¸å¯¹åº”çš„ä½ã€‚</li><li>åˆ©ç”¨ x | 0s = x å’Œ x | 1s = 1s çš„ç‰¹ç‚¹ï¼Œå¯ä»¥å®ç°è®¾å€¼æ“ä½œã€‚ä¸€ä¸ªæ•° num ä¸ maskï¼š00111100 è¿›è¡Œä½æˆ–æ“ä½œï¼Œå°† num ä¸­ä¸ mask çš„ 1 éƒ¨åˆ†ç›¸å¯¹åº”çš„ä½éƒ½è®¾ç½®ä¸º 1ã€‚</li></ul><p><strong>ä½ä¸è¿ç®—æŠ€å·§ï¼š</strong></p><ul><li>n&amp;(n-1) å»é™¤ n çš„ä½çº§è¡¨ç¤ºä¸­æœ€ä½çš„é‚£ä¸€ä½ã€‚ä¾‹å¦‚å¯¹äºäºŒè¿›åˆ¶è¡¨ç¤º 10110100ï¼Œå‡å» 1 å¾—åˆ° 10110011ï¼Œè¿™ä¸¤ä¸ªæ•°ç›¸ä¸å¾—åˆ° 10110000ã€‚</li><li>n&amp;(-n) å¾—åˆ° n çš„ä½çº§è¡¨ç¤ºä¸­æœ€ä½çš„é‚£ä¸€ä½ã€‚-n å¾—åˆ° n çš„åç åŠ  1ï¼Œå¯¹äºäºŒè¿›åˆ¶è¡¨ç¤º 10110100ï¼Œ-n å¾—åˆ° 01001100ï¼Œç›¸ä¸å¾—åˆ° 00000100ã€‚</li><li>n-n&amp;(~n+1) å»é™¤ n çš„ä½çº§è¡¨ç¤ºä¸­æœ€é«˜çš„é‚£ä¸€ä½ã€‚</li></ul><p><strong>ç§»ä½è¿ç®—ï¼š</strong></p><ul><li><blockquote><blockquote><p>n ä¸ºç®—æœ¯å³ç§»ï¼Œç›¸å½“äºé™¤ä»¥ 2ï¼›</p></blockquote></blockquote></li><li><blockquote><blockquote><blockquote><p>n ä¸ºæ— ç¬¦å·å³ç§»ï¼Œå·¦è¾¹ä¼šè¡¥ä¸Š 0ã€‚</p></blockquote></blockquote></blockquote></li><li>&lt;&lt; n ä¸ºç®—æœ¯å·¦ç§»ï¼Œç›¸å½“äºä¹˜ä»¥ 2ã€‚</li></ul><p><strong>mask è®¡ç®—</strong><br>è¦è·å– 111111111ï¼Œå°† 0 å–åå³å¯ï¼Œ~0ã€‚<br>è¦å¾—åˆ°åªæœ‰ç¬¬ i ä½ä¸º 1 çš„ maskï¼Œå°† 1 å‘å·¦ç§»åŠ¨ i-1 ä½å³å¯ï¼Œ1&lt;&lt;(i-1) ã€‚ä¾‹å¦‚ 1&lt;&lt;4 å¾—åˆ°åªæœ‰ç¬¬ 5 ä½ä¸º 1 çš„ mask ï¼š00010000ã€‚<br>è¦å¾—åˆ° 1 åˆ° i ä½ä¸º 1 çš„ maskï¼Œ1&lt;&lt;(i+1)-1 å³å¯ï¼Œä¾‹å¦‚å°† 1&lt;&lt;(4+1)-1 = 00010000-1 = 00001111ã€‚<br>è¦å¾—åˆ° 1 åˆ° i ä½ä¸º 0 çš„ maskï¼Œåªéœ€å°† 1 åˆ° i ä½ä¸º 1 çš„ mask å–åï¼Œå³ ~(1&lt;&lt;(i+1)-1)ã€‚</p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>Linux èµ„æºç®¡ç†</title>
      <link href="/2019/08/07/yuque/Linux%20%E8%B5%84%E6%BA%90%E7%AE%A1%E7%90%86/"/>
      <url>/2019/08/07/yuque/Linux%20%E8%B5%84%E6%BA%90%E7%AE%A1%E7%90%86/</url>
      
        <content type="html"><![CDATA[<p>å†…å­˜å ç”¨æœ€é«˜çš„ 10 ä¸ªè¿›ç¨‹</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ps -aux|sort -k4r|head -10</span><br></pre></td></tr></table></figure><p>æŸ¥çœ‹ Java è¿›ç¨‹</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ps -ef | grep java</span><br></pre></td></tr></table></figure><p>ç›‘æ§ Linux çš„ç³»ç»ŸçŠ¶å†µï¼Œæ¯”å¦‚ cpuã€å†…å­˜çš„ä½¿ç”¨</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">top</span><br></pre></td></tr></table></figure><p><img src="https://cdn.nlark.com/yuque/0/2019/jpeg/113243/1565144285340-03802152-e8b8-44c6-b726-9aba998e6411.jpeg#align=left&amp;display=inline&amp;height=370&amp;originHeight=370&amp;originWidth=585&amp;size=0&amp;status=done&amp;width=585" alt></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">## ç¬¬ä¸€è¡Œ</span><br><span class="line">10:01:23 â€” å½“å‰ç³»ç»Ÿæ—¶é—´</span><br><span class="line">126 days, 14:29 â€” ç³»ç»Ÿå·²ç»è¿è¡Œäº†126å¤©14å°æ—¶29åˆ†é’Ÿï¼ˆåœ¨è¿™æœŸé—´æ²¡æœ‰é‡å¯è¿‡ï¼‰</span><br><span class="line">2 users â€” å½“å‰æœ‰2ä¸ªç”¨æˆ·ç™»å½•ç³»ç»Ÿ</span><br><span class="line">load average: 1.15, 1.42, 1.44 â€” load averageåé¢çš„ä¸‰ä¸ªæ•°åˆ†åˆ«æ˜¯1åˆ†é’Ÿã€5åˆ†é’Ÿã€15åˆ†é’Ÿçš„è´Ÿè½½æƒ…å†µã€‚</span><br><span class="line"></span><br><span class="line">load averageæ•°æ®æ˜¯æ¯éš”5ç§’é’Ÿæ£€æŸ¥ä¸€æ¬¡æ´»è·ƒçš„è¿›ç¨‹æ•°ï¼Œç„¶åæŒ‰ç‰¹å®šç®—æ³•è®¡ç®—å‡ºçš„æ•°å€¼ã€‚</span><br><span class="line">å¦‚æœè¿™ä¸ªæ•°é™¤ä»¥é€»è¾‘CPUçš„æ•°é‡ï¼Œç»“æœé«˜äº5çš„æ—¶å€™å°±è¡¨æ˜ç³»ç»Ÿåœ¨è¶…è´Ÿè·è¿è½¬äº†ã€‚</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">## ç¬¬äºŒè¡Œ</span><br><span class="line">Tasks â€” ä»»åŠ¡ï¼ˆè¿›ç¨‹ï¼‰ï¼Œç³»ç»Ÿç°åœ¨å…±æœ‰183ä¸ªè¿›ç¨‹ï¼Œå…¶ä¸­å¤„äºè¿è¡Œä¸­çš„æœ‰1ä¸ªï¼Œ</span><br><span class="line">182ä¸ªåœ¨ä¼‘çœ ï¼ˆsleepï¼‰ï¼ŒstopedçŠ¶æ€çš„æœ‰0ä¸ªï¼ŒzombieçŠ¶æ€ï¼ˆåƒµå°¸ï¼‰çš„æœ‰0ä¸ªã€‚</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">## ç¬¬ä¸‰è¡Œ</span><br><span class="line">6.7% us â€” ç”¨æˆ·ç©ºé—´å ç”¨CPUçš„ç™¾åˆ†æ¯”ã€‚</span><br><span class="line">0.4% sy â€” å†…æ ¸ç©ºé—´å ç”¨CPUçš„ç™¾åˆ†æ¯”ã€‚</span><br><span class="line">0.0% ni â€” æ”¹å˜è¿‡ä¼˜å…ˆçº§çš„è¿›ç¨‹å ç”¨CPUçš„ç™¾åˆ†æ¯”</span><br><span class="line">92.9% id â€” ç©ºé—²CPUç™¾åˆ†æ¯”</span><br><span class="line">0.0% wa â€” IOç­‰å¾…å ç”¨CPUçš„ç™¾åˆ†æ¯”</span><br><span class="line">0.0% hi â€” ç¡¬ä¸­æ–­ï¼ˆHardware IRQï¼‰å ç”¨CPUçš„ç™¾åˆ†æ¯”</span><br><span class="line">0.0% si â€” è½¯ä¸­æ–­ï¼ˆSoftware Interruptsï¼‰å ç”¨CPUçš„ç™¾åˆ†æ¯”</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">## å†…å­˜çŠ¶æ€</span><br><span class="line">8306544k total â€” ç‰©ç†å†…å­˜æ€»é‡ï¼ˆ8GBï¼‰</span><br><span class="line">7775876k used â€” ä½¿ç”¨ä¸­çš„å†…å­˜æ€»é‡ï¼ˆ7.7GBï¼‰</span><br><span class="line">530668k free â€” ç©ºé—²å†…å­˜æ€»é‡ï¼ˆ530Mï¼‰</span><br><span class="line">79236k buffers â€” ç¼“å­˜çš„å†…å­˜é‡ ï¼ˆ79Mï¼‰</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">## ç¬¬ä¸ƒè¡Œä»¥ä¸‹ï¼šå„è¿›ç¨‹ï¼ˆä»»åŠ¡ï¼‰çš„çŠ¶æ€ç›‘æ§</span><br><span class="line">PID â€” è¿›ç¨‹id</span><br><span class="line">USER â€” è¿›ç¨‹æ‰€æœ‰è€…</span><br><span class="line">PR â€” è¿›ç¨‹ä¼˜å…ˆçº§</span><br><span class="line">NI â€” niceå€¼ã€‚è´Ÿå€¼è¡¨ç¤ºé«˜ä¼˜å…ˆçº§ï¼Œæ­£å€¼è¡¨ç¤ºä½ä¼˜å…ˆçº§</span><br><span class="line">VIRT â€” è¿›ç¨‹ä½¿ç”¨çš„è™šæ‹Ÿå†…å­˜æ€»é‡ï¼Œå•ä½kbã€‚VIRT=SWAP+RES</span><br><span class="line">RES â€” è¿›ç¨‹ä½¿ç”¨çš„ã€æœªè¢«æ¢å‡ºçš„ç‰©ç†å†…å­˜å¤§å°ï¼Œå•ä½kbã€‚RES=CODE+DATA</span><br><span class="line">SHR â€” å…±äº«å†…å­˜å¤§å°ï¼Œå•ä½kb</span><br><span class="line">S â€” è¿›ç¨‹çŠ¶æ€ã€‚D=ä¸å¯ä¸­æ–­çš„ç¡çœ çŠ¶æ€ R=è¿è¡Œ S=ç¡çœ  T=è·Ÿè¸ª/åœæ­¢ Z=åƒµå°¸è¿›ç¨‹</span><br><span class="line">%CPU â€” ä¸Šæ¬¡æ›´æ–°åˆ°ç°åœ¨çš„CPUæ—¶é—´å ç”¨ç™¾åˆ†æ¯”</span><br><span class="line">%MEM â€” è¿›ç¨‹ä½¿ç”¨çš„ç‰©ç†å†…å­˜ç™¾åˆ†æ¯”</span><br><span class="line">TIME+ â€” è¿›ç¨‹ä½¿ç”¨çš„CPUæ—¶é—´æ€»è®¡ï¼Œå•ä½1/100ç§’</span><br><span class="line">COMMAND â€” è¿›ç¨‹åç§°ï¼ˆå‘½ä»¤å/å‘½ä»¤è¡Œï¼‰</span><br></pre></td></tr></table></figure><p>å‚è€ƒè¿æ¥ï¼š<a href="https://www.liangzl.com/get-article-detail-6009.html" target="_blank" rel="noopener">https://www.liangzl.com/get-article-detail-6009.html</a></p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>Linux ä¸‹ node cnpm æ— æ³•ä½¿ç”¨</title>
      <link href="/2019/08/05/yuque/Linux%20%E4%B8%8B%20node%20cnpm%20%E6%97%A0%E6%B3%95%E4%BD%BF%E7%94%A8/"/>
      <url>/2019/08/05/yuque/Linux%20%E4%B8%8B%20node%20cnpm%20%E6%97%A0%E6%B3%95%E4%BD%BF%E7%94%A8/</url>
      
        <content type="html"><![CDATA[<p>Linux ä¸‹çš„å‘½ä»¤éœ€è¦è®¾ç½®è½¯è¿æ¥<br>npm ä¸‹è½½å¥½çš„åŒ…è½¯è¿æ¥å†ä½ çš„ node/bin ç›®å½•ä¸‹ï¼Œæˆ‘çš„ç›®å½•æ˜¯  /usr/local/node/bin</p><h3 id="node"><a href="#node" class="headerlink" title="node"></a>node</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ln -s /usr/local/node/bin/node /usr/bin/node &amp;</span><br><span class="line">ln -s /usr/local/node/bin/npm /usr/bin/npm</span><br></pre></td></tr></table></figure><h3 id="cnpm"><a href="#cnpm" class="headerlink" title="cnpm"></a>cnpm</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ln -s /usr/local/node/bin/cnpm /usr/bin/cnpm</span><br></pre></td></tr></table></figure><h3 id="docsify"><a href="#docsify" class="headerlink" title="docsify"></a>docsify</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ln -s /usr/local/node/bin/docsify /usr/bin/docsify</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>ApplicationContextAware</title>
      <link href="/2019/08/05/yuque/ApplicationContextAware/"/>
      <url>/2019/08/05/yuque/ApplicationContextAware/</url>
      
        <content type="html"><![CDATA[<p>é‡åˆ°çš„é—®é¢˜ï¼šmqtt å›è°ƒ callback æ–¹æ³•æ—¶ï¼ŒMapper æ³¨å…¥ä¸æˆåŠŸã€‚<br>è§£å†³æ–¹å¼ï¼šæ‰‹åŠ¨è·å– spring å®¹å™¨ç®¡ç†çš„ bean</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SpringUtils</span> <span class="keyword">implements</span> <span class="title">ApplicationContextAware</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> ApplicationContext applicationContext = <span class="keyword">null</span>;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setApplicationContext</span><span class="params">(ApplicationContext applicationContext)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (SpringUtils.applicationContext == <span class="keyword">null</span>) &#123;</span><br><span class="line">            SpringUtils.applicationContext = applicationContext;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// è·å–applicationContext</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> ApplicationContext <span class="title">getApplicationContext</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> applicationContext;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// é€šè¿‡nameè·å– Bean.</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Object <span class="title">getBean</span><span class="params">(String name)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> getApplicationContext().getBean(name);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// é€šè¿‡classè·å–Bean.</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> &lt;T&gt; <span class="function">T <span class="title">getBean</span><span class="params">(Class&lt;T&gt; clazz)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> getApplicationContext().getBean(clazz);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// é€šè¿‡name,ä»¥åŠClazzè¿”å›æŒ‡å®šçš„Bean</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> &lt;T&gt; <span class="function">T <span class="title">getBean</span><span class="params">(String name, Class&lt;T&gt; clazz)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> getApplicationContext().getBean(name, clazz);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å†å›è°ƒä¸­è°ƒç”¨</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SpringUtils.getBean(xxxxMapper<span class="class">.<span class="keyword">class</span>)</span>;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>Docker Nginx ç®€å•ä½¿ç”¨</title>
      <link href="/2019/08/02/yuque/Docker%20Nginx%20%E7%AE%80%E5%8D%95%E4%BD%BF%E7%94%A8/"/>
      <url>/2019/08/02/yuque/Docker%20Nginx%20%E7%AE%80%E5%8D%95%E4%BD%BF%E7%94%A8/</url>
      
        <content type="html"><![CDATA[<h3 id="é…ç½®å®¹å™¨"><a href="#é…ç½®å®¹å™¨" class="headerlink" title="é…ç½®å®¹å™¨"></a>é…ç½®å®¹å™¨</h3><p>æ‹‰å–é•œåƒ</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span> docker pull nginx</span><br></pre></td></tr></table></figure><p>è¿è¡Œå®¹å™¨</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span> docker run --name nginx-test -p 8081:80 -d nginx</span><br></pre></td></tr></table></figure><p>åœ¨æµè§ˆå™¨ä¸­æ‰“å¼€  <a href="http://127.0.0.1:8081/" target="_blank" rel="noopener">http://127.0.0.1:8081/</a> å¯ä»¥çœ‹åˆ° Welcome to nginx!</p><h3 id="éƒ¨ç½²"><a href="#éƒ¨ç½²" class="headerlink" title="éƒ¨ç½²"></a>éƒ¨ç½²</h3><p>åˆ›å»º nginx ç›®å½•</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span> mkdir -p ~/nginx/www ~/nginx/logs ~/nginx/conf</span><br></pre></td></tr></table></figure><p>æ‹·è´å®¹å™¨ç›®å½•åˆ°æœ¬åœ°<br>daa0e05de9f8 : å®¹å™¨ ID</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span> docker cp daa0e05de9f8:/etc/nginx/nginx.conf ~/nginx/conf</span><br></pre></td></tr></table></figure><ul><li><strong>www</strong>: ç›®å½•å°†æ˜ å°„ä¸º nginx å®¹å™¨é…ç½®çš„è™šæ‹Ÿç›®å½•ã€‚</li><li><strong>logs</strong>: ç›®å½•å°†æ˜ å°„ä¸º nginx å®¹å™¨çš„æ—¥å¿—ç›®å½•ã€‚</li><li><strong>conf</strong>: ç›®å½•é‡Œçš„é…ç½®æ–‡ä»¶å°†æ˜ å°„ä¸º nginx å®¹å™¨çš„é…ç½®æ–‡ä»¶ã€‚</li></ul><p>è¿è¡Œç¬¬äºŒä¸ªå®¹å™¨ï¼Œæ˜ å°„åˆ° 8082 ç«¯å£</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span> docker run -d -p 8082:80 --name nginx-test-web \</span><br><span class="line">-v ~/nginx/www:/usr/share/nginx/html \</span><br><span class="line">-v ~/nginx/conf/nginx.conf:/etc/nginx/nginx.conf \</span><br><span class="line">-v ~/nginx/logs:/var/log/nginx nginx</span><br></pre></td></tr></table></figure><ul><li><p><strong>-v ~/nginx/www:/usr/share/nginx/htmlï¼š</strong>å°†æˆ‘ä»¬è‡ªå·±åˆ›å»ºçš„ www ç›®å½•æŒ‚è½½åˆ°å®¹å™¨çš„ /usr/share/nginx/htmlã€‚</p></li><li><p><strong>-v ~/nginx/conf/nginx.conf:/etc/nginx/nginx.confï¼š</strong>å°†æˆ‘ä»¬è‡ªå·±åˆ›å»ºçš„ nginx.conf æŒ‚è½½åˆ°å®¹å™¨çš„ /etc/nginx/nginx.confã€‚</p></li><li><p><strong>-v ~/nginx/logs:/var/log/nginxï¼š</strong>å°†æˆ‘ä»¬è‡ªå·±åˆ›å»ºçš„ logs æŒ‚è½½åˆ°å®¹å™¨çš„ /var/log/nginxã€‚</p></li></ul><p>è¿›å…¥ ~/nginx/www ç›®å½•</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span> cd ~/nginx/www</span><br></pre></td></tr></table></figure><p>åˆ›å»º index.html æ–‡ä»¶</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"utf-8"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Hello World!<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h1</span>&gt;</span>æˆ‘çš„ç¬¬ä¸€ä¸ªæ ‡é¢˜<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>æˆ‘çš„ç¬¬ä¸€ä¸ªæ®µè½ã€‚<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><p>åœ¨æµè§ˆå™¨ä¸­æ‰“å¼€  <a href="http://127.0.0.1:8082/" target="_blank" rel="noopener">http://127.0.0.1:8082/</a> å¯ä»¥çœ‹åˆ°æˆ‘ä»¬åˆšæ‰ç¼–è¾‘çš„ html äº†ã€‚</p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>Docker æ­å»º RabbitMQ</title>
      <link href="/2019/08/01/yuque/Docker%20%E6%90%AD%E5%BB%BA%20RabbitMQ/"/>
      <url>/2019/08/01/yuque/Docker%20%E6%90%AD%E5%BB%BA%20RabbitMQ/</url>
      
        <content type="html"><![CDATA[<p>æ‹‰å–é•œåƒ</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker pull rabbitmq:3.7.17-management</span><br></pre></td></tr></table></figure><p>å¯åŠ¨é•œåƒ<br>**</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">docker run -d --name rabbitmq3.7.17 -p 5672:5672 -p 15672:15672 -v `pwd`/data:/var/lib/rabbitmq --hostname \</span><br><span class="line"> myRabbit -e RABBITMQ_DEFAULT_VHOST=my_vhost \</span><br><span class="line"> -e RABBITMQ_DEFAULT_USER=admin -e RABBITMQ_DEFAULT_PASS=admin 1d0a5c8a8d4e</span><br></pre></td></tr></table></figure><p><strong>1d0a5c8a8d4e æ˜¯è‡ªå·±çš„é•œåƒ ID</strong><br>**<br><img src="https://cdn.nlark.com/yuque/0/2019/png/113243/1564643090820-ce16b9fa-0b54-4c8e-b27c-d85926db109d.png#align=left&amp;display=inline&amp;height=247&amp;name=image.png&amp;originHeight=247&amp;originWidth=718&amp;size=41789&amp;status=done&amp;width=718" alt="image.png"></p><p>è¯´æ˜ï¼š<br>-d åå°è¿è¡Œå®¹å™¨ï¼›<br>â€“name æŒ‡å®šå®¹å™¨åï¼›<br>-p  æŒ‡å®šæœåŠ¡è¿è¡Œçš„ç«¯å£ï¼ˆ5672ï¼šåº”ç”¨è®¿é—®ç«¯å£ï¼›15672ï¼šæ§åˆ¶å° Web ç«¯å£å·ï¼‰ï¼›<br>-v æ˜ å°„ç›®å½•æˆ–æ–‡ä»¶ï¼›<br>â€“hostname   ä¸»æœºåï¼ˆRabbitMQ çš„ä¸€ä¸ªé‡è¦æ³¨æ„äº‹é¡¹æ˜¯å®ƒæ ¹æ®æ‰€è°“çš„ â€œèŠ‚ç‚¹åç§°â€ å­˜å‚¨æ•°æ®ï¼Œé»˜è®¤ä¸ºä¸»æœºåï¼‰ï¼›<br>-e æŒ‡å®šç¯å¢ƒå˜é‡ï¼›ï¼ˆRABBITMQ_DEFAULT_VHOSTï¼šé»˜è®¤è™šæ‹Ÿæœºåï¼›RABBITMQ_DEFAULT_USERï¼šé»˜è®¤çš„ç”¨æˆ·åï¼›RABBITMQ_DEFAULT_PASSï¼šé»˜è®¤ç”¨æˆ·åçš„å¯†ç ï¼‰</p><p>è®¿é—®ï¼š<a href="http://Server-IP:15672" target="_blank" rel="noopener">http://Server-IP:15672</a> å³å¯çœ‹åˆ°è‡ªå·±çš„ rabbitmq ç®¡ç†åå°</p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>Redis åœ¨ SpringBoot ä¸­ç®€å•åº”ç”¨</title>
      <link href="/2019/08/01/yuque/Redis%20%E5%9C%A8%20SpringBoot%20%E4%B8%AD%E7%AE%80%E5%8D%95%E5%BA%94%E7%94%A8/"/>
      <url>/2019/08/01/yuque/Redis%20%E5%9C%A8%20SpringBoot%20%E4%B8%AD%E7%AE%80%E5%8D%95%E5%BA%94%E7%94%A8/</url>
      
        <content type="html"><![CDATA[<p>æ‰“å¼€ IDEA åˆ›å»ºä¸€ä¸ª Spring Boot é¡¹ç›®ï¼Œä¸ä¼šçš„åŒå­¦å‚è€ƒï¼š<a href="https://www.cnblogs.com/black-spike/p/8017768.html" target="_blank" rel="noopener">https://www.cnblogs.com/black-spike/p/8017768.html</a></p><h4 id="é…ç½®"><a href="#é…ç½®" class="headerlink" title="é…ç½®"></a>é…ç½®</h4><p>åœ¨ yml æ–‡ä»¶ä¸­ï¼Œé…ç½®æˆ‘ä»¬çš„ Redis è·¯å¾„ï¼Œä¸ä¼šçš„åŒå­¦å¯ä»¥å‚è€ƒæˆ‘ä¹‹å‰å†™çš„ <a href="https://www.yuque.com/glacier/github.io/gkzd5g" target="_blank" rel="noopener">docker æ­å»º Redis </a><br>åˆ›å»ºå¯¹åº”çš„æ–‡ä»¶å¤¹<br>controller - æ§åˆ¶å™¨<br>domain - å®ä½“ç±»<br>service - ä¸šåŠ¡å±‚<br>util - å·¥å…·ç±»</p><p><img src="https://cdn.nlark.com/yuque/0/2019/png/113243/1564640056418-0199b814-55e6-4da7-a42a-f97d10acf2b3.png#align=left&amp;display=inline&amp;height=517&amp;name=image.png&amp;originHeight=517&amp;originWidth=666&amp;size=48289&amp;status=done&amp;width=666" alt="image.png"></p><h4 id="ä»£ç "><a href="#ä»£ç " class="headerlink" title="ä»£ç "></a>ä»£ç </h4><p><strong>RedisController æ§åˆ¶å™¨</strong><br>å®šä¹‰äº† 3 ä¸ªæ–¹æ³•ï¼ŒgetUsers è·å–ç”¨æˆ·åˆ—è¡¨ï¼Œcreate åˆ›å»ºç”¨æˆ·ï¼Œdel åˆ é™¤ç”¨æˆ·ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.fxk.test.controller;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.fxk.test.service.UserService;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.http.ResponseEntity;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.*;</span><br><span class="line"></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"/redis"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">RedisController</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> UserService userService;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping</span>(<span class="string">"/users"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> ResponseEntity <span class="title">getUsers</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> ResponseEntity.ok(userService.getUsers());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@PostMapping</span>(<span class="string">"/user"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> ResponseEntity <span class="title">create</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> ResponseEntity.ok(userService.create());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@DeleteMapping</span>(<span class="string">"/del"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> ResponseEntity <span class="title">del</span><span class="params">(@RequestParam(<span class="string">"id"</span>)</span>String id) </span>&#123;</span><br><span class="line">        userService.del(id);</span><br><span class="line">        <span class="keyword">return</span> ResponseEntity.ok().build();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setUserService</span><span class="params">(UserService userService)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.userService = userService;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>User å®ä½“ç±»</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.fxk.test.domain;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> lombok.AllArgsConstructor;</span><br><span class="line"><span class="keyword">import</span> lombok.Data;</span><br><span class="line"><span class="keyword">import</span> lombok.NoArgsConstructor;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@NoArgsConstructor</span></span><br><span class="line"><span class="meta">@AllArgsConstructor</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">User</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> String id;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> String username;</span><br><span class="line">    <span class="keyword">private</span> String password;</span><br><span class="line">    <span class="keyword">private</span> String salt;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>UserService ä¸šåŠ¡å±‚</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.fxk.test.service;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.alibaba.fastjson.JSONObject;</span><br><span class="line"><span class="keyword">import</span> com.fxk.test.domain.User;</span><br><span class="line"><span class="keyword">import</span> com.fxk.test.util.UUIDBase64Util;</span><br><span class="line"><span class="keyword">import</span> lombok.extern.slf4j.Slf4j;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.data.redis.core.StringRedisTemplate;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Service;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"><span class="keyword">import</span> java.util.Set;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="meta">@Slf</span>4j</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserService</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> StringRedisTemplate redisTemplate;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> List&lt;User&gt; <span class="title">getUsers</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        Set&lt;String&gt; keys = <span class="keyword">this</span>.redisTemplate.keys(<span class="string">"user:*"</span>);</span><br><span class="line">        List&lt;User&gt; userList = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">        <span class="keyword">for</span> (String key : keys) &#123;</span><br><span class="line">            <span class="comment">// json è½¬å¯¹è±¡ä» Redis å–å‡º</span></span><br><span class="line">            userList.add(JSONObject.parseObject(<span class="keyword">this</span>.redisTemplate.opsForValue().get(key), User<span class="class">.<span class="keyword">class</span>))</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> userList;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> User <span class="title">create</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        String id = UUIDBase64Util.generate();</span><br><span class="line">        User user = <span class="keyword">new</span> User(id, <span class="string">"fxk"</span>, <span class="string">"fxk"</span>, <span class="string">"123456"</span>, <span class="string">"123123"</span>);</span><br><span class="line">        <span class="comment">// å¯¹è±¡è½¬ json å­˜å…¥ Redis</span></span><br><span class="line">        <span class="keyword">this</span>.redisTemplate.opsForValue().set(<span class="string">"user:"</span> + id, JSONObject.toJSONString(user));</span><br><span class="line">        <span class="keyword">return</span> user;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">del</span><span class="params">(String id)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.redisTemplate.delete(<span class="string">"user:"</span> + id);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setRedisTemplate</span><span class="params">(StringRedisTemplate redisTemplate)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.redisTemplate = redisTemplate;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>util ä¸­ä¸¤ä¸ªæ–¹æ³•ï¼š<br>RedisUtil æœ‰çš„å°ä¼™ä¼´å–œæ¬¢ç”¨ RedisUtilï¼Œä½†æ˜¯ RedisUtil ä¸ä¼šé…ç½®ï¼Œä¸‹é¢æˆ‘ä¼šè®²åˆ°ã€‚<br>UUIDBase64Util ç”Ÿæˆéšæœº id çš„æ–¹æ³•</p><p><strong>UUIDBase64Util</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.fxk.test.util;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> sun.misc.BASE64Encoder;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.UUID;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UUIDBase64Util</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> String <span class="title">generate</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        UUID uuid = UUID.randomUUID();</span><br><span class="line">        <span class="keyword">byte</span>[] uuidArr = asByteArray(uuid);</span><br><span class="line">        String s = <span class="keyword">new</span> BASE64Encoder().encode(uuidArr);</span><br><span class="line">        <span class="keyword">return</span> s.replace(<span class="string">"="</span>, <span class="string">""</span>).replace(<span class="string">"/"</span>, <span class="string">"_"</span>).replace(<span class="string">"+"</span>, <span class="string">"-"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">byte</span>[] asByteArray(UUID uuid) &#123;</span><br><span class="line">        <span class="keyword">long</span> msb = uuid.getMostSignificantBits();</span><br><span class="line">        <span class="keyword">long</span> lsb = uuid.getLeastSignificantBits();</span><br><span class="line">        <span class="keyword">byte</span>[] buffer = <span class="keyword">new</span> <span class="keyword">byte</span>[<span class="number">16</span>];</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">8</span>; i++) &#123;</span><br><span class="line">            buffer[i] = (<span class="keyword">byte</span>) (msb &gt;&gt;&gt; <span class="number">8</span> * (<span class="number">7</span> - i));</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">8</span>; i &lt; <span class="number">16</span>; i++) &#123;</span><br><span class="line">            buffer[i] = (<span class="keyword">byte</span>) (lsb &gt;&gt;&gt; <span class="number">8</span> * (<span class="number">7</span> - i));</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> buffer;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>RedisUtil</strong><br>ä¸»è¦æ˜¯æŠŠ RedisUtil å½“ä½œ Resource æ³¨å…¥</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> org.springframework.data.redis.core.RedisTemplate;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Component;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">RedisUtil</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Resource</span></span><br><span class="line">    <span class="keyword">private</span> RedisTemplate&lt;String, Object&gt; redisTemplate;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å…·ä½“æ–¹æ³• ç½‘ä¸Šä¸€æœä¸€å¤§å † ... è¿™é‡Œä¸»è¦è®²ä¸‹é…ç½® ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç„¶åå† UserService ä¸­æ·»åŠ æ³¨å…¥</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserService</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> RedisUtil redisUtil;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Resource</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setRedisUtil</span><span class="params">(RedisUtil redisUtil)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.redisUtil = redisUtil;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>æˆ‘ç»™å‡ºçš„ demo ä¸­æ²¡æœ‰ç”¨åˆ° RedisUtil</p></blockquote><p>####</p><h4 id="æµ‹è¯•"><a href="#æµ‹è¯•" class="headerlink" title="æµ‹è¯•"></a>æµ‹è¯•</h4><h5 id="åˆ—è¡¨"><a href="#åˆ—è¡¨" class="headerlink" title="åˆ—è¡¨"></a>åˆ—è¡¨</h5><p><img src="https://cdn.nlark.com/yuque/0/2019/png/113243/1564641308991-0662e458-49ff-4b5e-8cd5-764252511dc0.png#align=left&amp;display=inline&amp;height=645&amp;name=image.png&amp;originHeight=645&amp;originWidth=795&amp;size=52028&amp;status=done&amp;width=795" alt="image.png"></p><h5 id="åˆ›å»º"><a href="#åˆ›å»º" class="headerlink" title="åˆ›å»º"></a>åˆ›å»º</h5><p><img src="https://cdn.nlark.com/yuque/0/2019/png/113243/1564641338758-2fa632b2-e95a-4b51-a13b-cca04218e323.png#align=left&amp;display=inline&amp;height=504&amp;name=image.png&amp;originHeight=504&amp;originWidth=643&amp;size=35152&amp;status=done&amp;width=643" alt="image.png"><br><img src="https://cdn.nlark.com/yuque/0/2019/png/113243/1564641383148-3b76db65-1147-4aab-bd9e-037162b81af9.png#align=left&amp;display=inline&amp;height=690&amp;name=image.png&amp;originHeight=690&amp;originWidth=782&amp;size=55974&amp;status=done&amp;width=782" alt="image.png"></p><p>####</p><h5 id="åˆ é™¤"><a href="#åˆ é™¤" class="headerlink" title="åˆ é™¤"></a>åˆ é™¤</h5><p><img src="https://cdn.nlark.com/yuque/0/2019/png/113243/1564641428303-8d76523a-aeb7-44b4-bc70-ba1612618a5a.png#align=left&amp;display=inline&amp;height=400&amp;name=image.png&amp;originHeight=400&amp;originWidth=704&amp;size=27586&amp;status=done&amp;width=704" alt="image.png"></p><h4 id><a href="#" class="headerlink" title></a><img src="https://cdn.nlark.com/yuque/0/2019/png/113243/1564641449104-bc97c776-a5eb-47f7-ad39-a8b51c0bce37.png#align=left&amp;display=inline&amp;height=577&amp;name=image.png&amp;originHeight=577&amp;originWidth=678&amp;size=41372&amp;status=done&amp;width=678" alt="image.png"></h4><p>####</p><h4 id="pom-xml"><a href="#pom-xml" class="headerlink" title="pom.xml"></a>pom.xml</h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">properties</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">java.version</span>&gt;</span>1.8<span class="tag">&lt;/<span class="name">java.version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">lombok.version</span>&gt;</span>1.18.4<span class="tag">&lt;/<span class="name">lombok.version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">commons-lang.version</span>&gt;</span>3.3.2<span class="tag">&lt;/<span class="name">commons-lang.version</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--    ä¸ä½¿ç”¨é»˜è®¤çš„ tomcat ç”¨ undertow    --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">exclusions</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">exclusion</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-tomcat<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">exclusion</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">exclusions</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-undertow<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--        å®ä½“ç±»ä¸­ä¸ç”¨ get/set å’Œæ„é€ å™¨ä¸€ä¸ªæ³¨è§£æå®š--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.projectlombok<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>lombok<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;lombok.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">scope</span>&gt;</span>provided<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--        æœ€å¸¸ç”¨çš„ string å’Œ date çš„ä¸€äº›æ”¯æŒ--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.commons<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>commons-lang3<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;commons-lang.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--        demoä¸­çš„redisåŒ…--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-data-redis<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--        demoä¸­ç”¨æ¥ååºåˆ—åŒ–çš„--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alibaba<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>fastjson<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>LATEST<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">build</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">plugins</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-maven-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">plugins</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">build</span>&gt;</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>Redis</title>
      <link href="/2019/08/01/yuque/Redis/"/>
      <url>/2019/08/01/yuque/Redis/</url>
      
        <content type="html"><![CDATA[<p>åœ¨æˆ‘ä»¬æ—¥å¸¸çš„ Java Web å¼€å‘ä¸­ï¼Œæ— ä¸éƒ½æ˜¯ä½¿ç”¨æ•°æ®åº“æ¥è¿›è¡Œæ•°æ®çš„å­˜å‚¨ï¼Œç”±äºä¸€èˆ¬çš„ç³»ç»Ÿä»»åŠ¡ä¸­é€šå¸¸ä¸ä¼šå­˜åœ¨é«˜å¹¶å‘çš„æƒ…å†µï¼Œæ‰€ä»¥è¿™æ ·çœ‹èµ·æ¥å¹¶æ²¡æœ‰ä»€ä¹ˆé—®é¢˜ï¼Œå¯æ˜¯ä¸€æ—¦æ¶‰åŠ<strong>å¤§æ•°æ®é‡</strong>çš„éœ€æ±‚ï¼Œæ¯”å¦‚ä¸€äº›å•†å“æŠ¢è´­çš„æƒ…æ™¯ï¼Œæˆ–è€…æ˜¯<strong>ä¸»é¡µè®¿é—®é‡ç¬é—´è¾ƒå¤§</strong>çš„æ—¶å€™ï¼Œå•ä¸€ä½¿ç”¨æ•°æ®åº“æ¥ä¿å­˜æ•°æ®çš„ç³»ç»Ÿä¼šå› ä¸ºé¢å‘ç£ç›˜ï¼Œç£ç›˜è¯»/å†™é€Ÿåº¦æ¯”è¾ƒæ…¢çš„é—®é¢˜è€Œå­˜åœ¨ä¸¥é‡çš„æ€§èƒ½å¼Šç«¯ï¼Œä¸€ç¬é—´æˆåƒä¸Šä¸‡çš„è¯·æ±‚åˆ°æ¥ï¼Œéœ€è¦ç³»ç»Ÿåœ¨<strong>æçŸ­çš„æ—¶é—´å†…å®Œæˆæˆåƒä¸Šä¸‡æ¬¡çš„è¯»/å†™æ“ä½œ</strong>ï¼Œè¿™ä¸ªæ—¶å€™å¾€å¾€ä¸æ˜¯æ•°æ®åº“èƒ½å¤Ÿæ‰¿å—çš„ï¼Œ<strong>æå…¶å®¹æ˜“é€ æˆæ•°æ®åº“ç³»ç»Ÿç˜«ç—ªï¼Œæœ€ç»ˆå¯¼è‡´æœåŠ¡å®•æœºçš„ä¸¥é‡ç”Ÿäº§é—®é¢˜ã€‚</strong><br>åŠ å…¥ Redisï¼Œè¯·æ±‚è¿‡æ¥å…ˆä» Redis ä¸­å–æ•°æ®ï¼Œè‹¥æ²¡æœ‰æ•°æ®æ‰ä¼šå»æ•°æ®åº“ä¸­å–ï¼Œæˆ‘ä»¬å°†<strong>çƒ­ç‚¹</strong>æ•°æ®å­˜åˆ° Redis ä¸­ï¼Œå‡è½»æ•°æ®åº“çš„å‹åŠ›ã€‚</p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>HashMap</title>
      <link href="/2019/08/01/yuque/HashMap/"/>
      <url>/2019/08/01/yuque/HashMap/</url>
      
        <content type="html"><![CDATA[<p><strong>HashMap é»˜è®¤ bucket æ•°ç»„å¤šå¤§ï¼Ÿ</strong><br>16</p><p><strong>å¦‚æœ new HashMap&lt;&gt;(19)ï¼Œbucket æ•°ç»„å¤šå¤§ï¼Ÿ</strong><br>32</p><p><strong>HashMap ä»€ä¹ˆæ—¶å€™å¼€è¾Ÿ bucket æ•°ç»„å ç”¨å†…å­˜ï¼Ÿ</strong><br>ç¬¬ä¸€æ¬¡ put æ—¶ï¼Œå¹¶ä¸æ˜¯ new çš„æ—¶å€™</p><p><strong>HashMap ä½•æ—¶æ‰©å®¹ï¼Ÿ</strong><br>put çš„å…ƒç´ è¾¾åˆ°å®¹é‡ä¹˜è´Ÿè½½å› å­çš„æ—¶å€™ï¼Œé»˜è®¤ 16*0.75</p><p>JDK8 ä¸­ HashMap å¼•å…¥äº†çº¢é»‘æ ‘æ¥å¤„ç†å“ˆå¸Œç¢°æ’ï¼Œå¯¹æ¯”ç¿»çœ‹ä¸‹ JDK8 å’Œ JDK7 çš„ HashMap æºç ï¼Œå¾—å‡ºç»“è®ºï¼š</p><ol><li>HashMap åœ¨ new åå¹¶ä¸ä¼šç«‹å³åˆ†é… bucket æ•°ç»„ï¼Œè€Œæ˜¯ç¬¬ä¸€æ¬¡ put æ—¶åˆå§‹åŒ–ï¼Œç±»ä¼¼ ArrayList åœ¨ç¬¬ä¸€æ¬¡ add æ—¶åˆ†é…ç©ºé—´ã€‚</li><li>HashMap çš„ bucket æ•°ç»„å¤§å°ä¸€å®šæ˜¯ 2 çš„å¹‚ï¼Œ<strong>å¦‚æœ new çš„æ—¶å€™æŒ‡å®šäº†å®¹é‡ä¸”ä¸æ˜¯ 2 çš„å¹‚ï¼Œå®é™…å®¹é‡ä¼šæ˜¯æœ€æ¥è¿‘(å¤§äº)æŒ‡å®šå®¹é‡çš„ 2 çš„å¹‚ï¼Œæ¯”å¦‚ new HashMap&lt;&gt;(19)ï¼Œæ¯” 19 å¤§ä¸”æœ€æ¥è¿‘çš„ 2 çš„å¹‚æ˜¯ 32ï¼Œå®é™…å®¹é‡å°±æ˜¯ 32ã€‚</strong></li><li>HashMap åœ¨ put çš„å…ƒç´ æ•°é‡å¤§äº Capacity LoadFactorï¼ˆé»˜è®¤ 16*0.75ï¼‰ ä¹‹åä¼šè¿›è¡Œæ‰©å®¹ã€‚</li><li>JDK8 åœ¨å“ˆå¸Œç¢°æ’çš„é“¾è¡¨é•¿åº¦è¾¾åˆ° TREEIFY_THRESHOLDï¼ˆé»˜è®¤ 8)åï¼Œä¼šæŠŠè¯¥é“¾è¡¨è½¬å˜æˆæ ‘ç»“æ„ï¼Œæé«˜äº†æ€§èƒ½ã€‚</li><li>JDK8 åœ¨ resize çš„æ—¶å€™ï¼Œé€šè¿‡å·§å¦™çš„è®¾è®¡ï¼Œå‡å°‘äº† rehash çš„æ€§èƒ½æ¶ˆè€—ã€‚</li></ol>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>Docker æ­å»º Redis</title>
      <link href="/2019/07/30/yuque/Docker%20%E6%90%AD%E5%BB%BA%20Redis/"/>
      <url>/2019/07/30/yuque/Docker%20%E6%90%AD%E5%BB%BA%20Redis/</url>
      
        <content type="html"><![CDATA[<p>æ‹‰å–é•œåƒ</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span> docker pull redis</span><br></pre></td></tr></table></figure><p>è¿è¡Œé•œåƒ</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span> docker run -p 6379:6379 --restart=always -d redis:latest redis-server</span><br></pre></td></tr></table></figure><table><thead><tr><th><strong>å‘½ä»¤</strong></th><th><strong>å«ä¹‰</strong></th></tr></thead><tbody><tr><td>-d</td><td>æœ¬åœ°è¿è¡Œ</td></tr><tr><td>6379:6379</td><td>æœ¬åœ°ç«¯å£:Docker ç«¯å£</td></tr><tr><td>-v</td><td>æŒ‡å®šé©±åŠ¨ç›˜</td></tr><tr><td>G:\redisData</td><td>Redis çš„æŒä¹…åŒ–æ–‡ä»¶å­˜å‚¨</td></tr><tr><td>redis</td><td>docker çš„é•œåƒå</td></tr><tr><td>redis-server</td><td>redis æœåŠ¡å™¨</td></tr><tr><td>â€“appendonly yes</td><td>å¼€å¯æŒä¹…åŒ–</td></tr><tr><td>â€“name</td><td>æ‰§è¡Œè¿™ä¸ªè¿è¡Œçš„åç§°</td></tr><tr><td>â€“restart=always</td><td>Docker å¯åŠ¨å®¹å™¨å°±å¯åŠ¨</td></tr></tbody></table><p><img src="https://cdn.nlark.com/yuque/0/2019/png/113243/1564475897234-6fb3b6b0-c5ab-4d4a-88ee-c53a37d23e8b.png#align=left&amp;display=inline&amp;height=424&amp;name=image.png&amp;originHeight=424&amp;originWidth=617&amp;size=32149&amp;status=done&amp;width=617" alt="image.png"></p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>Docker æ­å»º Halo åšå®¢</title>
      <link href="/2019/07/30/yuque/Docker%20%E6%90%AD%E5%BB%BA%20Halo%20%E5%8D%9A%E5%AE%A2/"/>
      <url>/2019/07/30/yuque/Docker%20%E6%90%AD%E5%BB%BA%20Halo%20%E5%8D%9A%E5%AE%A2/</url>
      
        <content type="html"><![CDATA[<p>halo åšå®¢æ˜¯ä¸€æ¬¾è½»é‡çº§çš„ java åšå®¢  <a href="https://github.com/halo-dev/halo" target="_blank" rel="noopener">https://github.com/halo-dev/halo</a></p><p>åœ¨/usr/ ç›®å½•ä¸‹ä¸‹è½½  halo çš„ jar åŒ…</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span> wget https://github.com/halo-dev/halo/releases/download/v1.0.3/halo-1.0.3.jar -O halo-latest.jar</span><br></pre></td></tr></table></figure><p>halo é»˜è®¤çš„ç«¯å£æ˜¯ 8090</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span> docker run -d -p 8090:8090 -v  /usr/halo-latest.jar:/usr/halo-latest.jar --name halo_blog java:8u111 java -jar /usr/halo-latest.jar</span><br></pre></td></tr></table></figure><p>æ‰“å¼€æµè§ˆå™¨ï¼š<a href="http://ip:8090" target="_blank" rel="noopener">http://ip:8090</a> å°±å¯ä»¥è®¿é—®äº†</p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>Docker æ­å»º Jenkins</title>
      <link href="/2019/07/30/yuque/Docker%20%E6%90%AD%E5%BB%BA%20Jenkins/"/>
      <url>/2019/07/30/yuque/Docker%20%E6%90%AD%E5%BB%BA%20Jenkins/</url>
      
        <content type="html"><![CDATA[<p>ä¸‹è½½ jenkins</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span> docker pull jenkins/jenkins</span><br></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span> docker images</span><br></pre></td></tr></table></figure><p>å¯åŠ¨é•œåƒ</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span> docker run -d -p 80:8080 -p 50000:50000 -v jenkins:/var/jenkins_home -v /etc/localtime:/etc/localtime --name jenkins docker.io/jenkins/jenkins</span><br></pre></td></tr></table></figure><ul><li><code>-d</code> åå°è¿è¡Œé•œåƒ</li><li><code>-p 80:8080</code> å°†é•œåƒçš„ 8080 ç«¯å£æ˜ å°„åˆ°æœåŠ¡å™¨çš„ 80 ç«¯å£</li><li><code>-p 50000:50000</code> å°†é•œåƒçš„ 50000 ç«¯å£æ˜ å°„åˆ°æœåŠ¡å™¨çš„ 50000 ç«¯å£</li><li><code>-v jenkins:/var/jenkins_home</code> <code>/var/jenkins_home</code>ç›®å½•ä¸º jenkins å·¥ä½œç›®å½•ï¼Œæˆ‘ä»¬å°†ç¡¬ç›˜ä¸Šçš„ä¸€ä¸ªç›®å½•æŒ‚è½½åˆ°è¿™ä¸ªä½ç½®ï¼Œæ–¹ä¾¿åç»­æ›´æ–°é•œåƒåç»§ç»­ä½¿ç”¨åŸæ¥çš„å·¥ä½œç›®å½•ã€‚</li><li><code>-v /etc/localtime:/etc/localtime</code> è®©å®¹å™¨ä½¿ç”¨å’ŒæœåŠ¡å™¨åŒæ ·çš„æ—¶é—´è®¾ç½®ã€‚</li><li><code>--name jenkins</code> ç»™å®¹å™¨èµ·ä¸€ä¸ªåˆ«å</li></ul><p>è¿›å…¥ <a href="http://ip" target="_blank" rel="noopener">http://ip</a> è¿›è¡Œé…ç½®</p><p><img src="https://cdn.nlark.com/yuque/0/2019/png/113243/1564454625482-ce6d1fa9-6aa3-4613-817e-e5247aa0005d.png#align=left&amp;display=inline&amp;height=885&amp;originHeight=885&amp;originWidth=1228&amp;size=0&amp;status=done&amp;width=1228" alt><br>ä»å®¹å™¨è·¯å¾„è·å–åˆå§‹å¯†ç </p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span> docker exec jenkins tail /var/jenkins_home/secrets/initialAdminPassword</span><br><span class="line">7b5f88a8d9214934934978869b99c61b</span><br></pre></td></tr></table></figure><p><img src="https://cdn.nlark.com/yuque/0/2019/png/113243/1564454764007-4035704f-75dc-4e4b-9ee4-e77bed1fc625.png#align=left&amp;display=inline&amp;height=897&amp;originHeight=897&amp;originWidth=1231&amp;size=0&amp;status=done&amp;width=1231" alt><br>å®‰è£…å¥½æ’ä»¶ä¹‹ååˆ›å»ºç®¡ç†å‘˜è´¦å·<br><img src="https://cdn.nlark.com/yuque/0/2019/png/113243/1564454847792-a0cc5464-da43-4243-bb52-70faa223bba9.png#align=left&amp;display=inline&amp;height=877&amp;originHeight=877&amp;originWidth=1228&amp;size=0&amp;status=done&amp;width=1228" alt></p><p>è¿›å…¥å®¹å™¨</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span> docker exec -it jenkins /bin/bash</span><br></pre></td></tr></table></figure><p>ç”Ÿæˆå¯†é’¥</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span> ssh-keygen -t rsa -C "2284711614@qq.com"</span><br></pre></td></tr></table></figure><p>æŸ¥çœ‹å¯†é’¥</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span> tail /var/lib/docker/volumes/jenkins/_data/.ssh/id_rsa.pub</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>Docker æ­å»º Gogs æœ¬åœ°ä»“åº“</title>
      <link href="/2019/07/29/yuque/Docker%20%E6%90%AD%E5%BB%BA%20Gogs%20%E6%9C%AC%E5%9C%B0%E4%BB%93%E5%BA%93/"/>
      <url>/2019/07/29/yuque/Docker%20%E6%90%AD%E5%BB%BA%20Gogs%20%E6%9C%AC%E5%9C%B0%E4%BB%93%E5%BA%93/</url>
      
        <content type="html"><![CDATA[<p>åˆ›å»ºç›®å½•</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span>mkdir -p /var/gogs</span><br></pre></td></tr></table></figure><p>æ‹‰å–é•œåƒ</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span> docker pull gogs/gogs</span><br></pre></td></tr></table></figure><p>å¯åŠ¨é•œåƒï¼Œå°†å®¹å™¨ 10022 æ˜ å°„åˆ°å®¿ä¸»æœº 22 ç«¯å£ï¼Œå°†å®¹å™¨ 3000 ç«¯å£æ˜ å°„åˆ°å®¿ä¸»æœº 22 ç«¯å£ï¼Œå°†å®¹å™¨/data ç›®å½•æ˜ å°„åˆ°å®¿ä¸»æœº/var/gogs ç›®å½•</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span> docker run --name=gogs -d -p 10022:22 -p 3000:3000 -v /var/gogs:/data gogs/gogs</span><br></pre></td></tr></table></figure><p>è¿›å…¥ ip/3000/install è¿›è¡Œè®¾ç½®</p><p><img src="https://cdn.nlark.com/yuque/0/2019/png/113243/1564447348329-3e3e77e4-8c7f-42d5-8032-ac665d1e7704.png#align=left&amp;display=inline&amp;height=942&amp;originHeight=942&amp;originWidth=1169&amp;size=0&amp;status=done&amp;width=1169" alt></p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>Docker MySQL è¿œç¨‹è¿æ¥</title>
      <link href="/2019/07/29/yuque/Docker%20MySQL%20%E8%BF%9C%E7%A8%8B%E8%BF%9E%E6%8E%A5/"/>
      <url>/2019/07/29/yuque/Docker%20MySQL%20%E8%BF%9C%E7%A8%8B%E8%BF%9E%E6%8E%A5/</url>
      
        <content type="html"><![CDATA[<h3 id="é…ç½®å®¹å™¨"><a href="#é…ç½®å®¹å™¨" class="headerlink" title="é…ç½®å®¹å™¨"></a>é…ç½®å®¹å™¨</h3><p>ä¸‹è½½ mysql å®¹å™¨</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span> docker pull mysql</span><br></pre></td></tr></table></figure><p>å°†æœ¬åœ° 33306 ç«¯å£æ˜ å°„åˆ°å®¹å™¨ 3306 ç«¯å£</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span> docker run -di --name docker_mysql -p 33306:3306 -e MYSQL_ROOT_PASSWORD=123456 mysql</span><br></pre></td></tr></table></figure><p>è¿›å…¥å®¹å™¨</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span> docker exec -it docker_mysql /bin/bash</span><br></pre></td></tr></table></figure><h3 id="è®¾ç½®è¿œç¨‹ç™»å½•"><a href="#è®¾ç½®è¿œç¨‹ç™»å½•" class="headerlink" title="è®¾ç½®è¿œç¨‹ç™»å½•"></a>è®¾ç½®è¿œç¨‹ç™»å½•</h3><p>ç™»å½• mysqlï¼Œå¯†ç å°±æ˜¯æˆ‘ä»¬åˆšåˆšè®¾ç½®çš„ <strong>MYSQL_ROOT_PASSWORD=123456</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">root@8b7eb4eb9407:/# mysql -u root -p</span><br><span class="line">Enter password:</span><br><span class="line">Welcome to the MySQL monitor.  Commands end with ; or \g.</span><br><span class="line">Your MySQL connection id is 1</span><br><span class="line">Server version: 5.6.44 MySQL Community Server (GPL)</span><br><span class="line"></span><br><span class="line">Copyright (c) 2000, 2019, Oracle and/or its affiliates. All rights reserved.</span><br><span class="line"></span><br><span class="line">Oracle is a registered trademark of Oracle Corporation and/or its</span><br><span class="line">affiliates. Other names may be trademarks of their respective</span><br><span class="line">owners.</span><br><span class="line"></span><br><span class="line">Type 'help;' or '\h' for help. Type '\c' to clear the current input statement.</span><br><span class="line"></span><br><span class="line"><span class="meta">mysql&gt;</span></span><br></pre></td></tr></table></figure><p>root è¿œç¨‹ç™»å½•æƒé™</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">mysql&gt;</span> GRANT ALL ON *.* TO 'root'@'%';</span><br><span class="line">Query OK, 0 rows affected (0.23 sec)</span><br><span class="line"></span><br><span class="line"><span class="meta">mysql&gt;</span> flush privileges;</span><br><span class="line">Query OK, 0 rows affected (0.00 sec)</span><br></pre></td></tr></table></figure><p>é€€å‡º mysqlï¼Œé€€å‡ºå®¹å™¨</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">mysql&gt;</span> exit</span><br><span class="line">Bye</span><br><span class="line">root@8b7eb4eb9407:/# exit</span><br><span class="line">exit</span><br></pre></td></tr></table></figure><p>Navicat æµ‹è¯•è¿æ¥</p><p><img src="https://cdn.nlark.com/yuque/0/2019/png/113243/1564390302823-1436e27d-c383-4892-951e-6811020ae8ea.png#align=left&amp;display=inline&amp;height=354&amp;name=image.png&amp;originHeight=354&amp;originWidth=457&amp;size=18226&amp;status=done&amp;style=none&amp;width=457" alt="image.png"></p><p>Tip:<br>åœ¨ docker ä¸­è¿è¡Œ mysql å¯èƒ½ä¼šå†…å­˜å ç”¨è¿‡é«˜ï¼Œmysql ä¼šåŠ¨ä¸åŠ¨å°±æŒ‚æ‰ï¼Œå¯ä»¥é€šè¿‡ä¿®æ”¹ mysql é…ç½®æ–‡ä»¶çš„æ–¹æ³•æ¥æ”¹å–„è¿™ç§æƒ…å†µï¼š<a href="https://www.jianshu.com/p/5a344c258d5f" target="_blank" rel="noopener">https://www.jianshu.com/p/5a344c258d5f</a></p><h3 id="PS"><a href="#PS" class="headerlink" title="PS"></a>PS</h3><p>Authentication plugin â€˜caching_sha2_passwordâ€™ cannot be loaded</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span>ä¿®æ”¹åŠ å¯†è§„åˆ™</span><br><span class="line"><span class="meta">$</span> ALTER USER 'root'@'localhost' IDENTIFIED BY 'password' PASSWORD EXPIRE NEVER;</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span>æ›´æ–°ä¸€ä¸‹ç”¨æˆ·å¯†ç </span><br><span class="line"><span class="meta">$</span> ALTER USER 'root'@'localhost' IDENTIFIED WITH mysql_native_password BY 'password';</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span>åˆ·æ–°æƒé™</span><br><span class="line"><span class="meta">$</span> FLUSH PRIVILEGES;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>ç¬¬ä¸€æœ¬dockerä¹¦ï¼šSinatraå®¹å™¨</title>
      <link href="/2019/07/29/yuque/%E7%AC%AC%E4%B8%80%E6%9C%ACdocker%E4%B9%A6%EF%BC%9ASinatra%E5%AE%B9%E5%99%A8/"/>
      <url>/2019/07/29/yuque/%E7%AC%AC%E4%B8%80%E6%9C%ACdocker%E4%B9%A6%EF%BC%9ASinatra%E5%AE%B9%E5%99%A8/</url>
      
        <content type="html"><![CDATA[<p>åˆ›å»º Sinatra ç«™ç‚¹çš„ Dockerfile</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span> mkdir sinatra &amp;&amp; cd sinatra</span><br><span class="line"><span class="meta">$</span> touch Dockerfile</span><br></pre></td></tr></table></figure><p>åˆ›å»ºå®¹å™¨</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">FROM ubuntu:18.04</span><br><span class="line">LABEL maintainer="james@example.com"</span><br><span class="line">ENV REFRESHED_AT 2014-06-01</span><br><span class="line"></span><br><span class="line">RUN apt-get -qq update &amp;&amp; apt-get -qq install ruby ruby-dev build-essential redis-tools</span><br><span class="line">RUN gem install --no-rdoc --no-ri sinatra json redis</span><br><span class="line"></span><br><span class="line">RUN mkdir -p /opt/webapp</span><br><span class="line"></span><br><span class="line">EXPOSE 4567</span><br><span class="line"></span><br><span class="line">CMD [ "/opt/webapp/bin/webapp" ]</span><br></pre></td></tr></table></figure><p>æ„å»ºæ–°çš„ Sinatra é•œåƒ</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span> sudo docker build -t jamtur01/sinatra .</span><br></pre></td></tr></table></figure><p>ä¸‹è½½ Sinatra Web åº”ç”¨ç¨‹åºï¼ˆä¸‹è½½ Sinatra æœ‰é—®é¢˜ ç›´æ¥åˆ°è¿™ä¸ªé¡¹ç›®é‡Œé¢ä¸‹ <a href="https://github.com/turnbullpress/dockerbook-code" target="_blank" rel="noopener">https://github.com/turnbullpress/dockerbook-code</a>ï¼‰</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span> cd sinatra</span><br><span class="line"><span class="meta">$</span> wget --cut-dirs=3 -nH -r --reject Dockerfile,index.html --no-parent http://dockerbook.com/code/5/sinatra/webapp/</span><br><span class="line"><span class="meta">$</span> ls -l webapp</span><br></pre></td></tr></table></figure><p><img src="https://cdn.nlark.com/yuque/0/2019/png/113243/1564387202280-125242d3-7980-4147-b6b7-de13a90b1428.png#align=left&amp;display=inline&amp;height=338&amp;name=image.png&amp;originHeight=338&amp;originWidth=419&amp;size=21895&amp;status=done&amp;width=419" alt="image.png"></p><p>ç¡®ä¿ webapp/bin/webapp å¯ä»¥æ‰§è¡Œ</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span> chmod +x webapp/bin/webapp</span><br></pre></td></tr></table></figure><p>å¯åŠ¨ç¬¬ä¸€ä¸ª Sinatra å®¹å™¨</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span> sudo docker run -d -p 4567 --name webapp \</span><br><span class="line">  -v $PWD/webapp:/opt/webapp jamtur01/sinatra</span><br></pre></td></tr></table></figure><p>æµ‹è¯•</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@VM_57_214_centos sinatra]# sudo docker port webapp 4567</span><br><span class="line">0.0.0.0:32770</span><br></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span> curl -i -H 'Accept: application/json' \</span><br><span class="line">  -d 'name=Foo&amp;status=Bar' http://localhost:32770/json</span><br></pre></td></tr></table></figure><p><img src="https://cdn.nlark.com/yuque/0/2019/png/113243/1564387428190-1a8c2257-b9f1-4082-8c93-d70141c33fad.png#align=left&amp;display=inline&amp;height=451&amp;name=image.png&amp;originHeight=451&amp;originWidth=655&amp;size=63063&amp;status=done&amp;width=655" alt="image.png"></p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>ç¬¬ä¸€æœ¬dockerä¹¦ï¼šSampleç½‘ç«™</title>
      <link href="/2019/07/29/yuque/%E7%AC%AC%E4%B8%80%E6%9C%ACdocker%E4%B9%A6%EF%BC%9ASample%E7%BD%91%E7%AB%99/"/>
      <url>/2019/07/29/yuque/%E7%AC%AC%E4%B8%80%E6%9C%ACdocker%E4%B9%A6%EF%BC%9ASample%E7%BD%91%E7%AB%99/</url>
      
        <content type="html"><![CDATA[<h4 id="åˆ›å»º-sample-ç«™ç‚¹çš„-Dockerfile"><a href="#åˆ›å»º-sample-ç«™ç‚¹çš„-Dockerfile" class="headerlink" title="åˆ›å»º sample ç«™ç‚¹çš„ Dockerfile"></a>åˆ›å»º sample ç«™ç‚¹çš„ Dockerfile</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span> mkdir sample &amp;&amp; cd sample</span><br><span class="line"><span class="meta">$</span> touch Dockerfile</span><br></pre></td></tr></table></figure><h4 id="è·å–-Nginx-é…ç½®æ–‡ä»¶"><a href="#è·å–-Nginx-é…ç½®æ–‡ä»¶" class="headerlink" title="è·å– Nginx é…ç½®æ–‡ä»¶"></a>è·å– Nginx é…ç½®æ–‡ä»¶</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span> mkdir nginx &amp;&amp; cd nginx</span><br><span class="line"><span class="meta">$</span> wget https://raw.githubusercontent.com/jamtur01/dockerbook-code/master/code/5/sample/nginx/global.conf</span><br><span class="line"><span class="meta">$</span> wget http://raw.githubusercontent.com/jamtur01/dockerbook-code/master/code/5/sample/nginx/nginx.conf</span><br><span class="line"><span class="meta">$</span> cd ..</span><br></pre></td></tr></table></figure><h4 id="Dockerfile"><a href="#Dockerfile" class="headerlink" title="Dockerfile"></a>Dockerfile</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">FROM ubuntu:14.04</span><br><span class="line">MAINTAINER vonzhou "vonzhou@163.com"</span><br><span class="line">ENV REFRESHED_AT 2018-03-21</span><br><span class="line">RUN apt-get -yqq update &amp;&amp; apt-get -yqq install nginx</span><br><span class="line">RUN mkdir -p /var/wwww/html/website</span><br><span class="line">ADD nginx/global.conf /etc/nginx/conf.d/</span><br><span class="line">ADD nginx/nginx.conf /etc/nginx/nginx.conf</span><br><span class="line">EXPOSE 80</span><br></pre></td></tr></table></figure><h4 id="æ„å»ºæ–°çš„-Nginx-é•œåƒ"><a href="#æ„å»ºæ–°çš„-Nginx-é•œåƒ" class="headerlink" title="æ„å»ºæ–°çš„ Nginx é•œåƒ"></a>æ„å»ºæ–°çš„ Nginx é•œåƒ</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span> sudo docker build -t jamtur01/nginx .</span><br></pre></td></tr></table></figure><h4 id="å±•ç¤º-Nginx-é•œåƒçš„æ„å»ºå†å²"><a href="#å±•ç¤º-Nginx-é•œåƒçš„æ„å»ºå†å²" class="headerlink" title="å±•ç¤º Nginx é•œåƒçš„æ„å»ºå†å²"></a>å±•ç¤º Nginx é•œåƒçš„æ„å»ºå†å²</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span> sudo docker history jamtur01/nginx</span><br></pre></td></tr></table></figure><h4 id="ä¸‹è½½-Sample-ç½‘ç«™"><a href="#ä¸‹è½½-Sample-ç½‘ç«™" class="headerlink" title="ä¸‹è½½ Sample ç½‘ç«™"></a>ä¸‹è½½ Sample ç½‘ç«™</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span> mkdir website &amp;&amp; cd website</span><br><span class="line"><span class="meta">$</span> wget https://raw.githubusercontent.com/jamtur01/dockerbook-code/master/code/5/sample/website/index.html</span><br><span class="line"><span class="meta">$</span> cd ..</span><br></pre></td></tr></table></figure><h4 id="æ„å»ºç¬¬ä¸€ä¸ª-Nginx-æµ‹è¯•å®¹å™¨"><a href="#æ„å»ºç¬¬ä¸€ä¸ª-Nginx-æµ‹è¯•å®¹å™¨" class="headerlink" title="æ„å»ºç¬¬ä¸€ä¸ª Nginx æµ‹è¯•å®¹å™¨"></a>æ„å»ºç¬¬ä¸€ä¸ª Nginx æµ‹è¯•å®¹å™¨</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span> sudo docker run -d -p 80 --name website \</span><br><span class="line">  -v $PWD/website:/var/www/html/website \</span><br><span class="line">  jamtur01/nginx nginx</span><br></pre></td></tr></table></figure><h4 id="æŸ¥çœ‹-Sample-å®¹å™¨"><a href="#æŸ¥çœ‹-Sample-å®¹å™¨" class="headerlink" title="æŸ¥çœ‹ Sample å®¹å™¨"></a>æŸ¥çœ‹ Sample å®¹å™¨</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[root@VM_57_214_centos sample]# docker ps -l</span><br><span class="line">CONTAINER ID        IMAGE               COMMAND             CREATED             STATUS              PORTS                   NAMES</span><br><span class="line">fb76499c3136        jamtur01/nginx      "nginx"             6 minutes ago       Up 6 minutes        0.0.0.0:32769-&gt;80/tcp   website</span><br><span class="line"></span><br><span class="line">[root@VM_57_214_centos sample]# docker port fb76499c3136 80</span><br><span class="line">0.0.0.0:32769</span><br></pre></td></tr></table></figure><p>å®¿ä¸»æœºä¸Šè®¿é—® 32769 ç«¯å£</p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>Java å¤šçº¿ç¨‹ çº¿ç¨‹è®¡æ•°å™¨</title>
      <link href="/2019/07/24/yuque/Java%20%E5%A4%9A%E7%BA%BF%E7%A8%8B%20%E7%BA%BF%E7%A8%8B%E8%AE%A1%E6%95%B0%E5%99%A8/"/>
      <url>/2019/07/24/yuque/Java%20%E5%A4%9A%E7%BA%BF%E7%A8%8B%20%E7%BA%BF%E7%A8%8B%E8%AE%A1%E6%95%B0%E5%99%A8/</url>
      
        <content type="html"><![CDATA[<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">List&lt;String&gt; ips = <span class="keyword">new</span> ArrayList&lt;String&gt;();</span><br><span class="line">Map&lt;String, Boolean&gt; map = <span class="keyword">new</span> HashMap&lt;String, Boolean&gt;();</span><br><span class="line">CountDownLatch latch = <span class="keyword">new</span> CountDownLatch(ips.size()); <span class="comment">//1</span></span><br><span class="line"></span><br><span class="line">System.out.println(DateFormatUtils.format(<span class="keyword">new</span> Date(), <span class="string">"yyyy-MM-dd HH:mm:ss"</span>));</span><br><span class="line">ips.forEach(ip -&gt; &#123;</span><br><span class="line">    Thread thread = <span class="keyword">new</span> Thread() &#123;</span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">            map.put(ip, PortConnectUtil.connect(ip)); <span class="comment">//2</span></span><br><span class="line">            latch.countDown(); <span class="comment">//3</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">    thread.start();</span><br><span class="line">&#125;);</span><br><span class="line">latch.await(); <span class="comment">//4</span></span><br><span class="line">System.out.println(DateFormatUtils.format(<span class="keyword">new</span> Date(), <span class="string">"yyyy-MM-dd HH:mm:ss"</span>));</span><br><span class="line">System.out.println(map);</span><br></pre></td></tr></table></figure><ol><li>çº¿ç¨‹æ•°é‡</li><li>è¿™è¾¹ç”¨ä¸€ä¸ª map å°è£…ä¸€ä¸‹è¿”å›çš„å‚æ•°ï¼Œæ–¹ä¾¿æ‰¹é‡æ“ä½œæ•°æ®åº“</li><li>çº¿ç¨‹è®¡æ•°å™¨</li><li>æ‰€æœ‰çº¿ç¨‹æ‰§è¡Œå®Œæ¯•å†è¿›è¡Œä¸‹é¢çš„æ“ä½œ</li></ol>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>Spring boot swaggeræ–‡æ¡£</title>
      <link href="/2019/07/19/yuque/Spring%20boot%20swagger%E6%96%87%E6%A1%A3/"/>
      <url>/2019/07/19/yuque/Spring%20boot%20swagger%E6%96%87%E6%A1%A3/</url>
      
        <content type="html"><![CDATA[<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="meta">@EnableSwagger</span>2</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SwaggerConfiguration</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Docket <span class="title">createRestApi</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> Docket(DocumentationType.SWAGGER_2)</span><br><span class="line">                .select()</span><br><span class="line">                .apis(RequestHandlerSelectors.basePackage(<span class="string">"com.lcmoled.ehs360web"</span>))</span><br><span class="line">                .paths(PathSelectors.any())</span><br><span class="line">                .build()</span><br><span class="line">                .apiInfo(apiInfo());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> ApiInfo <span class="title">apiInfo</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> ApiInfoBuilder()</span><br><span class="line">                .title(<span class="string">"xxx"</span>)</span><br><span class="line">                .description(<span class="string">"APIæ–‡æ¡£"</span>)</span><br><span class="line">                .termsOfServiceUrl(<span class="string">"http://lcmoled.com/"</span>)</span><br><span class="line">                .version(<span class="string">"1.0"</span>)</span><br><span class="line">                .build();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>CentOS éƒ¨ç½² gitlab é‡åˆ°é—®é¢˜</title>
      <link href="/2019/07/11/yuque/CentOS%20%E9%83%A8%E7%BD%B2%20gitlab%20%E9%81%87%E5%88%B0%E9%97%AE%E9%A2%98/"/>
      <url>/2019/07/11/yuque/CentOS%20%E9%83%A8%E7%BD%B2%20gitlab%20%E9%81%87%E5%88%B0%E9%97%AE%E9%A2%98/</url>
      
        <content type="html"><![CDATA[<p>There was an error running gitlab-ctl reconfigure</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">sudo gitlab-ctl stop</span><br><span class="line">sudo chmod 755 /var/opt/gitlab/postgresql</span><br><span class="line">sudo systemctl restart gitlab-runsvdir</span><br><span class="line">sudo gitlab-ctl reconfigure</span><br><span class="line">sudo gitlab-ctl restart</span><br></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">sudo gitlab-ctl start # å¯åŠ¨æ‰€æœ‰ gitlab ç»„ä»¶ï¼›</span><br><span class="line">sudo gitlab-ctl stop # åœæ­¢æ‰€æœ‰ gitlab ç»„ä»¶ï¼›</span><br><span class="line">sudo gitlab-ctl restart # é‡å¯æ‰€æœ‰ gitlab ç»„ä»¶ï¼›</span><br><span class="line">sudo gitlab-ctl status # æŸ¥çœ‹æœåŠ¡çŠ¶æ€ï¼›</span><br><span class="line">sudo gitlab-ctl reconfigure # å¯åŠ¨æœåŠ¡ï¼›</span><br><span class="line">sudo vim /etc/gitlab/gitlab.rb # ä¿®æ”¹é»˜è®¤çš„é…ç½®æ–‡ä»¶ï¼›</span><br><span class="line">gitlab-rake gitlab:check SANITIZE=true --trace # æ£€æŸ¥gitlabï¼›</span><br><span class="line">sudo gitlab-ctl tail # æŸ¥çœ‹æ—¥å¿—ï¼›</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>Java ç±»åŠ è½½å™¨ ClassLoader</title>
      <link href="/2019/07/05/yuque/Java%20%E7%B1%BB%E5%8A%A0%E8%BD%BD%E5%99%A8%20ClassLoader/"/>
      <url>/2019/07/05/yuque/Java%20%E7%B1%BB%E5%8A%A0%E8%BD%BD%E5%99%A8%20ClassLoader/</url>
      
        <content type="html"><![CDATA[<p>JDK é»˜è®¤æä¾›äº†å¦‚ä¸‹å‡ ç§ ClassLoaderï¼š<br>**<br><strong>Bootstrp loader</strong><br>Bootstrp åŠ è½½å™¨æ˜¯ç”¨ C++è¯­è¨€å†™çš„ï¼Œå®ƒæ˜¯åœ¨ Java è™šæ‹Ÿæœºå¯åŠ¨ååˆå§‹åŒ–çš„ï¼Œå®ƒä¸»è¦è´Ÿè´£åŠ è½½<code>%JAVA_HOME%/jre/lib</code>,<code>-Xbootclasspath</code>å‚æ•°æŒ‡å®šçš„è·¯å¾„ä»¥åŠ<code>%JAVA_HOME%/jre/classes</code>ä¸­çš„ç±»ã€‚</p><p><strong>ExtClassLoader  </strong><br>Bootstrp loader åŠ è½½ ExtClassLoader,å¹¶ä¸”å°† ExtClassLoader çš„çˆ¶åŠ è½½å™¨è®¾ç½®ä¸º Bootstrp loader.ExtClassLoader æ˜¯ç”¨ Java å†™çš„ï¼Œå…·ä½“æ¥è¯´å°±æ˜¯ sun.misc.Launcher\$ExtClassLoaderï¼ŒExtClassLoader ä¸»è¦åŠ è½½<code>%JAVA_HOME%/jre/lib/ext</code>ï¼Œæ­¤è·¯å¾„ä¸‹çš„æ‰€æœ‰ classes ç›®å½•ä»¥åŠ<code>java.ext.dirs</code>ç³»ç»Ÿå˜é‡æŒ‡å®šçš„è·¯å¾„ä¸­ç±»åº“ã€‚</p><p><strong>AppClassLoader </strong><br>Bootstrp loader åŠ è½½å®Œ ExtClassLoader åï¼Œå°±ä¼šåŠ è½½ AppClassLoader,å¹¶ä¸”å°† AppClassLoader çš„çˆ¶åŠ è½½å™¨æŒ‡å®šä¸º ExtClassLoaderã€‚AppClassLoader ä¹Ÿæ˜¯ç”¨ Java å†™æˆçš„ï¼Œå®ƒçš„å®ç°ç±»æ˜¯ sun.misc.Launcher\$AppClassLoaderï¼Œå¦å¤–æˆ‘ä»¬çŸ¥é“ ClassLoader ä¸­æœ‰ä¸ª<code>getSystemClassLoader</code>æ–¹æ³•,æ­¤æ–¹æ³•è¿”å›çš„æ­£æ˜¯ AppclassLoader.AppClassLoader ä¸»è¦è´Ÿè´£åŠ è½½ classpath æ‰€æŒ‡å®šçš„ä½ç½®çš„ç±»æˆ–è€…æ˜¯ jar æ–‡æ¡£ï¼Œå®ƒä¹Ÿæ˜¯ Java ç¨‹åºé»˜è®¤çš„ç±»åŠ è½½å™¨ã€‚</p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>Cookie å’Œ Session çš„åŒºåˆ«</title>
      <link href="/2019/07/05/yuque/Cookie%20%E5%92%8C%20Session%20%E7%9A%84%E5%8C%BA%E5%88%AB/"/>
      <url>/2019/07/05/yuque/Cookie%20%E5%92%8C%20Session%20%E7%9A%84%E5%8C%BA%E5%88%AB/</url>
      
        <content type="html"><![CDATA[<p>Cookie å’Œ Session éƒ½æ˜¯ç”¨æ¥è·Ÿè¸ªæµè§ˆå™¨ç”¨æˆ·èº«ä»½çš„ä¼šè¯æ–¹å¼ï¼Œä½†æ˜¯ä¸¤è€…çš„åº”ç”¨åœºæ™¯ä¸å¤ªä¸€æ ·ã€‚</p><p><strong>Cookie ä¸€èˆ¬ç”¨æ¥ä¿å­˜ç”¨æˆ·ä¿¡æ¯</strong><br>æ¯”å¦‚ï¼š<br>â‘  æˆ‘ä»¬åœ¨ Cookie ä¸­ä¿å­˜å·²ç»ç™»å½•è¿‡å¾—ç”¨æˆ·ä¿¡æ¯ï¼Œä¸‹æ¬¡è®¿é—®ç½‘ç«™çš„æ—¶å€™é¡µé¢å¯ä»¥è‡ªåŠ¨å¸®ä½ ç™»å½•çš„ä¸€äº›åŸºæœ¬ä¿¡æ¯ç»™å¡«äº†ï¼›<br>â‘¡ ä¸€èˆ¬çš„ç½‘ç«™éƒ½ä¼šæœ‰ä¿æŒç™»å½•ä¹Ÿå°±æ˜¯è¯´ä¸‹æ¬¡ä½ å†è®¿é—®ç½‘ç«™çš„æ—¶å€™å°±ä¸éœ€è¦é‡æ–°ç™»å½•äº†ï¼Œè¿™æ˜¯å› ä¸ºç”¨æˆ·ç™»å½•çš„æ—¶å€™æˆ‘ä»¬å¯ä»¥å­˜æ”¾äº†ä¸€ä¸ª Token åœ¨ Cookie ä¸­ï¼Œä¸‹æ¬¡ç™»å½•çš„æ—¶å€™åªéœ€è¦æ ¹æ® Token å€¼æ¥æŸ¥æ‰¾ç”¨æˆ·å³å¯(ä¸ºäº†å®‰å…¨è€ƒè™‘ï¼Œé‡æ–°ç™»å½•ä¸€èˆ¬è¦å°† Token é‡å†™)ï¼›<br>â‘¢ ç™»å½•ä¸€æ¬¡ç½‘ç«™åè®¿é—®ç½‘ç«™å…¶ä»–é¡µé¢ä¸éœ€è¦é‡æ–°ç™»å½•ã€‚<br>cookieId</p><p><strong>Session çš„ä¸»è¦ä½œç”¨å°±æ˜¯é€šè¿‡æœåŠ¡ç«¯è®°å½•ç”¨æˆ·çš„çŠ¶æ€ã€‚</strong><br>å…¸å‹çš„åœºæ™¯æ˜¯è´­ç‰©è½¦ï¼Œå½“ä½ è¦æ·»åŠ å•†å“åˆ°è´­ç‰©è½¦çš„æ—¶å€™ï¼Œç³»ç»Ÿä¸çŸ¥é“æ˜¯å“ªä¸ªç”¨æˆ·æ“ä½œçš„ï¼Œå› ä¸º HTTP åè®®æ˜¯æ— çŠ¶æ€çš„ã€‚æœåŠ¡ç«¯ç»™ç‰¹å®šçš„ç”¨æˆ·åˆ›å»ºç‰¹å®šçš„ Session ä¹‹åå°±å¯ä»¥æ ‡è¯†è¿™ä¸ªç”¨æˆ·å¹¶ä¸”è·Ÿè¸ªè¿™ä¸ªç”¨æˆ·äº†ã€‚</p><p>Cookie æ•°æ®ä¿å­˜åœ¨å®¢æˆ·ç«¯(æµè§ˆå™¨ç«¯)ï¼ŒSession æ•°æ®ä¿å­˜åœ¨æœåŠ¡å™¨ç«¯ã€‚<br>Cookie å­˜å‚¨åœ¨å®¢æˆ·ç«¯ä¸­ï¼Œè€Œ Session å­˜å‚¨åœ¨æœåŠ¡å™¨ä¸Šï¼Œç›¸å¯¹æ¥è¯´ Session å®‰å…¨æ€§æ›´é«˜ã€‚å¦‚æœä½¿ç”¨ Cookie çš„ä¸€äº›æ•æ„Ÿä¿¡æ¯ä¸è¦å†™å…¥ Cookie ä¸­ï¼Œæœ€å¥½èƒ½å°† Cookie ä¿¡æ¯åŠ å¯†ç„¶åä½¿ç”¨åˆ°çš„æ—¶å€™å†å»æœåŠ¡å™¨ç«¯è§£å¯†ã€‚</p><p><a href="https://snailclimb.gitee.io/javaguide/#/java/J2EE%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86?id=cookie%e5%92%8csession%e7%9a%84%e7%9a%84%e5%8c%ba%e5%88%ab" target="_blank" rel="noopener">é“¾æ¥</a></p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>IDEA Perhaps you are running on a JRE rather than a JDK</title>
      <link href="/2019/06/06/yuque/IDEA%20Perhaps%20you%20are%20running%20on%20a%20JRE%20rather%20than%20a%20JDK/"/>
      <url>/2019/06/06/yuque/IDEA%20Perhaps%20you%20are%20running%20on%20a%20JRE%20rather%20than%20a%20JDK/</url>
      
        <content type="html"><![CDATA[<p>æ‰§è¡Œ mvn å‘½ä»¤çš„æ—¶å€™æŠ¥æ²¡æœ‰ jdk çš„é”™</p><p>æ˜¯å› ä¸ºé…ç½® jdk çš„æ—¶å€™ï¼Œä¸ºäº†å›¾çœäº‹ï¼Œæ²¡æœ‰é…ç½®ä»¥ JAVA_HOME å‘½åçš„ç¯å¢ƒå˜é‡ï¼Œæˆ–è€…ç›´æ¥ç”¨çš„ exe çš„å®‰è£…åŒ…ç›´æ¥å®‰è£…çš„ jdk ã€‚<br>é…ç½®ä¸€ä¸‹  JAVA_HOME å°±è¡Œäº†ã€‚</p><p><a href="https://jingyan.baidu.com/article/9faa72319a93ae473c28cb92.html" target="_blank" rel="noopener">https://jingyan.baidu.com/article/9faa72319a93ae473c28cb92.html</a></p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>JSPæœ‰å“ªäº›å†…ç½®å¯¹è±¡å’Œä½œç”¨</title>
      <link href="/2019/06/04/yuque/JSP%E6%9C%89%E5%93%AA%E4%BA%9B%E5%86%85%E7%BD%AE%E5%AF%B9%E8%B1%A1%E5%92%8C%E4%BD%9C%E7%94%A8/"/>
      <url>/2019/06/04/yuque/JSP%E6%9C%89%E5%93%AA%E4%BA%9B%E5%86%85%E7%BD%AE%E5%AF%B9%E8%B1%A1%E5%92%8C%E4%BD%9C%E7%94%A8/</url>
      
        <content type="html"><![CDATA[<h3 id="JSP-æœ‰-9-ä¸ªå†…ç½®å¯¹è±¡"><a href="#JSP-æœ‰-9-ä¸ªå†…ç½®å¯¹è±¡" class="headerlink" title="JSP æœ‰ 9 ä¸ªå†…ç½®å¯¹è±¡"></a>JSP æœ‰ 9 ä¸ªå†…ç½®å¯¹è±¡</h3><ul><li>requestï¼šå°è£…å®¢æˆ·ç«¯çš„è¯·æ±‚ï¼Œå…¶ä¸­åŒ…å«æ¥è‡ª GET æˆ– POST è¯·æ±‚çš„å‚æ•°ï¼›</li><li>responseï¼šå°è£…æœåŠ¡å™¨å¯¹å®¢æˆ·ç«¯çš„å“åº”ï¼›</li><li>pageContextï¼šé€šè¿‡è¯¥å¯¹è±¡å¯ä»¥è·å–å…¶ä»–å¯¹è±¡ï¼›</li><li>sessionï¼šå°è£…ç”¨æˆ·ä¼šè¯çš„å¯¹è±¡ï¼›</li><li>applicationï¼šå°è£…æœåŠ¡å™¨è¿è¡Œç¯å¢ƒçš„å¯¹è±¡ï¼›</li><li>outï¼šè¾“å‡ºæœåŠ¡å™¨å“åº”çš„è¾“å‡ºæµå¯¹è±¡ï¼›</li><li>configï¼šWeb åº”ç”¨çš„é…ç½®å¯¹è±¡ï¼›</li><li>pageï¼šJSP é¡µé¢æœ¬èº«ï¼ˆç›¸å½“äº Java ç¨‹åºä¸­çš„ thisï¼‰ï¼›</li><li>exceptionï¼šå°è£…é¡µé¢æŠ›å‡ºå¼‚å¸¸çš„å¯¹è±¡ã€‚</li></ul><h3 id="Request-å¯¹è±¡çš„ä¸»è¦æ–¹æ³•æœ‰å“ªäº›"><a href="#Request-å¯¹è±¡çš„ä¸»è¦æ–¹æ³•æœ‰å“ªäº›" class="headerlink" title="Request å¯¹è±¡çš„ä¸»è¦æ–¹æ³•æœ‰å“ªäº›"></a>Request å¯¹è±¡çš„ä¸»è¦æ–¹æ³•æœ‰å“ªäº›</h3><ul><li>setAttribute(String name,Object)ï¼šè®¾ç½®åå­—ä¸º name çš„ request çš„å‚æ•°å€¼</li><li>getAttribute(String name)ï¼šè¿”å›ç”± name æŒ‡å®šçš„å±æ€§å€¼</li><li>getAttributeNames()ï¼šè¿”å› request å¯¹è±¡æ‰€æœ‰å±æ€§çš„åå­—é›†åˆï¼Œç»“æœæ˜¯ä¸€ä¸ªæšä¸¾çš„å®ä¾‹</li><li>getCookies()ï¼šè¿”å›å®¢æˆ·ç«¯çš„æ‰€æœ‰ Cookie å¯¹è±¡ï¼Œç»“æœæ˜¯ä¸€ä¸ª Cookie æ•°ç»„</li><li>getCharacterEncoding() ï¼šè¿”å›è¯·æ±‚ä¸­çš„å­—ç¬¦ç¼–ç æ–¹å¼ = getContentLength() ï¼šè¿”å›è¯·æ±‚çš„ Body çš„é•¿åº¦</li><li>getHeader(String name) ï¼šè·å¾— HTTP åè®®å®šä¹‰çš„æ–‡ä»¶å¤´ä¿¡æ¯</li><li>getHeaders(String name) ï¼šè¿”å›æŒ‡å®šåå­—çš„ request Header çš„æ‰€æœ‰å€¼ï¼Œç»“æœæ˜¯ä¸€ä¸ªæšä¸¾çš„å®ä¾‹</li><li>getHeaderNames() ï¼šè¿”å›æ‰€ä»¥ request Header çš„åå­—ï¼Œç»“æœæ˜¯ä¸€ä¸ªæšä¸¾çš„å®ä¾‹</li><li>getInputStream() ï¼šè¿”å›è¯·æ±‚çš„è¾“å…¥æµï¼Œç”¨äºè·å¾—è¯·æ±‚ä¸­çš„æ•°æ®</li><li>getMethod() ï¼šè·å¾—å®¢æˆ·ç«¯å‘æœåŠ¡å™¨ç«¯ä¼ é€æ•°æ®çš„æ–¹æ³•</li><li>getParameter(String name) ï¼šè·å¾—å®¢æˆ·ç«¯ä¼ é€ç»™æœåŠ¡å™¨ç«¯çš„æœ‰ name æŒ‡å®šçš„å‚æ•°å€¼</li><li>getParameterNames() ï¼šè·å¾—å®¢æˆ·ç«¯ä¼ é€ç»™æœåŠ¡å™¨ç«¯çš„æ‰€æœ‰å‚æ•°çš„åå­—ï¼Œç»“æœæ˜¯ä¸€ä¸ªæšä¸¾çš„å®ä¾‹</li><li>getParameterValues(String name)ï¼šè·å¾—æœ‰ name æŒ‡å®šçš„å‚æ•°çš„æ‰€æœ‰å€¼</li><li>getProtocol()ï¼šè·å–å®¢æˆ·ç«¯å‘æœåŠ¡å™¨ç«¯ä¼ é€æ•°æ®æ‰€ä¾æ®çš„åè®®åç§°</li><li>getQueryString() ï¼šè·å¾—æŸ¥è¯¢å­—ç¬¦ä¸²</li><li>getRequestURI() ï¼šè·å–å‘å‡ºè¯·æ±‚å­—ç¬¦ä¸²çš„å®¢æˆ·ç«¯åœ°å€</li><li>getRemoteAddr()ï¼šè·å–å®¢æˆ·ç«¯çš„ IP åœ°å€</li><li>getRemoteHost() ï¼šè·å–å®¢æˆ·ç«¯çš„åå­—</li><li>getSession([Boolean create]) ï¼šè¿”å›å’Œè¯·æ±‚ç›¸å…³ Session</li><li>getServerName() ï¼šè·å–æœåŠ¡å™¨çš„åå­—</li><li>getServletPath()ï¼šè·å–å®¢æˆ·ç«¯æ‰€è¯·æ±‚çš„è„šæœ¬æ–‡ä»¶çš„è·¯å¾„</li><li>getServerPort()ï¼šè·å–æœåŠ¡å™¨çš„ç«¯å£å·</li><li>removeAttribute(String name)ï¼šåˆ é™¤è¯·æ±‚ä¸­çš„ä¸€ä¸ªå±æ€§</li></ul>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>è½¬å‘(Forward)å’Œé‡å®šå‘(Redirect)çš„åŒºåˆ«</title>
      <link href="/2019/06/04/yuque/%E8%BD%AC%E5%8F%91(Forward)%E5%92%8C%E9%87%8D%E5%AE%9A%E5%90%91(Redirect)%E7%9A%84%E5%8C%BA%E5%88%AB/"/>
      <url>/2019/06/04/yuque/%E8%BD%AC%E5%8F%91(Forward)%E5%92%8C%E9%87%8D%E5%AE%9A%E5%90%91(Redirect)%E7%9A%84%E5%8C%BA%E5%88%AB/</url>
      
        <content type="html"><![CDATA[<p><strong>è½¬å‘æ˜¯æœåŠ¡å™¨è¡Œä¸ºï¼Œé‡å®šå‘æ˜¯å®¢æˆ·ç«¯è¡Œä¸ºã€‚</strong> *<strong>*è½¬å‘ï¼ˆForwardï¼‰</strong>  é€šè¿‡ RequestDispatcher å¯¹è±¡çš„ forwardï¼ˆHttpServletRequest request,HttpServletResponse responseï¼‰æ–¹æ³•å®ç°çš„ã€‚RequestDispatcher å¯ä»¥é€šè¿‡ HttpServletRequest çš„ getRequestDispatcher()æ–¹æ³•è·å¾—ã€‚ä¾‹å¦‚ä¸‹é¢çš„ä»£ç å°±æ˜¯è·³è½¬åˆ° login_success.jsp é¡µé¢ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">request.getRequestDispatcher(<span class="string">"login_success.jsp"</span>).forward(request, response);</span><br></pre></td></tr></table></figure><p><strong>é‡å®šå‘ï¼ˆRedirectï¼‰</strong>  æ˜¯åˆ©ç”¨æœåŠ¡å™¨è¿”å›çš„çŠ¶æ€ç æ¥å®ç°çš„ã€‚å®¢æˆ·ç«¯æµè§ˆå™¨è¯·æ±‚æœåŠ¡å™¨çš„æ—¶å€™ï¼ŒæœåŠ¡å™¨ä¼šè¿”å›ä¸€ä¸ªçŠ¶æ€ç ã€‚æœåŠ¡å™¨é€šè¿‡  <code>HttpServletResponse</code>  çš„  <code>setStatus(int status)</code>  æ–¹æ³•è®¾ç½®çŠ¶æ€ç ã€‚å¦‚æœæœåŠ¡å™¨è¿”å› 301 æˆ–è€… 302ï¼Œåˆ™æµè§ˆå™¨ä¼šåˆ°æ–°çš„ç½‘å€é‡æ–°è¯·æ±‚è¯¥èµ„æºã€‚</p><p><strong>ä»åœ°å€æ æ˜¾ç¤ºæ¥è¯´</strong></p><p>forward æ˜¯æœåŠ¡å™¨è¯·æ±‚èµ„æº,æœåŠ¡å™¨ç›´æ¥è®¿é—®ç›®æ ‡åœ°å€çš„ URL,æŠŠé‚£ä¸ª URL çš„å“åº”å†…å®¹è¯»å–è¿‡æ¥,ç„¶åæŠŠè¿™äº›å†…å®¹å†å‘ç»™æµè§ˆå™¨.æµè§ˆå™¨æ ¹æœ¬ä¸çŸ¥é“æœåŠ¡å™¨å‘é€çš„å†…å®¹ä»å“ªé‡Œæ¥çš„,æ‰€ä»¥å®ƒçš„åœ°å€æ è¿˜æ˜¯åŸæ¥çš„åœ°å€. redirect æ˜¯æœåŠ¡ç«¯æ ¹æ®é€»è¾‘,å‘é€ä¸€ä¸ªçŠ¶æ€ç ,å‘Šè¯‰æµè§ˆå™¨é‡æ–°å»è¯·æ±‚é‚£ä¸ªåœ°å€.æ‰€ä»¥åœ°å€æ æ˜¾ç¤ºçš„æ˜¯æ–°çš„ URL.</p><p><strong>ä»æ•°æ®å…±äº«æ¥è¯´</strong><br>**<br>forward:è½¬å‘é¡µé¢å’Œè½¬å‘åˆ°çš„é¡µé¢å¯ä»¥å…±äº« request é‡Œé¢çš„æ•°æ®. redirect:ä¸èƒ½å…±äº«æ•°æ®.</p><p><strong>ä»è¿ç”¨åœ°æ–¹æ¥è¯´</strong><br>**<br>forward:ä¸€èˆ¬ç”¨äºç”¨æˆ·ç™»é™†çš„æ—¶å€™,æ ¹æ®è§’è‰²è½¬å‘åˆ°ç›¸åº”çš„æ¨¡å—. redirect:ä¸€èˆ¬ç”¨äºç”¨æˆ·æ³¨é”€ç™»é™†æ—¶è¿”å›ä¸»é¡µé¢å’Œè·³è½¬åˆ°å…¶å®ƒçš„ç½‘ç«™ç­‰</p><p><strong>ä»æ•ˆç‡æ¥è¯´</strong><br>**<br>forward:é«˜. redirect:ä½.</p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>Collections å·¥å…·ç±»å’Œ Arrays å·¥å…·ç±»å¸¸è§æ–¹æ³•</title>
      <link href="/2019/06/04/yuque/Collections%20%E5%B7%A5%E5%85%B7%E7%B1%BB%E5%92%8C%20Arrays%20%E5%B7%A5%E5%85%B7%E7%B1%BB%E5%B8%B8%E8%A7%81%E6%96%B9%E6%B3%95/"/>
      <url>/2019/06/04/yuque/Collections%20%E5%B7%A5%E5%85%B7%E7%B1%BB%E5%92%8C%20Arrays%20%E5%B7%A5%E5%85%B7%E7%B1%BB%E5%B8%B8%E8%A7%81%E6%96%B9%E6%B3%95/</url>
      
        <content type="html"><![CDATA[<h3 id="Collections"><a href="#Collections" class="headerlink" title="Collections"></a>Collections</h3><ul><li>æ’åºæ“ä½œ</li><li>æŸ¥æ‰¾,æ›¿æ¢æ“ä½œ</li><li>åŒæ­¥æ§åˆ¶</li></ul><h4 id="æ’åºæ“ä½œ"><a href="#æ’åºæ“ä½œ" class="headerlink" title="æ’åºæ“ä½œ"></a>æ’åºæ“ä½œ</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">reverse</span><span class="params">(List list)</span><span class="comment">//åè½¬</span></span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">shuffle</span><span class="params">(List list)</span><span class="comment">//éšæœºæ’åº</span></span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">sort</span><span class="params">(List list)</span><span class="comment">//æŒ‰è‡ªç„¶æ’åºçš„å‡åºæ’åº</span></span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">sort</span><span class="params">(List list, Comparator c)</span><span class="comment">//å®šåˆ¶æ’åºï¼Œç”±Comparatoræ§åˆ¶æ’åºé€»è¾‘</span></span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">swap</span><span class="params">(List list, <span class="keyword">int</span> i , <span class="keyword">int</span> j)</span><span class="comment">//äº¤æ¢ä¸¤ä¸ªç´¢å¼•ä½ç½®çš„å…ƒç´ </span></span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">rotate</span><span class="params">(List list, <span class="keyword">int</span> distance)</span><span class="comment">//æ—‹è½¬ã€‚å½“distanceä¸ºæ­£æ•°æ—¶ï¼Œå°†listådistanceä¸ªå…ƒç´ æ•´ä½“ç§»åˆ°å‰é¢ã€‚å½“distanceä¸ºè´Ÿæ•°æ—¶ï¼Œå°† listçš„å‰distanceä¸ªå…ƒç´ æ•´ä½“ç§»åˆ°åé¢ã€‚</span></span></span><br></pre></td></tr></table></figure><h4 id="æŸ¥æ‰¾-æ›¿æ¢æ“ä½œ"><a href="#æŸ¥æ‰¾-æ›¿æ¢æ“ä½œ" class="headerlink" title="æŸ¥æ‰¾,æ›¿æ¢æ“ä½œ"></a>æŸ¥æ‰¾,æ›¿æ¢æ“ä½œ</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">binarySearch</span><span class="params">(List list, Object key)</span><span class="comment">//å¯¹Listè¿›è¡ŒäºŒåˆ†æŸ¥æ‰¾ï¼Œè¿”å›ç´¢å¼•ï¼Œæ³¨æ„Listå¿…é¡»æ˜¯æœ‰åºçš„</span></span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">max</span><span class="params">(Collection coll)</span><span class="comment">//æ ¹æ®å…ƒç´ çš„è‡ªç„¶é¡ºåºï¼Œè¿”å›æœ€å¤§çš„å…ƒç´ ã€‚ ç±»æ¯”int min(Collection coll)</span></span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">max</span><span class="params">(Collection coll, Comparator c)</span><span class="comment">//æ ¹æ®å®šåˆ¶æ’åºï¼Œè¿”å›æœ€å¤§å…ƒç´ ï¼Œæ’åºè§„åˆ™ç”±Comparatatorç±»æ§åˆ¶ã€‚ç±»æ¯”int min(Collection coll, Comparator c)</span></span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">fill</span><span class="params">(List list, Object obj)</span><span class="comment">//ç”¨æŒ‡å®šçš„å…ƒç´ ä»£æ›¿æŒ‡å®šlistä¸­çš„æ‰€æœ‰å…ƒç´ ã€‚</span></span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">frequency</span><span class="params">(Collection c, Object o)</span><span class="comment">//ç»Ÿè®¡å…ƒç´ å‡ºç°æ¬¡æ•°</span></span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">indexOfSubList</span><span class="params">(List list, List target)</span><span class="comment">//ç»Ÿè®¡targetåœ¨listä¸­ç¬¬ä¸€æ¬¡å‡ºç°çš„ç´¢å¼•ï¼Œæ‰¾ä¸åˆ°åˆ™è¿”å›-1ï¼Œç±»æ¯”int lastIndexOfSubList(List source, list target).</span></span></span><br><span class="line"><span class="function"><span class="keyword">boolean</span> <span class="title">replaceAll</span><span class="params">(List list, Object oldVal, Object newVal)</span>, ç”¨æ–°å…ƒç´ æ›¿æ¢æ—§å…ƒç´ </span></span><br></pre></td></tr></table></figure><h4 id="åŒæ­¥æ§åˆ¶"><a href="#åŒæ­¥æ§åˆ¶" class="headerlink" title="åŒæ­¥æ§åˆ¶"></a>åŒæ­¥æ§åˆ¶</h4><p>Collections æä¾›äº†å¤šä¸ª synchronizedXxx()æ–¹æ³•Â·ï¼Œè¯¥æ–¹æ³•å¯ä»¥å°†æŒ‡å®šé›†åˆåŒ…è£…æˆçº¿ç¨‹åŒæ­¥çš„é›†åˆï¼Œä»è€Œè§£å†³å¤šçº¿ç¨‹å¹¶å‘è®¿é—®é›†åˆæ—¶çš„çº¿ç¨‹å®‰å…¨é—®é¢˜ã€‚<br>æˆ‘ä»¬çŸ¥é“ HashSetï¼ŒTreeSetï¼ŒArrayList,LinkedList,HashMap,TreeMap éƒ½æ˜¯çº¿ç¨‹ä¸å®‰å…¨çš„ã€‚Collections æä¾›äº†å¤šä¸ªé™æ€æ–¹æ³•å¯ä»¥æŠŠä»–ä»¬åŒ…è£…æˆçº¿ç¨‹åŒæ­¥çš„é›†åˆã€‚<br><strong>æœ€å¥½ä¸è¦ç”¨ä¸‹é¢è¿™äº›æ–¹æ³•ï¼Œæ•ˆç‡éå¸¸ä½ï¼Œéœ€è¦çº¿ç¨‹å®‰å…¨çš„é›†åˆç±»å‹æ—¶è¯·è€ƒè™‘ä½¿ç”¨ JUC åŒ…ä¸‹çš„å¹¶å‘é›†åˆã€‚</strong><br>æ–¹æ³•å¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">synchronizedCollection(Collection  c) <span class="comment">//è¿”å›æŒ‡å®š collection æ”¯æŒçš„åŒæ­¥ï¼ˆçº¿ç¨‹å®‰å…¨çš„ï¼‰collectionã€‚</span></span><br><span class="line">synchronizedList(List list)<span class="comment">//è¿”å›æŒ‡å®šåˆ—è¡¨æ”¯æŒçš„åŒæ­¥ï¼ˆçº¿ç¨‹å®‰å…¨çš„ï¼‰Listã€‚</span></span><br><span class="line">synchronizedMap(Map&lt;K,V&gt; m) <span class="comment">//è¿”å›ç”±æŒ‡å®šæ˜ å°„æ”¯æŒçš„åŒæ­¥ï¼ˆçº¿ç¨‹å®‰å…¨çš„ï¼‰Mapã€‚</span></span><br><span class="line">synchronizedSet(Set s) <span class="comment">//è¿”å›æŒ‡å®š set æ”¯æŒçš„åŒæ­¥ï¼ˆçº¿ç¨‹å®‰å…¨çš„ï¼‰setã€‚</span></span><br></pre></td></tr></table></figure><h3 id="Arrays"><a href="#Arrays" class="headerlink" title="Arrays"></a>Arrays</h3><ul><li>æ’åº : <code>sort()</code></li><li>æŸ¥æ‰¾ : <code>binarySearch()</code></li><li>æ¯”è¾ƒ: <code>equals()</code></li><li>å¡«å…… : <code>fill()</code></li><li>è½¬åˆ—è¡¨  <code>asList()</code></li><li>è½¬å­—ç¬¦ä¸²  <code>toString()</code></li><li>å¤åˆ¶  <code>copyOf()</code></li></ul><h4 id="binarySearch"><a href="#binarySearch" class="headerlink" title="binarySearch"></a>binarySearch</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// *************æŸ¥æ‰¾ binarySearch()****************</span></span><br><span class="line"><span class="keyword">char</span>[] e = &#123; <span class="string">'a'</span>, <span class="string">'f'</span>, <span class="string">'b'</span>, <span class="string">'c'</span>, <span class="string">'e'</span>, <span class="string">'A'</span>, <span class="string">'C'</span>, <span class="string">'B'</span> &#125;;</span><br><span class="line"><span class="comment">// æ’åºåå†è¿›è¡ŒäºŒåˆ†æŸ¥æ‰¾ï¼Œå¦åˆ™æ‰¾ä¸åˆ°</span></span><br><span class="line">Arrays.sort(e);</span><br><span class="line">System.out.println(<span class="string">"Arrays.sort(e)"</span> + Arrays.toString(e));</span><br><span class="line">System.out.println(<span class="string">"Arrays.binarySearch(e, 'c')ï¼š"</span>);</span><br><span class="line"><span class="keyword">int</span> s = Arrays.binarySearch(e, <span class="string">'c'</span>);</span><br><span class="line">System.out.println(<span class="string">"å­—ç¬¦cåœ¨æ•°ç»„çš„ä½ç½®ï¼š"</span> + s);</span><br></pre></td></tr></table></figure><h4 id="equals"><a href="#equals" class="headerlink" title="equals"></a>equals</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// *************æ¯”è¾ƒ equals****************</span></span><br><span class="line"><span class="keyword">char</span>[] e = &#123; <span class="string">'a'</span>, <span class="string">'f'</span>, <span class="string">'b'</span>, <span class="string">'c'</span>, <span class="string">'e'</span>, <span class="string">'A'</span>, <span class="string">'C'</span>, <span class="string">'B'</span> &#125;;</span><br><span class="line"><span class="keyword">char</span>[] f = &#123; <span class="string">'a'</span>, <span class="string">'f'</span>, <span class="string">'b'</span>, <span class="string">'c'</span>, <span class="string">'e'</span>, <span class="string">'A'</span>, <span class="string">'C'</span>, <span class="string">'B'</span> &#125;;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * å…ƒç´ æ•°é‡ç›¸åŒï¼Œå¹¶ä¸”ç›¸åŒä½ç½®çš„å…ƒç´ ç›¸åŒã€‚ å¦å¤–ï¼Œå¦‚æœä¸¤ä¸ªæ•°ç»„å¼•ç”¨éƒ½æ˜¯nullï¼Œåˆ™å®ƒä»¬è¢«è®¤ä¸ºæ˜¯ç›¸ç­‰çš„ ã€‚</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="comment">// è¾“å‡ºtrue</span></span><br><span class="line">System.out.println(<span class="string">"Arrays.equals(e, f):"</span> + Arrays.equals(e, f));</span><br></pre></td></tr></table></figure><p>å‚è€ƒï¼š<a href="https://gitee.com/SnailClimb/JavaGuide/blob/master/docs/java/Basis/Arrays,CollectionsCommonMethods.md#%E5%90%8C%E6%AD%A5%E6%8E%A7%E5%88%B6" target="_blank" rel="noopener">https://gitee.com/SnailClimb/JavaGuide/blob/master/docs/java/Basis/Arrays,CollectionsCommonMethods.md#%E5%90%8C%E6%AD%A5%E6%8E%A7%E5%88%B6</a></p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>AOP æ¥å£æ—¥å¿—</title>
      <link href="/2019/05/21/yuque/AOP%20%E6%8E%A5%E5%8F%A3%E6%97%A5%E5%BF%97/"/>
      <url>/2019/05/21/yuque/AOP%20%E6%8E%A5%E5%8F%A3%E6%97%A5%E5%BF%97/</url>
      
        <content type="html"><![CDATA[<h4 id="RestLogAspect"><a href="#RestLogAspect" class="headerlink" title="RestLogAspect"></a>RestLogAspect</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Aspect</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="meta">@Slf</span>4j</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">RestLogAspect</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> RestHighLevelClient restHighLevelClient;</span><br><span class="line">    <span class="keyword">private</span> StringRedisTemplate redisTemplate;</span><br><span class="line">    <span class="keyword">private</span> ThreadLocal&lt;RestLog&gt; threadLocal = <span class="keyword">new</span> ThreadLocal&lt;&gt;();</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Pointcut</span>(<span class="string">"within(@org.springframework.web.bind.annotation.RestController *)"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">springBeanPointcut</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Before</span>(<span class="string">"springBeanPointcut()"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">logBefore</span><span class="params">(JoinPoint joinPoint)</span> </span>&#123;</span><br><span class="line">        ServletRequestAttributes attributes = (ServletRequestAttributes) RequestContextHolder.getRequestAttributes();</span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">null</span> == attributes) &#123;</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        HttpServletRequest request = attributes.getRequest();</span><br><span class="line">        String paramData = <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">if</span> (!request.getRequestURI().contains(<span class="string">"/api/supervise/files"</span>)) &#123;</span><br><span class="line">            paramData = JSON.toJSONString(request.getParameterMap(), SerializerFeature.DisableCircularReferenceDetect, SerializerFeature.WriteMapNullValue);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// ä¿å­˜æ¥å£ä¿¡æ¯</span></span><br><span class="line">        threadLocal.set(<span class="keyword">new</span> RestLog(LoggerUtil.getCliectIp(request), request.getRequestURI(), LoggerUtil.getRequestType(request)</span><br><span class="line">                , request.getMethod(), joinPoint.getSignature().getDeclaringTypeName() + <span class="string">"."</span> + joinPoint.getSignature().getName()</span><br><span class="line">                , paramData, request.getRequestedSessionId()));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@AfterReturning</span>(value = <span class="string">"springBeanPointcut()"</span>, returning = <span class="string">"returnData"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">logAfter</span><span class="params">(Object returnData)</span> </span>&#123;</span><br><span class="line">        ServletRequestAttributes attributes = (ServletRequestAttributes) RequestContextHolder.getRequestAttributes();</span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">null</span> == attributes) &#123;</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        HttpServletResponse response = attributes.getResponse();</span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">null</span> == threadLocal.get() || <span class="keyword">null</span> == response) &#123;</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        RestLog restLog = threadLocal.get();</span><br><span class="line">        <span class="comment">// è¿‡æ»¤å›¾ç‰‡æ¥å£è¯·æ±‚</span></span><br><span class="line">        <span class="keyword">if</span> (!restLog.getUri().contains(<span class="string">"/api/supervise/files"</span>)) &#123;</span><br><span class="line">            restLog = threadLocal.get().init(JSON.toJSONString(returnData, SerializerFeature.DisableCircularReferenceDetect, SerializerFeature.WriteMapNullValue), response.getStatus());</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            restLog = threadLocal.get().init(response.getStatus());</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">this</span>.save(restLog);</span><br><span class="line">        <span class="comment">// å†™è¿› redis</span></span><br><span class="line">        <span class="keyword">this</span>.increment(<span class="keyword">this</span>.getApiKey(restLog.getUri(), restLog.getMethod()));</span><br><span class="line">        threadLocal.remove();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@AfterThrowing</span>(value = <span class="string">"springBeanPointcut()"</span>, throwing = <span class="string">"exception"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doAfterThrowingAdvice</span><span class="params">(Throwable exception)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">null</span> == threadLocal.get()) &#123;</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        RestLog restLog = threadLocal.get().exceptionMessage(exception.getMessage());</span><br><span class="line">        <span class="keyword">this</span>.save(restLog);</span><br><span class="line">        threadLocal.remove();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">save</span><span class="params">(RestLog restLog)</span> </span>&#123;</span><br><span class="line">        IndexRequest indexRequest = <span class="keyword">new</span> IndexRequest(<span class="string">"rest-supervise-"</span> + DateFormatUtils.format(<span class="keyword">new</span> Date(), <span class="string">"yyyy.MM.dd"</span>), <span class="string">"doc"</span>, UUIDBase64Util.generate());</span><br><span class="line">        indexRequest.source(JSON.toJSONString(restLog), XContentType.JSON);</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="keyword">this</span>.restHighLevelClient.index(indexRequest);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            log.error(<span class="string">"RestLogAspect.save IOException:&#123;&#125;"</span>, e.getMessage());</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">increment</span><span class="params">(String key)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.redisTemplate.opsForValue().increment(key, <span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> String <span class="title">getApiKey</span><span class="params">(String uri, String method)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.handleUri(uri) + <span class="string">"|"</span> + method.toLowerCase() + <span class="string">":"</span> + DateUtils.formatDate(<span class="keyword">new</span> Date(), <span class="string">"yyyyMMdd"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> String <span class="title">handleUri</span><span class="params">(String uri)</span> </span>&#123;</span><br><span class="line">        StringBuilder stringBuilder = <span class="keyword">new</span> StringBuilder();</span><br><span class="line">        <span class="keyword">for</span> (String s : uri.split(<span class="string">"/"</span>)) &#123;</span><br><span class="line">            stringBuilder.append(<span class="string">"/"</span>);</span><br><span class="line">            <span class="keyword">if</span> (s.matches(<span class="string">"\\d+"</span>) || <span class="number">22</span> == s.length()) &#123;</span><br><span class="line">                stringBuilder.append(<span class="string">"&#123;id&#125;"</span>);</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                stringBuilder.append(s);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> stringBuilder.toString().substring(<span class="number">2</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setRestHighLevelClient</span><span class="params">(RestHighLevelClient restHighLevelClient)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.restHighLevelClient = restHighLevelClient;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setRedisTemplate</span><span class="params">(StringRedisTemplate redisTemplate)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.redisTemplate = redisTemplate;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="RestStatisticService"><a href="#RestStatisticService" class="headerlink" title="RestStatisticService"></a>RestStatisticService</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">saveDaily</span><span class="params">()</span> </span>&#123;</span><br><span class="line">      Set&lt;String&gt; keys = <span class="keyword">this</span>.redisTemplate.keys(<span class="string">"api/*"</span>);</span><br><span class="line">      <span class="keyword">if</span> (<span class="keyword">null</span> == keys) &#123;</span><br><span class="line">          <span class="keyword">return</span>;</span><br><span class="line">      &#125;</span><br><span class="line">  <span class="comment">// å°†æ¥å£è°ƒç”¨ä¿¡æ¯ ä¿å­˜åˆ°Redis</span></span><br><span class="line">      keys.forEach(</span><br><span class="line">              s -&gt; &#123;</span><br><span class="line">                  <span class="keyword">this</span>.restStatisticMapper.insert(<span class="keyword">new</span> RestStatistic(s, <span class="keyword">this</span>.redisTemplate.opsForValue().get(s)));</span><br><span class="line">                  <span class="keyword">this</span>.redisTemplate.delete(s);</span><br><span class="line">              &#125;</span><br><span class="line">      );</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>é‡å¯ jar è„šæœ¬</title>
      <link href="/2019/05/20/yuque/%E9%87%8D%E5%90%AF%20jar%20%E8%84%9A%E6%9C%AC/"/>
      <url>/2019/05/20/yuque/%E9%87%8D%E5%90%AF%20jar%20%E8%84%9A%E6%9C%AC/</url>
      
        <content type="html"><![CDATA[<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span>!/bin/bash</span><br><span class="line"><span class="meta">#</span>description: é‡å¯æˆ‘çš„java æœåŠ¡</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span> æ€æ­»æŒ‡å®š javaè¿›ç¨‹</span><br><span class="line">ps -ef|grep java| grep 'shop'|grep -v grep|cut -c 9-15|xargs kill -9 &gt;/dev/null 2&gt;&amp;1</span><br><span class="line">ps -ef|grep java| grep 'supervise'|grep -v grep|cut -c 9-15|xargs kill -9 &gt;/dev/null 2&gt;&amp;1</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span> é‡å¯æ–°çš„jar</span><br><span class="line">nohup java -jar shop-0.0.1-SNAPSHOT.jar &gt;&gt; shop.out &amp;</span><br><span class="line">echo "restart shop"</span><br><span class="line"></span><br><span class="line">nohup java -jar supervise-0.0.1-SNAPSHOT.jar &gt;&gt; supervise.out &amp;</span><br><span class="line">echo "restart supervise"</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>Shiro Filter è‡ªå®šä¹‰å¼‚å¸¸</title>
      <link href="/2019/05/16/yuque/Shiro%20Filter%20%E8%87%AA%E5%AE%9A%E4%B9%89%E5%BC%82%E5%B8%B8/"/>
      <url>/2019/05/16/yuque/Shiro%20Filter%20%E8%87%AA%E5%AE%9A%E4%B9%89%E5%BC%82%E5%B8%B8/</url>
      
        <content type="html"><![CDATA[<p>é€šå¸¸çš„ Spring å…¨å±€å¼‚å¸¸å¤„ç†å¹¶ä¸èƒ½å¤„ç† Filter ä¸­çš„å¼‚å¸¸ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">verifyUri</span><span class="params">(ServletRequest request, ServletResponse response)</span><span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">  request.getRequestDispatcher(AuthoritiesConstants.SHIRO_ERROR_EXCEPTION)</span><br><span class="line">    .forward(request, response);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åˆ›å»ºä¸€ä¸ªæ§åˆ¶å™¨ï¼Œå°†è¿‡æ»¤å™¨çš„è¯·æ±‚è½¬å‘åˆ°æ§åˆ¶å™¨æŠ›å‡ºã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"/error"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ErrorController</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping</span>(<span class="string">"/shiro"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">shiroError</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> ApiException(ApiException.E_SHIRO_ACCESS_EXCEPTION);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>Redis å¦‚ä½•æ‰èƒ½åšåˆ°é«˜å¯ç”¨</title>
      <link href="/2019/04/29/yuque/Redis%20%E5%A6%82%E4%BD%95%E6%89%8D%E8%83%BD%E5%81%9A%E5%88%B0%E9%AB%98%E5%8F%AF%E7%94%A8/"/>
      <url>/2019/04/29/yuque/Redis%20%E5%A6%82%E4%BD%95%E6%89%8D%E8%83%BD%E5%81%9A%E5%88%B0%E9%AB%98%E5%8F%AF%E7%94%A8/</url>
      
        <content type="html"><![CDATA[<p>ä¸€ä¸ª slave æŒ‚æ‰äº†ï¼Œæ˜¯ä¸ä¼šå½±å“å¯ç”¨æ€§çš„ï¼Œè¿˜æœ‰å…¶å®ƒçš„ slave åœ¨æä¾›ç›¸åŒæ•°æ®ä¸‹çš„ç›¸åŒçš„å¯¹å¤–çš„æŸ¥è¯¢æœåŠ¡ã€‚<br>ä½†æ˜¯ï¼Œå¦‚æœ master node æ­»æ‰äº†ï¼Œä¼šæ€ä¹ˆæ ·ï¼Ÿæ²¡æ³•å†™æ•°æ®äº†ï¼Œå†™ç¼“å­˜çš„æ—¶å€™ï¼Œå…¨éƒ¨å¤±æ•ˆäº†ã€‚slave node è¿˜æœ‰ä»€ä¹ˆç”¨å‘¢ï¼Œæ²¡æœ‰ master ç»™å®ƒä»¬å¤åˆ¶æ•°æ®äº†ï¼Œç³»ç»Ÿç›¸å½“äºä¸å¯ç”¨äº†ã€‚</p><p>redis çš„é«˜å¯ç”¨æ¶æ„ï¼Œå«åš  failover <strong>æ•…éšœè½¬ç§»</strong>ï¼Œä¹Ÿå¯ä»¥å«åšä¸»å¤‡åˆ‡æ¢ã€‚<br>master node åœ¨æ•…éšœæ—¶ï¼Œè‡ªåŠ¨æ£€æµ‹ï¼Œå¹¶ä¸”å°†æŸä¸ª slave node è‡ªåŠ¨åˆ‡æ¢ä¸º master node çš„è¿‡ç¨‹ï¼Œå«åšä¸»å¤‡åˆ‡æ¢ã€‚è¿™ä¸ªè¿‡ç¨‹ï¼Œå®ç°äº† redis çš„ä¸»ä»æ¶æ„ä¸‹çš„é«˜å¯ç”¨ã€‚</p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>MQ ä¿è¯æ¶ˆæ¯æ¶ˆè´¹çš„å¹‚ç­‰æ€§</title>
      <link href="/2019/04/13/yuque/MQ%20%E4%BF%9D%E8%AF%81%E6%B6%88%E6%81%AF%E6%B6%88%E8%B4%B9%E7%9A%84%E5%B9%82%E7%AD%89%E6%80%A7/"/>
      <url>/2019/04/13/yuque/MQ%20%E4%BF%9D%E8%AF%81%E6%B6%88%E6%81%AF%E6%B6%88%E8%B4%B9%E7%9A%84%E5%B9%82%E7%AD%89%E6%80%A7/</url>
      
        <content type="html"><![CDATA[<h3 id="äºŒæ¬¡æ¶ˆè´¹"><a href="#äºŒæ¬¡æ¶ˆè´¹" class="headerlink" title="äºŒæ¬¡æ¶ˆè´¹"></a>äºŒæ¬¡æ¶ˆè´¹</h3><p>åœºæ™¯ï¼š<br>å‡è®¾ä½ è¿™æ¡æ¶ˆæ¯å·²ç»æ¶ˆè´¹è¿‡äº†ï¼Œç„¶åä½ é‡å¯äº†æœåŠ¡ï¼Œæ¶ˆè´¹è¿‡çš„æ¶ˆæ¯æ²¡æœ‰åŒæ­¥åˆ° MQï¼Œäº§ç”Ÿäº†äºŒæ¬¡æ¶ˆè´¹ã€‚</p><p>æ€è·¯ï¼š</p><ul><li>æ¯”å¦‚ä½ æ‹¿ä¸ªæ•°æ®è¦å†™åº“ï¼Œä½ å…ˆæ ¹æ®ä¸»é”®æŸ¥ä¸€ä¸‹ï¼Œå¦‚æœè¿™æ•°æ®éƒ½æœ‰äº†ï¼Œä½ å°±åˆ«æ’å…¥äº†ï¼Œupdate ä¸€ä¸‹å¥½å§ã€‚</li><li>æ¯”å¦‚ä½ æ˜¯å†™ Redisï¼Œé‚£æ²¡é—®é¢˜äº†ï¼Œåæ­£æ¯æ¬¡éƒ½æ˜¯ setï¼Œå¤©ç„¶å¹‚ç­‰æ€§ã€‚</li><li>æ¯”å¦‚ä½ ä¸æ˜¯ä¸Šé¢ä¸¤ä¸ªåœºæ™¯ï¼Œé‚£åšçš„ç¨å¾®å¤æ‚ä¸€ç‚¹ï¼Œä½ éœ€è¦è®©ç”Ÿäº§è€…å‘é€æ¯æ¡æ•°æ®çš„æ—¶å€™ï¼Œé‡Œé¢åŠ ä¸€ä¸ªå…¨å±€å”¯ä¸€çš„ idï¼Œç±»ä¼¼è®¢å• id ä¹‹ç±»çš„ä¸œè¥¿ï¼Œç„¶åä½ è¿™é‡Œæ¶ˆè´¹åˆ°äº†ä¹‹åï¼Œå…ˆæ ¹æ®è¿™ä¸ª id å»æ¯”å¦‚ Redis é‡ŒæŸ¥ä¸€ä¸‹ï¼Œä¹‹å‰æ¶ˆè´¹è¿‡å—ï¼Ÿå¦‚æœæ²¡æœ‰æ¶ˆè´¹è¿‡ï¼Œä½ å°±å¤„ç†ï¼Œç„¶åè¿™ä¸ª id å†™ Redisã€‚å¦‚æœæ¶ˆè´¹è¿‡äº†ï¼Œé‚£ä½ å°±åˆ«å¤„ç†äº†ï¼Œä¿è¯åˆ«é‡å¤å¤„ç†ç›¸åŒçš„æ¶ˆæ¯å³å¯ã€‚</li><li>æ¯”å¦‚åŸºäºæ•°æ®åº“çš„å”¯ä¸€é”®æ¥ä¿è¯é‡å¤æ•°æ®ä¸ä¼šé‡å¤æ’å…¥å¤šæ¡ã€‚å› ä¸ºæœ‰å”¯ä¸€é”®çº¦æŸäº†ï¼Œé‡å¤æ•°æ®æ’å…¥åªä¼šæŠ¥é”™ï¼Œä¸ä¼šå¯¼è‡´æ•°æ®åº“ä¸­å‡ºç°è„æ•°æ®ã€‚</li></ul><p>çœŸå®é¡¹ç›®åœºæ™¯ä¸­ï¼Œç¬¬ä¸€æ¡å’Œæœ€åä¸€æ¡éƒ½æœ‰ç”¨åˆ°ã€‚<br>åœ¨è¿™è¾¹æˆ‘è¦æä¸€ä¸ªæ–°çš„åœºæ™¯ï¼šæ‰¹é‡å…¥åº“æ•ˆç‡æ¯”è¾ƒé‡è¦çš„æƒ…å†µä¸‹ï¼Œå¦‚ä½•ä¿è¯å‘¢ï¼Ÿ<br>è¿™é‡Œæä¾›ä¸€ä¸ªæ€è·¯ï¼Œå°†å”¯ä¸€ id å†™å…¥ Redisï¼Œç„¶ååœ¨æ‰¹é‡æ“ä½œä¹‹å‰æ ¹æ® Redis ä¸­çš„ id è¿‡æ»¤ä¸€ä¸‹å†™åº“çš„æ•°æ®ï¼Œå¦å¤–æ•°æ®åº“åŠ ä¸Šå”¯ä¸€ä¸»é”®çº¦æŸã€‚</p><h3 id="ä¸¢æ•°æ®"><a href="#ä¸¢æ•°æ®" class="headerlink" title="ä¸¢æ•°æ®"></a>ä¸¢æ•°æ®</h3><h4 id="æ¶ˆè´¹ç«¯"><a href="#æ¶ˆè´¹ç«¯" class="headerlink" title="æ¶ˆè´¹ç«¯"></a>æ¶ˆè´¹ç«¯</h4><p><strong>Kerry é¡¹ç›®ä¸­å­˜åœ¨ä¸€ä¸ªé—®é¢˜  </strong><br>Kafka æ¶ˆè´¹è€…æ¶ˆè´¹åˆ°äº†æ•°æ®ä¹‹åæ˜¯å†™åˆ°ä¸€ä¸ªå†…å­˜çš„ queue é‡Œå…ˆç¼“å†²ä¸€ä¸‹ï¼Œç»“æœæœ‰çš„æ—¶å€™ï¼Œä½ åˆšæŠŠæ¶ˆæ¯å†™å…¥å†…å­˜ queueï¼Œç„¶åæ¶ˆè´¹è€…ä¼šè‡ªåŠ¨æäº¤ offsetã€‚ç„¶åæ­¤æ—¶æˆ‘ä»¬é‡å¯äº†ç³»ç»Ÿï¼Œå°±ä¼šå¯¼è‡´å†…å­˜ queue é‡Œè¿˜æ²¡æ¥å¾—åŠå¤„ç†çš„æ•°æ®å°±ä¸¢å¤±äº†ã€‚<br>ä¸Šé¢è¿™ä¸ªåœºæ™¯æ¯”è¾ƒæç«¯ï¼Œè§£å†³æ–¹æ¡ˆæ˜¯<strong>å…³é—­è‡ªåŠ¨æäº¤ offset</strong>ï¼Œåœ¨å¤„ç†å®Œä¹‹åæ‰‹åŠ¨å»æäº¤ offsetã€‚</p><h4 id="Kafka"><a href="#Kafka" class="headerlink" title="Kafka"></a>Kafka</h4><p>Kafka æŸä¸ª broker å®•æœºï¼Œç„¶åé‡æ–°é€‰ä¸¾ partition çš„ leaderã€‚æ­¤æ—¶å…¶ä»–çš„ follower åˆšå¥½è¿˜æœ‰äº›æ•°æ®æ²¡æœ‰åŒæ­¥ï¼Œç»“æœæ­¤æ—¶ leader æŒ‚äº†ï¼Œç„¶åé€‰ä¸¾æŸä¸ª follower æˆ leader ä¹‹åï¼Œä¸å°±å°‘äº†ä¸€äº›æ•°æ®ï¼Ÿ</p><p>æ­¤æ—¶ä¸€èˆ¬æ˜¯è¦æ±‚èµ·ç è®¾ç½®å¦‚ä¸‹ 4 ä¸ªå‚æ•°ï¼š</p><ul><li>ç»™ topic è®¾ç½®  <code>replication.factor</code>  å‚æ•°ï¼šè¿™ä¸ªå€¼å¿…é¡»å¤§äº 1ï¼Œè¦æ±‚æ¯ä¸ª partition å¿…é¡»æœ‰è‡³å°‘ 2 ä¸ªå‰¯æœ¬ã€‚</li><li>åœ¨ Kafka æœåŠ¡ç«¯è®¾ç½®  <code>min.insync.replicas</code>  å‚æ•°ï¼šè¿™ä¸ªå€¼å¿…é¡»å¤§äº 1ï¼Œè¿™ä¸ªæ˜¯è¦æ±‚ä¸€ä¸ª leader è‡³å°‘æ„ŸçŸ¥åˆ°æœ‰è‡³å°‘ä¸€ä¸ª follower è¿˜è·Ÿè‡ªå·±ä¿æŒè”ç³»ï¼Œæ²¡æ‰é˜Ÿï¼Œè¿™æ ·æ‰èƒ½ç¡®ä¿ leader æŒ‚äº†è¿˜æœ‰ä¸€ä¸ª follower å§ã€‚</li><li>åœ¨ producer ç«¯è®¾ç½®  <code>acks=all</code>ï¼šè¿™ä¸ªæ˜¯è¦æ±‚æ¯æ¡æ•°æ®ï¼Œå¿…é¡»æ˜¯<strong>å†™å…¥æ‰€æœ‰ replica ä¹‹åï¼Œæ‰èƒ½è®¤ä¸ºæ˜¯å†™æˆåŠŸäº†</strong>ã€‚</li><li>åœ¨ producer ç«¯è®¾ç½®  <code>retries=MAX</code>ï¼ˆå¾ˆå¤§å¾ˆå¤§å¾ˆå¤§çš„ä¸€ä¸ªå€¼ï¼Œæ— é™æ¬¡é‡è¯•çš„æ„æ€ï¼‰ï¼šè¿™ä¸ªæ˜¯<strong>è¦æ±‚ä¸€æ—¦å†™å…¥å¤±è´¥ï¼Œå°±æ— é™é‡è¯•</strong>ï¼Œå¡åœ¨è¿™é‡Œäº†ã€‚</li></ul>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>Rabbit MQ å’Œ Kafka å¦‚ä½•ä¿è¯é«˜å¯ç”¨ï¼Ÿ</title>
      <link href="/2019/04/13/yuque/Rabbit%20MQ%20%E5%92%8C%20Kafka%20%E5%A6%82%E4%BD%95%E4%BF%9D%E8%AF%81%E9%AB%98%E5%8F%AF%E7%94%A8%EF%BC%9F/"/>
      <url>/2019/04/13/yuque/Rabbit%20MQ%20%E5%92%8C%20Kafka%20%E5%A6%82%E4%BD%95%E4%BF%9D%E8%AF%81%E9%AB%98%E5%8F%AF%E7%94%A8%EF%BC%9F/</url>
      
        <content type="html"><![CDATA[<h3 id="Rabbit-MQ-3-ç§æ¨¡å¼"><a href="#Rabbit-MQ-3-ç§æ¨¡å¼" class="headerlink" title="Rabbit MQ 3 ç§æ¨¡å¼"></a>Rabbit MQ 3 ç§æ¨¡å¼</h3><h4 id="å•æœºæ¨¡å¼"><a href="#å•æœºæ¨¡å¼" class="headerlink" title="å•æœºæ¨¡å¼"></a>å•æœºæ¨¡å¼</h4><p>Demo çº§åˆ«</p><h4 id="æ™®é€šé›†ç¾¤æ¨¡å¼ï¼ˆæ— é«˜å¯ç”¨æ€§ï¼‰"><a href="#æ™®é€šé›†ç¾¤æ¨¡å¼ï¼ˆæ— é«˜å¯ç”¨æ€§ï¼‰" class="headerlink" title="æ™®é€šé›†ç¾¤æ¨¡å¼ï¼ˆæ— é«˜å¯ç”¨æ€§ï¼‰"></a>æ™®é€šé›†ç¾¤æ¨¡å¼ï¼ˆæ— é«˜å¯ç”¨æ€§ï¼‰</h4><p>æ™®é€šé›†ç¾¤æ¨¡å¼ï¼Œæ„æ€å°±æ˜¯åœ¨å¤šå°æœºå™¨ä¸Šå¯åŠ¨å¤šä¸ª RabbitMQ å®ä¾‹ï¼Œæ¯ä¸ªæœºå™¨å¯åŠ¨ä¸€ä¸ªã€‚<br><strong>è¿™æ–¹æ¡ˆä¸»è¦æ˜¯æé«˜ååé‡çš„</strong>ï¼Œå°±æ˜¯è¯´è®©é›†ç¾¤ä¸­å¤šä¸ªèŠ‚ç‚¹æ¥æœåŠ¡æŸä¸ªå…ƒæ•°æ®çš„è¯»å†™æ“ä½œã€‚</p><p><img src="https://cdn.nlark.com/yuque/0/2019/png/113243/1555155728234-a8334527-88ab-431a-ab9e-3422fd8ce7ab.png#align=left&amp;display=inline&amp;height=385&amp;name=image.png&amp;originHeight=567&amp;originWidth=883&amp;size=51726&amp;status=done&amp;width=601" alt="image.png"></p><h4 id="é•œåƒé›†ç¾¤æ¨¡å¼ï¼ˆé«˜å¯ç”¨æ€§ï¼‰"><a href="#é•œåƒé›†ç¾¤æ¨¡å¼ï¼ˆé«˜å¯ç”¨æ€§ï¼‰" class="headerlink" title="é•œåƒé›†ç¾¤æ¨¡å¼ï¼ˆé«˜å¯ç”¨æ€§ï¼‰"></a>é•œåƒé›†ç¾¤æ¨¡å¼ï¼ˆé«˜å¯ç”¨æ€§ï¼‰</h4><p>è¿™ç§æ¨¡å¼ï¼Œæ‰æ˜¯æ‰€è°“çš„ RabbitMQ çš„é«˜å¯ç”¨æ¨¡å¼ã€‚è·Ÿæ™®é€šé›†ç¾¤æ¨¡å¼ä¸ä¸€æ ·çš„æ˜¯ï¼Œåœ¨é•œåƒé›†ç¾¤æ¨¡å¼ä¸‹ï¼Œä½ åˆ›å»ºçš„ queueï¼Œæ— è®ºå…ƒæ•°æ®è¿˜æ˜¯ queue é‡Œçš„æ¶ˆæ¯éƒ½ä¼š<strong>å­˜åœ¨äºå¤šä¸ªå®ä¾‹ä¸Š</strong>ï¼Œå°±æ˜¯è¯´ï¼Œæ¯ä¸ª RabbitMQ èŠ‚ç‚¹éƒ½æœ‰è¿™ä¸ª queue çš„ä¸€ä¸ªå®Œæ•´é•œåƒï¼ŒåŒ…å« queue çš„å…¨éƒ¨æ•°æ®çš„æ„æ€ã€‚ç„¶åæ¯æ¬¡ä½ å†™æ¶ˆæ¯åˆ° queue çš„æ—¶å€™ï¼Œéƒ½ä¼š<strong>è‡ªåŠ¨æŠŠæ¶ˆæ¯åŒæ­¥åˆ°å¤šä¸ªå®ä¾‹çš„ queue ä¸Š</strong>ã€‚<br><img src="https://cdn.nlark.com/yuque/0/2019/png/113243/1555155629703-abe738be-aacf-40d0-a41a-87f3e1fca4f6.png#align=left&amp;display=inline&amp;height=355&amp;name=image.png&amp;originHeight=470&amp;originWidth=630&amp;size=24344&amp;status=done&amp;width=476" alt="image.png"></p><h3 id="Kafka-çš„é«˜å¯ç”¨æ€§"><a href="#Kafka-çš„é«˜å¯ç”¨æ€§" class="headerlink" title="Kafka çš„é«˜å¯ç”¨æ€§"></a>Kafka çš„é«˜å¯ç”¨æ€§</h3><p>Kafka ä¸€ä¸ªæœ€åŸºæœ¬çš„æ¶æ„è®¤è¯†ï¼šç”±å¤šä¸ª broker ç»„æˆï¼Œæ¯ä¸ª broker æ˜¯ä¸€ä¸ªèŠ‚ç‚¹ï¼›ä½ åˆ›å»ºä¸€ä¸ª topicï¼Œè¿™ä¸ª topic å¯ä»¥åˆ’åˆ†ä¸ºå¤šä¸ª partitionï¼Œæ¯ä¸ª partition å¯ä»¥å­˜åœ¨äºä¸åŒçš„ broker ä¸Šï¼Œæ¯ä¸ª partition å°±æ”¾ä¸€éƒ¨åˆ†æ•°æ®ã€‚<br>æˆ‘ä»¬å‡è®¾åˆ›å»ºäº†ä¸€ä¸ª topicï¼ŒæŒ‡å®šå…¶ partition æ•°é‡æ˜¯ 3 ä¸ªï¼Œåˆ†åˆ«åœ¨ä¸‰å°æœºå™¨ä¸Šã€‚ä½†æ˜¯ï¼Œå¦‚æœç¬¬äºŒå°æœºå™¨å®•æœºäº†ï¼Œä¼šå¯¼è‡´è¿™ä¸ª topic çš„ 1/3 çš„æ•°æ®å°±ä¸¢äº†ï¼Œå› æ­¤è¿™ä¸ªæ˜¯åšä¸åˆ°é«˜å¯ç”¨çš„ã€‚</p><p><img src="https://cdn.nlark.com/yuque/0/2019/png/113243/1555156249389-18f7cdbd-1c43-4910-8229-43e1d47dedc8.png#align=left&amp;display=inline&amp;height=236&amp;name=image.png&amp;originHeight=331&amp;originWidth=712&amp;size=16230&amp;status=done&amp;width=507" alt="image.png"><br>Kafka 0.8 ä»¥åï¼Œæä¾›äº†<strong> HA æœºåˆ¶</strong>ï¼Œå°±æ˜¯ replicaï¼ˆå¤åˆ¶å“ï¼‰ å‰¯æœ¬æœºåˆ¶ã€‚æ¯ä¸ª partition çš„æ•°æ®éƒ½ä¼šåŒæ­¥åˆ°å…¶å®ƒæœºå™¨ä¸Šï¼Œå½¢æˆè‡ªå·±çš„å¤šä¸ª replica å‰¯æœ¬ã€‚æ‰€æœ‰ replica ä¼šé€‰ä¸¾ä¸€ä¸ª leader å‡ºæ¥ï¼Œé‚£ä¹ˆç”Ÿäº§å’Œæ¶ˆè´¹éƒ½è·Ÿè¿™ä¸ª leader æ‰“äº¤é“ï¼Œç„¶åå…¶ä»– replica å°±æ˜¯ followerã€‚å†™çš„æ—¶å€™ï¼Œleader ä¼šè´Ÿè´£æŠŠæ•°æ®åŒæ­¥åˆ°æ‰€æœ‰ follower ä¸Šå»ï¼Œè¯»çš„æ—¶å€™å°±ç›´æ¥è¯» leader ä¸Šçš„æ•°æ®å³å¯ã€‚</p><p><img src="https://cdn.nlark.com/yuque/0/2019/png/113243/1555156541938-6329ff78-6d5c-4df1-b8b4-2c52d1cb1ae1.png#align=left&amp;display=inline&amp;height=466&amp;name=image.png&amp;originHeight=578&amp;originWidth=721&amp;size=44726&amp;status=done&amp;width=582" alt="image.png"><br>å¦‚æœæŸä¸ª broker å®•æœºäº†ï¼Œæ²¡äº‹å„¿ï¼Œé‚£ä¸ª broker ä¸Šé¢çš„ partition åœ¨å…¶ä»–æœºå™¨ä¸Šéƒ½æœ‰å‰¯æœ¬çš„ï¼Œå¦‚æœè¿™ä¸Šé¢æœ‰æŸä¸ª partition çš„ leaderï¼Œé‚£ä¹ˆæ­¤æ—¶ä¼šä» follower ä¸­<strong>é‡æ–°é€‰ä¸¾</strong>ä¸€ä¸ªæ–°çš„ leader å‡ºæ¥ï¼Œå¤§å®¶ç»§ç»­è¯»å†™é‚£ä¸ªæ–°çš„ leader å³å¯ã€‚</p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>Rabbit MQ å’Œ Erlang ç‰ˆæœ¬ä¸åŒ¹é…</title>
      <link href="/2019/04/13/yuque/Rabbit%20MQ%20%E5%92%8C%20Erlang%20%E7%89%88%E6%9C%AC%E4%B8%8D%E5%8C%B9%E9%85%8D/"/>
      <url>/2019/04/13/yuque/Rabbit%20MQ%20%E5%92%8C%20Erlang%20%E7%89%88%E6%9C%AC%E4%B8%8D%E5%8C%B9%E9%85%8D/</url>
      
        <content type="html"><![CDATA[<p><a href="http://www.erlang.org/downloads" target="_blank" rel="noopener">å®‰è£… Erlang</a><br><a href="http://www.rabbitmq.com/download.html" target="_blank" rel="noopener">å®‰è£… RabbitMQ</a><br><strong>å®‰è£…çš„æ—¶å€™ç‰ˆæœ¬éœ€è¦åŒ¹é…</strong>  <a href="http://www.rabbitmq.com/which-erlang.html" target="_blank" rel="noopener">ä¼ é€é—¨</a><br>ä¹‹å‰å› ä¸ºç‰ˆæœ¬ä¸åŒ¹é…çš„é—®é¢˜ï¼Œæç¯å¢ƒæäº†ä¸€ä¸Šåˆã€‚</p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>Python å¼‚å¸¸æ•æ‰</title>
      <link href="/2019/04/08/yuque/Python%20%E5%BC%82%E5%B8%B8%E6%8D%95%E6%8D%89/"/>
      <url>/2019/04/08/yuque/Python%20%E5%BC%82%E5%B8%B8%E6%8D%95%E6%8D%89/</url>
      
        <content type="html"><![CDATA[<p>æ‰“å°å‡ºå¼‚å¸¸</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span>:</span><br><span class="line">function()</span><br><span class="line"><span class="keyword">except</span> Exception <span class="keyword">as</span> msg:</span><br><span class="line">    print(msg)</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>Liqiubase å·²æœ‰è¡¨æ·»åŠ å­—æ®µ</title>
      <link href="/2019/03/08/yuque/Liqiubase%20%E5%B7%B2%E6%9C%89%E8%A1%A8%E6%B7%BB%E5%8A%A0%E5%AD%97%E6%AE%B5/"/>
      <url>/2019/03/08/yuque/Liqiubase%20%E5%B7%B2%E6%9C%89%E8%A1%A8%E6%B7%BB%E5%8A%A0%E5%AD%97%E6%AE%B5/</url>
      
        <content type="html"><![CDATA[<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">changeSet</span> <span class="attr">id</span>=<span class="string">"20181214081250-1"</span> <span class="attr">author</span>=<span class="string">"jhipster"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">addColumn</span> <span class="attr">tableName</span>=<span class="string">"jhi_rx"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">column</span> <span class="attr">name</span>=<span class="string">"place"</span> <span class="attr">type</span>=<span class="string">"varchar(255)"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">constraints</span> <span class="attr">nullable</span>=<span class="string">"true"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">column</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">column</span> <span class="attr">name</span>=<span class="string">"mobile_phone"</span> <span class="attr">type</span>=<span class="string">"varchar(255)"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">constraints</span> <span class="attr">nullable</span>=<span class="string">"true"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">column</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">addColumn</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">addColumn</span> <span class="attr">tableName</span>=<span class="string">"drug"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">column</span> <span class="attr">name</span>=<span class="string">"brand"</span> <span class="attr">type</span>=<span class="string">"varchar(255)"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">constraints</span> <span class="attr">nullable</span>=<span class="string">"true"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">column</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">addColumn</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">addColumn</span> <span class="attr">tableName</span>=<span class="string">"hospital"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">column</span> <span class="attr">name</span>=<span class="string">"qy_code"</span> <span class="attr">type</span>=<span class="string">"varchar(255)"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">constraints</span> <span class="attr">nullable</span>=<span class="string">"true"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">column</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">addColumn</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">changeSet</span>&gt;</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>Csrf è¿‡æ»¤</title>
      <link href="/2019/03/04/yuque/Csrf%20%E8%BF%87%E6%BB%A4/"/>
      <url>/2019/03/04/yuque/Csrf%20%E8%BF%87%E6%BB%A4/</url>
      
        <content type="html"><![CDATA[<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.netmatch.drug.admin.shiro;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.google.common.collect.Maps;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Component;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.servlet.support.RequestDataValueProcessor;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> java.util.Map;</span><br><span class="line"><span class="keyword">import</span> java.util.regex.Pattern;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Component</span>(<span class="string">"requestDataValueProcessor"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CsrfRequestDataValueProcessor</span> <span class="keyword">implements</span> <span class="title">RequestDataValueProcessor</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> Pattern DISABLE_CSRF_TOKEN_PATTERN = Pattern.compile(<span class="string">"(?i)^(GET|HEAD|TRACE|OPTIONS)$"</span>);</span><br><span class="line">    <span class="keyword">private</span> String DISABLE_CSRF_TOKEN_ATTR = <span class="string">"DISABLE_CSRF_TOKEN_ATTR"</span>;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">processAction</span><span class="params">(HttpServletRequest request, String action, String method)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (method != <span class="keyword">null</span> &amp;&amp; <span class="keyword">this</span>.DISABLE_CSRF_TOKEN_PATTERN.matcher(method).matches()) &#123;</span><br><span class="line">            request.setAttribute(<span class="keyword">this</span>.DISABLE_CSRF_TOKEN_ATTR, Boolean.TRUE);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            request.removeAttribute(<span class="keyword">this</span>.DISABLE_CSRF_TOKEN_ATTR);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> action;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">processFormFieldValue</span><span class="params">(HttpServletRequest request, String name, String value, String type)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// åŸæ ·è¿”å›value</span></span><br><span class="line">        <span class="keyword">return</span> value;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Map&lt;String, String&gt; <span class="title">getExtraHiddenFields</span><span class="params">(HttpServletRequest request)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// æ­¤å¤„æ˜¯å½“ä½¿ç”¨springçš„taglibæ ‡ç­¾&lt;form:form&gt;åˆ›å»ºè¡¨å•æ—¶å€™ï¼Œå¢åŠ çš„éšè—åŸŸå‚æ•°</span></span><br><span class="line">        Map&lt;String, String&gt; hiddenFields = Maps.newHashMap();</span><br><span class="line">        hiddenFields.put(CsrfTokenManager.CSRF_PARAM_NAME,</span><br><span class="line">            CsrfTokenManager.createTokenForSession(request.getSession()));</span><br><span class="line">        <span class="keyword">return</span> hiddenFields;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">processUrl</span><span class="params">(HttpServletRequest request, String url)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// åŸæ ·è¿”å›url</span></span><br><span class="line">        <span class="keyword">return</span> url;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å›¾ç‰‡ä¸Šä¼ æ¥å£ä¸è¿‡æ»¤</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.netmatch.drug.admin.shiro;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.google.common.collect.Lists;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.SecurityUtils;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.subject.Subject;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.web.filter.authc.UserFilter;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.web.servlet.ShiroHttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Component;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletResponse;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CsrfTokenFilter</span> <span class="keyword">extends</span> <span class="title">UserFilter</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> String HEADER_POST = <span class="string">"POST"</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> List&lt;String&gt; IGNORE_URL = Lists.newArrayList(<span class="string">"/files/image"</span>);</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">boolean</span> <span class="title">isAccessAllowed</span><span class="params">(ServletRequest request, ServletResponse response, Object mappedValue)</span> </span>&#123;</span><br><span class="line">        HttpServletRequest httpRequest = (HttpServletRequest) request;</span><br><span class="line">        <span class="keyword">if</span> (!HEADER_POST.equals(((HttpServletRequest) request).getMethod())) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(IGNORE_URL.contains(((ShiroHttpServletRequest) request).getRequestURI()))&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        String csrfToken = CsrfTokenManager.getTokenFromRequest(request);</span><br><span class="line">        <span class="keyword">if</span> (csrfToken == <span class="keyword">null</span> || !csrfToken.equals(httpRequest.getSession().getAttribute(</span><br><span class="line">            CsrfTokenManager.CSRF_TOKEN_FOR_SESSION_ATTR_NAME))) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        httpRequest.getSession().removeAttribute(CsrfTokenManager.CSRF_TOKEN_FOR_SESSION_ATTR_NAME);</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">boolean</span> <span class="title">onAccessDenied</span><span class="params">(ServletRequest request, ServletResponse response)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        Subject currentUser = SecurityUtils.getSubject();</span><br><span class="line">        <span class="keyword">if</span> (currentUser != <span class="keyword">null</span>) &#123;</span><br><span class="line">            currentUser.logout();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">this</span>.redirectToLogin(request, response);</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.netmatch.drug.admin.shiro;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpSession;</span><br><span class="line"><span class="keyword">import</span> java.util.UUID;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CsrfTokenManager</span> </span>&#123;</span><br><span class="line">    <span class="comment">// éšè—åŸŸå‚æ•°åç§°</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> String CSRF_PARAM_NAME = <span class="string">"csrfToken"</span>;</span><br><span class="line">    <span class="comment">// sessionä¸­csrfTokenå‚æ•°åç§°</span></span><br><span class="line">    public static final String CSRF_TOKEN_FOR_SESSION_ATTR_NAME = CsrfTokenManager.class.getName() + ".tokenval";</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="title">CsrfTokenManager</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// åœ¨sessionä¸­åˆ›å»ºcsrfToken</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> String <span class="title">createTokenForSession</span><span class="params">(HttpSession session)</span> </span>&#123;</span><br><span class="line">        String token = <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">synchronized</span> (session) &#123;</span><br><span class="line">            token = (String) session</span><br><span class="line">                .getAttribute(CSRF_TOKEN_FOR_SESSION_ATTR_NAME);</span><br><span class="line">            <span class="keyword">if</span> (<span class="keyword">null</span> == token) &#123;</span><br><span class="line">                token = UUID.randomUUID().toString();</span><br><span class="line">                session.setAttribute(CSRF_TOKEN_FOR_SESSION_ATTR_NAME, token);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> token;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> String <span class="title">getTokenFromRequest</span><span class="params">(ServletRequest request)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> request.getParameter(CSRF_PARAM_NAME);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>B+æ ‘</title>
      <link href="/2019/02/28/yuque/B+%E6%A0%91/"/>
      <url>/2019/02/28/yuque/B+%E6%A0%91/</url>
      
        <content type="html"><![CDATA[<p>MySQL ç´¢å¼•åº•å±‚å®ç°ã€‚</p><h4 id="ç´¢å¼•"><a href="#ç´¢å¼•" class="headerlink" title="ç´¢å¼•"></a>ç´¢å¼•</h4><p><strong>ç›®çš„</strong>ï¼šæé«˜æŸ¥è¯¢æ•ˆç‡</p><p><strong>åŸç†</strong>ï¼šé€šè¿‡ä¸æ–­çš„ç¼©å°æƒ³è¦è·å¾—æ•°æ®çš„èŒƒå›´æ¥ç­›é€‰å‡ºæœ€ç»ˆæƒ³è¦çš„ç»“æœï¼ŒåŒæ—¶æŠŠéšæœºçš„äº‹ä»¶å˜æˆé¡ºåºçš„äº‹ä»¶ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬æ€»æ˜¯é€šè¿‡åŒä¸€ç§æŸ¥æ‰¾æ–¹å¼æ¥é”å®šæ•°æ®ã€‚</p><p><strong>æ•°æ®ç»“æ„</strong>ï¼šB+æ ‘</p><p><strong>å›¾è§£ï¼š</strong></p><p><img src="https://cdn.nlark.com/yuque/0/2019/png/113243/1551345494120-a46d004f-eeca-4cca-9770-330344c41185.png#align=left&amp;display=inline&amp;height=300&amp;originHeight=300&amp;originWidth=624&amp;size=0&amp;status=done&amp;width=624" alt></p><h4 id="b-æ ‘çš„æŸ¥æ‰¾è¿‡ç¨‹"><a href="#b-æ ‘çš„æŸ¥æ‰¾è¿‡ç¨‹" class="headerlink" title="b+æ ‘çš„æŸ¥æ‰¾è¿‡ç¨‹"></a>b+æ ‘çš„æŸ¥æ‰¾è¿‡ç¨‹</h4><p>å¦‚å›¾æ‰€ç¤ºï¼Œå¦‚æœè¦æŸ¥æ‰¾æ•°æ®é¡¹ 29ï¼Œé‚£ä¹ˆé¦–å…ˆä¼šæŠŠç£ç›˜å— 1 ç”±ç£ç›˜åŠ è½½åˆ°å†…å­˜ï¼Œæ­¤æ—¶å‘ç”Ÿä¸€æ¬¡ IOï¼Œåœ¨å†…å­˜ä¸­ç”¨äºŒåˆ†æŸ¥æ‰¾ç¡®å®š 29 åœ¨ 17 å’Œ 35 ä¹‹é—´ï¼Œé”å®šç£ç›˜å— 1 çš„ P2 æŒ‡é’ˆï¼Œå†…å­˜æ—¶é—´å› ä¸ºéå¸¸çŸ­ï¼ˆç›¸æ¯”ç£ç›˜çš„ IOï¼‰å¯ä»¥å¿½ç•¥ä¸è®¡ï¼Œé€šè¿‡ç£ç›˜å— 1 çš„ P2 æŒ‡é’ˆçš„ç£ç›˜åœ°å€æŠŠç£ç›˜å— 3 ç”±ç£ç›˜åŠ è½½åˆ°å†…å­˜ï¼Œå‘ç”Ÿç¬¬äºŒæ¬¡ IOï¼Œ29 åœ¨ 26 å’Œ 30 ä¹‹é—´ï¼Œé”å®šç£ç›˜å— 3 çš„ P2 æŒ‡é’ˆï¼Œé€šè¿‡æŒ‡é’ˆåŠ è½½ç£ç›˜å— 8 åˆ°å†…å­˜ï¼Œå‘ç”Ÿç¬¬ä¸‰æ¬¡ IOï¼ŒåŒæ—¶å†…å­˜ä¸­åšäºŒåˆ†æŸ¥æ‰¾æ‰¾åˆ° 29ï¼Œç»“æŸæŸ¥è¯¢ï¼Œæ€»è®¡ä¸‰æ¬¡ IOã€‚çœŸå®çš„æƒ…å†µæ˜¯ï¼Œ3 å±‚çš„ b+æ ‘å¯ä»¥è¡¨ç¤ºä¸Šç™¾ä¸‡çš„æ•°æ®ï¼Œå¦‚æœä¸Šç™¾ä¸‡çš„æ•°æ®æŸ¥æ‰¾åªéœ€è¦ä¸‰æ¬¡ IOï¼Œæ€§èƒ½æé«˜å°†æ˜¯å·¨å¤§çš„ï¼Œå¦‚æœæ²¡æœ‰ç´¢å¼•ï¼Œæ¯ä¸ªæ•°æ®é¡¹éƒ½è¦å‘ç”Ÿä¸€æ¬¡ IOï¼Œé‚£ä¹ˆæ€»å…±éœ€è¦ç™¾ä¸‡æ¬¡çš„ IOï¼Œæ˜¾ç„¶æˆæœ¬éå¸¸éå¸¸é«˜ã€‚</p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>Shiro csrf æ‹¦æˆªè¯·æ±‚</title>
      <link href="/2019/02/27/yuque/Shiro%20csrf%20%E6%8B%A6%E6%88%AA%E8%AF%B7%E6%B1%82/"/>
      <url>/2019/02/27/yuque/Shiro%20csrf%20%E6%8B%A6%E6%88%AA%E8%AF%B7%E6%B1%82/</url>
      
        <content type="html"><![CDATA[<p>ä»Šå¤©é‡åˆ°ä¸€ä¸ªé—®é¢˜ï¼Œæˆ‘çš„ form è¡¨å•å†™çš„æ²¡æœ‰é”™ï¼Œç”¨ js ç”Ÿæˆçš„ actionï¼Œä¸çŸ¥é“ä»€ä¹ˆåŸå› ä¸€ç›´æäº¤ä¸ä¸Šå»ã€‚</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">method</span>=<span class="string">"post"</span> <span class="attr">class</span>=<span class="string">"form-horizontal"</span> <span class="attr">role</span>=<span class="string">"form"</span> <span class="attr">id</span>=<span class="string">"form"</span>&gt;</span><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">changeState</span>(<span class="params">that</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> id = $(that).attr(<span class="string">"applyid"</span>);</span><br><span class="line">  $(<span class="string">"#applyId"</span>).val(id);</span><br><span class="line">  $(<span class="string">"#form"</span>).attr(<span class="string">"action"</span>, <span class="string">"/feedbacks/"</span> + id + <span class="string">"/state"</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æäº¤è¡¨å•é¡µé¢ç›´æ¥è·³åˆ°ç™»å½•é¡µé¢ï¼Œæ¨æµ‹æ˜¯è¯·æ±‚ç»™ shiro æ‹¦æˆªäº†ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// shiro æ‹¦æˆªå™¨</span></span><br><span class="line">filterMap.put(<span class="string">"csrf"</span>, <span class="keyword">new</span> CsrfTokenFilter());</span><br><span class="line">filterChainDefinitionMap.put(<span class="string">"/**"</span>, <span class="string">"authc,csrf"</span>);</span><br></pre></td></tr></table></figure><p>æœ€åéšä¾¿åŠ äº†ä¸ª actionã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;form</span><br><span class="line">  method=<span class="string">"post"</span></span><br><span class="line">  <span class="class"><span class="keyword">class</span></span>=<span class="string">"form-horizontal"</span></span><br><span class="line">  role=<span class="string">"form"</span></span><br><span class="line">  id=<span class="string">"form"</span></span><br><span class="line">  th:action=<span class="string">"@&#123;/user&#125;"</span></span><br><span class="line">&gt;&lt;<span class="regexp">/form&gt;</span></span><br></pre></td></tr></table></figure><p>html å®¡æŸ¥å…ƒç´ çš„æ—¶å€™ï¼Œé¡µé¢ä¼šå¢åŠ ä¸€ä¸ª csrfTokenï¼Œå¯ä»¥æ­£å¸¸æäº¤äº†ã€‚</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">input</span></span></span><br><span class="line"><span class="tag">  <span class="attr">type</span>=<span class="string">"hidden"</span></span></span><br><span class="line"><span class="tag">  <span class="attr">name</span>=<span class="string">"csrfToken"</span></span></span><br><span class="line"><span class="tag">  <span class="attr">value</span>=<span class="string">"2bdaaca5-ebf9-450f-a25a-8faacd018965"</span></span></span><br><span class="line"><span class="tag">/&gt;</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>ç‚¹å‡»å¼¹å‡ºæ¨¡æ€æ¡†ï¼Œæ˜¾ç¤ºè¯¦æƒ…</title>
      <link href="/2019/02/27/yuque/%E7%82%B9%E5%87%BB%E5%BC%B9%E5%87%BA%E6%A8%A1%E6%80%81%E6%A1%86%EF%BC%8C%E6%98%BE%E7%A4%BA%E8%AF%A6%E6%83%85/"/>
      <url>/2019/02/27/yuque/%E7%82%B9%E5%87%BB%E5%BC%B9%E5%87%BA%E6%A8%A1%E6%80%81%E6%A1%86%EF%BC%8C%E6%98%BE%E7%A4%BA%E8%AF%A6%E6%83%85/</url>
      
        <content type="html"><![CDATA[<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">        <span class="function"><span class="keyword">function</span> <span class="title">onpenShowModal</span>(<span class="params">obj</span>) </span>&#123;</span><br><span class="line">            $(<span class="string">"#show"</span>).modal(<span class="string">'show'</span>);</span><br><span class="line">            <span class="keyword">var</span> title = $(obj).data(<span class="string">"title"</span>)</span><br><span class="line">            $(<span class="string">"#modalContent"</span>).html(title);</span><br><span class="line">        &#125;;</span><br><span class="line">&lt;<span class="regexp">/script&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">a</span></span></span><br><span class="line"><span class="tag">  <span class="attr">class</span>=<span class="string">"mt-btn"</span></span></span><br><span class="line"><span class="tag">  <span class="attr">th:data-title</span>=<span class="string">"*&#123;content&#125;"</span></span></span><br><span class="line"><span class="tag">  <span class="attr">data-toggle</span>=<span class="string">"modal"</span></span></span><br><span class="line"><span class="tag">  <span class="attr">onclick</span>=<span class="string">"onpenShowModal(this)"</span></span></span><br><span class="line"><span class="tag">  &gt;</span>æŸ¥çœ‹è¯¦æƒ…<span class="tag">&lt;/<span class="name">a</span></span></span><br><span class="line"><span class="tag">&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"modal"</span> <span class="attr">id</span>=<span class="string">"show"</span> <span class="attr">tabindex</span>=<span class="string">"-1"</span> <span class="attr">role</span>=<span class="string">"dialog"</span> <span class="attr">aria-hidden</span>=<span class="string">"true"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"modal-dialog "</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"modal-content"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"modal-header"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">"button"</span> <span class="attr">class</span>=<span class="string">"close"</span> <span class="attr">data-dismiss</span>=<span class="string">"modal"</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">span</span> <span class="attr">aria-hidden</span>=<span class="string">"true"</span>&gt;</span>Ã—<span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"sr-only"</span>&gt;</span>Close<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">"modal-title text-md text-dark"</span>&gt;</span>æ¶ˆæ¯è¯¦æƒ…<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"modal-body"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">"text-muted"</span> <span class="attr">id</span>=<span class="string">"modalContent"</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"modal-footer"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">"button"</span> <span class="attr">class</span>=<span class="string">"btn btn-white"</span> <span class="attr">data-dismiss</span>=<span class="string">"modal"</span>&gt;</span></span><br><span class="line">          å–æ¶ˆ</span><br><span class="line">        <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">button</span></span></span><br><span class="line"><span class="tag">          <span class="attr">type</span>=<span class="string">"button"</span></span></span><br><span class="line"><span class="tag">          <span class="attr">class</span>=<span class="string">"btn btn-primary confirm"</span></span></span><br><span class="line"><span class="tag">          <span class="attr">data-dismiss</span>=<span class="string">"modal"</span></span></span><br><span class="line"><span class="tag">        &gt;</span></span><br><span class="line">          ç¡®è®¤</span><br><span class="line">        <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>Python ä¸‹è½½å›¾ç‰‡</title>
      <link href="/2019/02/27/yuque/Python%20%E4%B8%8B%E8%BD%BD%E5%9B%BE%E7%89%87/"/>
      <url>/2019/02/27/yuque/Python%20%E4%B8%8B%E8%BD%BD%E5%9B%BE%E7%89%87/</url>
      
        <content type="html"><![CDATA[<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">import</span> random</span><br><span class="line"><span class="keyword">import</span> string</span><br><span class="line"><span class="keyword">import</span> csv</span><br><span class="line"></span><br><span class="line">headers = &#123;</span><br><span class="line">    <span class="comment"># 'Host': 'i.meizitu.net',</span></span><br><span class="line">    <span class="string">'Accept'</span>: <span class="string">'text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8'</span>,</span><br><span class="line">    <span class="string">'User-Agent'</span>: <span class="string">'Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:55.0) Gecko/20100101 Firefox/55.0'</span>,</span><br><span class="line">    <span class="string">'Accept-Language'</span>: <span class="string">'zh-CN,zh;q=0.8,en-US;q=0.5,en;q=0.3'</span>,</span><br><span class="line">    <span class="string">'Connection'</span>: <span class="string">'keep-alive'</span>,</span><br><span class="line">    <span class="string">'Accept-Encoding'</span>: <span class="string">'gzip, deflate'</span>,</span><br><span class="line">    <span class="string">'Upgrade-Insecure-Requests'</span>: <span class="string">'1'</span>,</span><br><span class="line">    <span class="string">'content-type'</span>: <span class="string">"application/json"</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">s = requests.session()  <span class="comment"># ä¿ç•™ä¼šè¯</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># ä¸‹è½½å›¾ç‰‡</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">downIMG</span><span class="params">(url, fileName)</span>:</span></span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        url = str(url).split(<span class="string">"?"</span>)[<span class="number">0</span>]</span><br><span class="line">        LAST = str(url).split(<span class="string">"."</span>)[<span class="number">-1</span>]</span><br><span class="line"><span class="comment"># æ²¡æœ‰æ–‡ä»¶å¤¹ï¼Œåˆ™åˆ›å»ºæ–‡ä»¶å¤¹</span></span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> os.path.exists(<span class="string">'D:/Image/'</span> + fileName):</span><br><span class="line">            os.mkdir(<span class="string">'D:/Image/'</span> + fileName)</span><br><span class="line"></span><br><span class="line">        url_re = s.get(url.strip(), headers=headers)</span><br><span class="line">        <span class="keyword">if</span> url_re.status_code == <span class="number">200</span>:</span><br><span class="line">            open(<span class="string">"D:/Image/"</span> + fileName + <span class="string">"/"</span> + initImageName() + <span class="string">"."</span> + LAST, <span class="string">'wb'</span>).write(url_re.content)</span><br><span class="line">    <span class="keyword">except</span>:</span><br><span class="line">        <span class="keyword">with</span> open(<span class="string">"image-run-error.csv"</span>, <span class="string">"a"</span>, encoding=<span class="string">'utf-8'</span>) <span class="keyword">as</span>  csvfile:</span><br><span class="line">            writer = csv.writer(csvfile)</span><br><span class="line">            writer.writerow(fileName, url)</span><br><span class="line"></span><br><span class="line"> <span class="comment"># éšæœºç”Ÿæˆæ–‡ä»¶å</span></span><br><span class="line"> <span class="function"><span class="keyword">def</span> <span class="title">initImageName</span><span class="params">()</span>:</span></span><br><span class="line">    ran_str = <span class="string">''</span>.join(random.sample(string.ascii_letters + string.digits, <span class="number">8</span>))</span><br><span class="line">    <span class="keyword">return</span> ran_str</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    images = pd.read_csv(<span class="string">"drug-image-url.csv"</span>)</span><br><span class="line">    images.fillna(<span class="string">''</span>, inplace=<span class="literal">True</span>)</span><br><span class="line">    images = np.array(images).tolist()</span><br><span class="line">    <span class="keyword">for</span> image <span class="keyword">in</span> images:</span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            downIMG(image[<span class="number">2</span>], image[<span class="number">0</span>] + <span class="string">","</span> + str(image[<span class="number">1</span>]).replace(<span class="string">"*"</span>, <span class="string">"_"</span>))</span><br><span class="line">        <span class="keyword">except</span>:</span><br><span class="line">          <span class="keyword">continue</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>Python URLæ±‰å­—åŠ å¯†</title>
      <link href="/2019/02/20/yuque/Python%20URL%E6%B1%89%E5%AD%97%E5%8A%A0%E5%AF%86/"/>
      <url>/2019/02/20/yuque/Python%20URL%E6%B1%89%E5%AD%97%E5%8A%A0%E5%AF%86/</url>
      
        <content type="html"><![CDATA[<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> urllib.parse <span class="keyword">import</span> quote</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">quote(keyWord)</span><br></pre></td></tr></table></figure><p>åŠ å¯†å¯¹åº” js çš„  encodeURI() æ–¹æ³•</p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>å¾®ä¿¡éªŒè¯æœåŠ¡å™¨æœ‰æ•ˆæ€§</title>
      <link href="/2019/02/19/yuque/%E5%BE%AE%E4%BF%A1%E9%AA%8C%E8%AF%81%E6%9C%8D%E5%8A%A1%E5%99%A8%E6%9C%89%E6%95%88%E6%80%A7/"/>
      <url>/2019/02/19/yuque/%E5%BE%AE%E4%BF%A1%E9%AA%8C%E8%AF%81%E6%9C%8D%E5%8A%A1%E5%99%A8%E6%9C%89%E6%95%88%E6%80%A7/</url>
      
        <content type="html"><![CDATA[<p>åå°ä»£ç </p><h3 id="æ§åˆ¶å™¨"><a href="#æ§åˆ¶å™¨" class="headerlink" title="æ§åˆ¶å™¨"></a>æ§åˆ¶å™¨</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.demo.controller;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.example.demo.util.Sha1Util;</span><br><span class="line"><span class="keyword">import</span> org.springframework.http.ResponseEntity;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.GetMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestParam;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RestController;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.Arrays;</span><br><span class="line"></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">WechatController</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> å¾®ä¿¡è¯·æ±‚æ¥æ”¶</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@GetMapping</span>(value = <span class="string">"/weixin"</span>, produces = <span class="string">"text/plain;charset=UTF-8"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> ResponseEntity <span class="title">weixin</span><span class="params">(@RequestParam(name = <span class="string">"signature"</span>)</span> String signature,</span></span><br><span class="line"><span class="function">                                 @<span class="title">RequestParam</span><span class="params">(name = <span class="string">"timestamp"</span>)</span> String timestamp,</span></span><br><span class="line"><span class="function">                                 @<span class="title">RequestParam</span><span class="params">(name = <span class="string">"nonce"</span>)</span> String nonce,</span></span><br><span class="line"><span class="function">                                 @<span class="title">RequestParam</span><span class="params">(name = <span class="string">"echostr"</span>)</span> String echostr) </span>&#123;</span><br><span class="line">        String auths[] = &#123;token(è‡ªå·±å¡«çš„ token), timestamp, nonce&#125;;</span><br><span class="line">        Arrays.sort(auths);</span><br><span class="line">        <span class="keyword">if</span> (signature.equals(Sha1Util.getSha1(auths[<span class="number">0</span>] + auths[<span class="number">1</span>] + auths[<span class="number">2</span>]))) &#123;</span><br><span class="line">            <span class="keyword">if</span> (<span class="keyword">null</span> != echostr) &#123;</span><br><span class="line">                <span class="keyword">return</span> ResponseEntity.ok(<span class="keyword">this</span>.auth(echostr));</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> ResponseEntity.ok().build();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> echostr</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> è®¤è¯</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> String <span class="title">auth</span><span class="params">(String echostr)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> echostr;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping</span>(value = <span class="string">"/test"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> ResponseEntity <span class="title">test</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> ResponseEntity.ok(<span class="string">"æµ‹è¯•æˆåŠŸï¼"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="Sha1-åŠ å¯†"><a href="#Sha1-åŠ å¯†" class="headerlink" title="Sha1 åŠ å¯†"></a>Sha1 åŠ å¯†</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.demo.util;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.security.MessageDigest;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Sha1Util</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> String <span class="title">getSha1</span><span class="params">(String str)</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">null</span> == str || <span class="number">0</span> == str.length())&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">char</span>[] hexDigits = &#123; <span class="string">'0'</span>, <span class="string">'1'</span>, <span class="string">'2'</span>, <span class="string">'3'</span>, <span class="string">'4'</span>, <span class="string">'5'</span>, <span class="string">'6'</span>, <span class="string">'7'</span>, <span class="string">'8'</span>, <span class="string">'9'</span>,</span><br><span class="line">                <span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'c'</span>, <span class="string">'d'</span>, <span class="string">'e'</span>, <span class="string">'f'</span>&#125;;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            MessageDigest mdTemp = MessageDigest.getInstance(<span class="string">"SHA1"</span>);</span><br><span class="line">            mdTemp.update(str.getBytes(<span class="string">"UTF-8"</span>));</span><br><span class="line"></span><br><span class="line">            <span class="keyword">byte</span>[] md = mdTemp.digest();</span><br><span class="line">            <span class="keyword">int</span> j = md.length;</span><br><span class="line">            <span class="keyword">char</span>[] buf = <span class="keyword">new</span> <span class="keyword">char</span>[j * <span class="number">2</span>];</span><br><span class="line">            <span class="keyword">int</span> k = <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; j; i++) &#123;</span><br><span class="line">                <span class="keyword">byte</span> byte0 = md[i];</span><br><span class="line">                buf[k++] = hexDigits[byte0 &gt;&gt;&gt; <span class="number">4</span> &amp; <span class="number">0xf</span>];</span><br><span class="line">                buf[k++] = hexDigits[byte0 &amp; <span class="number">0xf</span>];</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">new</span> String(buf);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="å¾®ä¿¡åå°é…ç½®"><a href="#å¾®ä¿¡åå°é…ç½®" class="headerlink" title="å¾®ä¿¡åå°é…ç½®"></a>å¾®ä¿¡åå°é…ç½®</h3><p><img src="https://cdn.nlark.com/yuque/0/2019/png/113243/1550543352291-07d9129e-ff54-408f-9741-c35d8ea5f0d4.png#align=left&amp;display=inline&amp;height=738&amp;name=%7BEM%5DBC%5DZXS5%287UG%5DUG%25ZRHM.png&amp;originHeight=801&amp;originWidth=810&amp;size=62939&amp;width=746" alt="{EM]BC]ZXS5(7UG]UG%ZRHM.png"></p><p>åå°çš„ token å°±æ˜¯æ§åˆ¶å™¨ä¸­è‡ªå·±é…ç½®çš„ token<br>url å°±å¡« http://ä½ çš„é“¾æ¥/weixin</p><p>æäº¤å°±éªŒè¯æˆåŠŸäº†</p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>Docker å¸¸ç”¨å‘½ä»¤</title>
      <link href="/2019/02/19/yuque/Docker%20%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/"/>
      <url>/2019/02/19/yuque/Docker%20%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/</url>
      
        <content type="html"><![CDATA[<p><strong>é•œåƒ</strong>ï¼ˆ<code>Image</code>ï¼‰å’Œ<strong>å®¹å™¨</strong>ï¼ˆ<code>Container</code>ï¼‰çš„å…³ç³»ï¼Œå°±åƒæ˜¯é¢å‘å¯¹è±¡ç¨‹åºè®¾è®¡ä¸­çš„  <code>ç±»</code>  å’Œ  <code>å®ä¾‹</code>  ä¸€æ ·ï¼Œé•œåƒæ˜¯é™æ€çš„å®šä¹‰ï¼Œå®¹å™¨æ˜¯é•œåƒè¿è¡Œæ—¶çš„å®ä½“ã€‚å®¹å™¨å¯ä»¥è¢«åˆ›å»ºã€å¯åŠ¨ã€åœæ­¢ã€åˆ é™¤ã€æš‚åœç­‰ã€‚</p><p>å®¹å™¨çš„å®è´¨æ˜¯è¿›ç¨‹ï¼Œä½†ä¸ç›´æ¥åœ¨å®¿ä¸»æ‰§è¡Œçš„è¿›ç¨‹ä¸åŒï¼Œå®¹å™¨è¿›ç¨‹è¿è¡Œäºå±äºè‡ªå·±çš„ç‹¬ç«‹çš„å‘½åç©ºé—´ã€‚å› æ­¤å®¹å™¨å¯ä»¥æ‹¥æœ‰è‡ªå·±çš„  <code>root</code>  æ–‡ä»¶ç³»ç»Ÿã€è‡ªå·±çš„ç½‘ç»œé…ç½®ã€è‡ªå·±çš„è¿›ç¨‹ç©ºé—´ï¼Œç”šè‡³è‡ªå·±çš„ç”¨æˆ· ID ç©ºé—´ã€‚</p><p>å®¹å™¨å†…çš„è¿›ç¨‹æ˜¯è¿è¡Œåœ¨ä¸€ä¸ªéš”ç¦»çš„ç¯å¢ƒé‡Œï¼Œä½¿ç”¨èµ·æ¥ï¼Œå°±å¥½åƒæ˜¯åœ¨ä¸€ä¸ªç‹¬ç«‹äºå®¿ä¸»çš„ç³»ç»Ÿä¸‹æ“ä½œä¸€æ ·ã€‚</p><p>æ–‡ä»¶æ‹·è´</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker cp /home/ubuntu/Java/ROOT f853e6b9cc5f:/var/tmp/tomcat/apache-tomcat-8.5.8/webapps/</span><br></pre></td></tr></table></figure><p>å¸¸ç”¨å‘½ä»¤</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span> é‡å¯ docker é•œåƒ</span><br><span class="line">service docker restart</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span> æŸ¥çœ‹æ‰€æœ‰é•œåƒ</span><br><span class="line">docker images</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span> åˆ é™¤é•œåƒ Image</span><br><span class="line">docker rmi 5b821518a2dd</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span> æ­£åœ¨è¿è¡Œå®¹å™¨</span><br><span class="line">docker ps</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span> æŸ¥çœ‹dockerå®¹å™¨</span><br><span class="line">docker ps -a</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span> å¯åŠ¨tomcat:7é•œåƒ</span><br><span class="line">docker run -p 8080:8080 tomcat:7</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span> ä»¥åå°å®ˆæŠ¤è¿›ç¨‹çš„æ–¹å¼å¯åŠ¨</span><br><span class="line">docker run -d tomcat:8</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span> åœæ­¢ä¸€ä¸ªå®¹å™¨</span><br><span class="line">docker stop b840db1d182b</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span> è¿›å…¥ä¸€ä¸ªå®¹å™¨</span><br><span class="line">docker attach d48b21a7e439</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span> è¿›å…¥æ­£åœ¨è¿è¡Œå®¹å™¨å¹¶ä»¥å‘½ä»¤è¡Œäº¤äº’</span><br><span class="line">docker exec -it e9410ee182bd /bin/sh</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span> ä»¥äº¤äº’çš„æ–¹å¼è¿è¡Œ</span><br><span class="line">docker run -i -t -p 8081:8080 tomcat:7 /bin/bash</span><br></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">-iï¼šè¡¨ç¤ºä»¥â€œäº¤äº’æ¨¡å¼â€è¿è¡Œå®¹å™¨</span><br><span class="line">-tï¼šè¡¨ç¤ºå®¹å™¨å¯åŠ¨åä¼šè¿›å…¥å…¶å‘½ä»¤è¡Œ</span><br><span class="line">-vï¼šè¡¨ç¤ºéœ€è¦å°†æœ¬åœ°å“ªä¸ªç›®å½•æŒ‚è½½åˆ°å®¹å™¨ä¸­ï¼Œæ ¼å¼ï¼š-v &lt;å®¿ä¸»æœºç›®å½•&gt;:&lt;å®¹å™¨ç›®å½•&gt;</span><br></pre></td></tr></table></figure><p>åˆ é™¤åœæ­¢çš„å®¹å™¨</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker rm $(docker ps --all -q -f status=exited)</span><br></pre></td></tr></table></figure><p>åˆ é™¤æ‰€æœ‰å®¹å™¨</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo docker rm `sudo docker ps -a -q`</span><br></pre></td></tr></table></figure><p>åˆ é™¤æ²¡æœ‰ä½¿ç”¨çš„é•œåƒ</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker rmi -f $(docker images | grep "&lt;none&gt;" | awk "&#123;print \$3&#125;")</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>Docker éƒ¨ç½² SpringBoot é¡¹ç›®</title>
      <link href="/2019/02/18/yuque/Docker%20%E9%83%A8%E7%BD%B2%20SpringBoot%20%E9%A1%B9%E7%9B%AE/"/>
      <url>/2019/02/18/yuque/Docker%20%E9%83%A8%E7%BD%B2%20SpringBoot%20%E9%A1%B9%E7%9B%AE/</url>
      
        <content type="html"><![CDATA[<p>java 8 ç¯å¢ƒï¼ŒDockerfile<br>spring boot æ‰“å¥½çš„ jar åŒ… wechat-0.0.1-SNAPSHOT.jarï¼Œæ”¾åœ¨ Dockerfile åŒçº§ç›®å½•ä¸‹</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">FROM java:8</span><br><span class="line">VOLUME /tmp</span><br><span class="line">RUN mkdir /app</span><br><span class="line">ADD wechat-0.0.1-SNAPSHOT.jar app.jar</span><br><span class="line">RUN bash -c 'touch /app.jar'</span><br><span class="line">ENTRYPOINT ["java","-Djava.security.egd=file:/dev/./urandom","-jar","/app.jar"]</span><br></pre></td></tr></table></figure><p>æ ¹æ®  Dockerfile ç”Ÿæˆé•œåƒ</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker build -t wechat .</span><br></pre></td></tr></table></figure><p>å°†é¡¹ç›®æ˜ å°„åˆ° 8080 ç«¯å£</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -d -p 8080:8090 wechat</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>Linux ä¸€æ¬¡ rm -rf</title>
      <link href="/2019/02/14/yuque/Linux%20%E4%B8%80%E6%AC%A1%20rm%20-rf/"/>
      <url>/2019/02/14/yuque/Linux%20%E4%B8%80%E6%AC%A1%20rm%20-rf/</url>
      
        <content type="html"><![CDATA[<p>æˆ‘å‡†å¤‡åˆ é™¤ /usr/local ç›®å½•ä¸‹çš„ admin å¼€å¤´çš„å¤šä¸ªæ–‡ä»¶</p><p><img src="https://cdn.nlark.com/yuque/0/2019/png/113243/1550111607385-5c66fb1d-3a5a-49e4-89de-666b642d061b.png#align=left&amp;display=inline&amp;height=129&amp;name=image.png&amp;originHeight=129&amp;originWidth=757&amp;size=120517&amp;width=757" alt="image.png"></p><p>æˆ‘ä½¿ç”¨äº† rm -rf amdin* ï¼Œå‘½ä»¤æ²¡æœ‰è¾“é”™ï¼Œä½†æ˜¯åˆ é™¤å®Œäº†ä¹‹åå†æŸ¥çœ‹è¿™ä¸ªç›®å½•ï¼Œå¾ˆå¤šä¸œè¥¿éƒ½è¢«åˆ é™¤äº†ã€‚</p><p><img src="https://cdn.nlark.com/yuque/0/2019/png/113243/1550111657401-1fd3cf0a-7d46-4a2a-a827-b7ea436a6bc4.png#align=left&amp;display=inline&amp;height=64&amp;name=image.png&amp;originHeight=64&amp;originWidth=480&amp;size=33875&amp;width=480" alt="image.png"></p><p>å“å°¿äº† - -<br>æˆ‘è¿˜ä¸çŸ¥é“æ˜¯ä»€ä¹ˆåŸå› ï¼Œåªèƒ½å½“ä½œç»™è‡ªå·±æä¸ªé†’ï¼Œä»¥åå°½é‡ä¸è¦ç”¨é€šé…ï¼Œå…¨ååˆ é™¤æ›´å®‰å…¨ã€‚<br>åº†å¹¸çš„æ˜¯ /usr/local ç›®å½•ä¸‹æ²¡æœ‰ä»€ä¹ˆç‰¹åˆ«é‡è¦çš„æ–‡ä»¶ã€‚</p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>ECharts å›¾å½¢è‡ªé€‚åº”</title>
      <link href="/2019/01/23/yuque/ECharts%20%E5%9B%BE%E5%BD%A2%E8%87%AA%E9%80%82%E5%BA%94/"/>
      <url>/2019/01/23/yuque/ECharts%20%E5%9B%BE%E5%BD%A2%E8%87%AA%E9%80%82%E5%BA%94/</url>
      
        <content type="html"><![CDATA[<h3 id="å®˜æ–¹å®ä¾‹"><a href="#å®˜æ–¹å®ä¾‹" class="headerlink" title="å®˜æ–¹å®ä¾‹"></a>å®˜æ–¹å®ä¾‹</h3><p><a href="https://echarts.baidu.com/examples/" target="_blank" rel="noopener">https://echarts.baidu.com/examples/</a></p><h3 id="Example"><a href="#Example" class="headerlink" title="Example"></a>Example</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">   <span class="comment">//åˆå§‹åŒ–</span></span><br><span class="line">   initMatch = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">     <span class="comment">// é¥¼å›¾</span></span><br><span class="line">     initPieChart(<span class="string">"pie1Counts"</span>, <span class="string">""</span>, pieTypes, pie1Counts, []);</span><br><span class="line">     <span class="comment">// æ ‘çŠ¶å›¾</span></span><br><span class="line">     initBarChart(<span class="string">"rxUse"</span>, pieTypes, pie1Counts);</span><br><span class="line">   &#125;</span><br><span class="line">   initMatch();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>é¥¼å›¾</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  initPieChart = <span class="function"><span class="keyword">function</span> (<span class="params">id, title, legendata, seriesdata, colorDate</span>) </span>&#123;</span><br><span class="line">    myChart = echarts.init(<span class="built_in">document</span>.getElementById(id));</span><br><span class="line">    initPieOption(title, legendata, seriesdata, colorDate);</span><br><span class="line">    myChart.setOption(option);</span><br><span class="line">    <span class="comment">// æ·»åŠ åˆ° charts æ•°ç»„</span></span><br><span class="line">    charts.push(myChart)</span><br><span class="line">  &#125;;</span><br><span class="line">  initPieOption = <span class="function"><span class="keyword">function</span> (<span class="params">title, legendata, seriesdata, colorDate</span>) </span>&#123;</span><br><span class="line">    option = &#123;</span><br><span class="line">      tooltip: &#123;</span><br><span class="line">        trigger: <span class="string">'item'</span>,</span><br><span class="line">        formatter: <span class="string">"&#123;a&#125; &lt;br/&gt;&#123;b&#125;: &#123;c&#125; (&#123;d&#125;%)"</span></span><br><span class="line">      &#125;,</span><br><span class="line">      series: [</span><br><span class="line">        &#123;</span><br><span class="line">          name: <span class="string">'è®¿é—®æ¥æº'</span>,</span><br><span class="line">          type: <span class="string">'pie'</span>,</span><br><span class="line">          radius: [<span class="string">'50%'</span>, <span class="string">'70%'</span>],</span><br><span class="line">          avoidLabelOverlap: <span class="literal">false</span>,</span><br><span class="line">          label: &#123;</span><br><span class="line">            normal: &#123;</span><br><span class="line">              show: <span class="literal">false</span>,</span><br><span class="line">              position: <span class="string">'center'</span></span><br><span class="line">            &#125;,</span><br><span class="line">            emphasis: &#123;</span><br><span class="line">              show: <span class="literal">true</span>,</span><br><span class="line">              textStyle: &#123;</span><br><span class="line">                fontSize: <span class="string">'14'</span>,</span><br><span class="line">                fontWeight: <span class="string">'bold'</span></span><br><span class="line">              &#125;</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;,</span><br><span class="line">          labelLine: &#123;</span><br><span class="line">            normal: &#123;</span><br><span class="line">              show: <span class="literal">false</span></span><br><span class="line">            &#125;</span><br><span class="line">          &#125;,</span><br><span class="line">          data: seriesdata</span><br><span class="line">        &#125;</span><br><span class="line">      ],</span><br><span class="line">      <span class="comment">// color: colorDate</span></span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>æŸ±çŠ¶å›¾</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  initBarChart = <span class="function"><span class="keyword">function</span> (<span class="params">id, legendata, seriesdata</span>) </span>&#123;</span><br><span class="line">    myChart = echarts.init(<span class="built_in">document</span>.getElementById(id));</span><br><span class="line">    initBarOption(legendata, seriesdata);</span><br><span class="line">    myChart.setOption(option);</span><br><span class="line">    charts.push(myChart)</span><br><span class="line">  &#125;;</span><br><span class="line">  <span class="comment">// åˆå§‹åŒ–æŸ±çŠ¶å›¾</span></span><br><span class="line">  initBarOption = <span class="function"><span class="keyword">function</span> (<span class="params">legendata, seriesdata</span>) </span>&#123;</span><br><span class="line">    option = &#123;</span><br><span class="line">      xAxis: &#123;</span><br><span class="line">        type: <span class="string">'category'</span>,</span><br><span class="line">        data: legendata</span><br><span class="line">      &#125;,</span><br><span class="line">      yAxis: &#123;</span><br><span class="line">        type: <span class="string">'value'</span></span><br><span class="line">      &#125;,</span><br><span class="line">      series: [&#123;</span><br><span class="line">        data: seriesdata,</span><br><span class="line">        type: <span class="string">'bar'</span>,</span><br><span class="line">        <span class="comment">// begin</span></span><br><span class="line">        itemStyle: &#123;</span><br><span class="line">          normal: &#123;</span><br><span class="line">            color: <span class="function"><span class="keyword">function</span> (<span class="params">params</span>) </span>&#123;</span><br><span class="line">              <span class="keyword">var</span> colorList = [<span class="string">'rgb(205,85,85)'</span>, <span class="string">'rgb(210,205,30)'</span>, <span class="string">'rgb(135,206,235)'</span>, <span class="string">'rgb(152,80,152)'</span>, <span class="string">'rgb(238,232,170)'</span>, <span class="string">'rgb(205,85,85)'</span>, <span class="string">'rgb(210,205,30)'</span>];</span><br><span class="line">              <span class="keyword">return</span> colorList[params.dataIndex];</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;,</span><br><span class="line">          <span class="comment">// é¼ æ ‡æ‚¬åœ</span></span><br><span class="line">          emphasis: &#123;</span><br><span class="line">            shadowBlur: <span class="number">10</span>,</span><br><span class="line">            shadowOffsetX: <span class="number">0</span>,</span><br><span class="line">            shadowColor: <span class="string">'rgba(0, 0, 0, 0.5)'</span></span><br><span class="line">          &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">      &#125;</span><br><span class="line">     ]</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>ECharts è‡ªé€‚åº”</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> charts = [];</span><br><span class="line">  <span class="built_in">window</span>.onresize = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123; <span class="comment">// åœ¨æ‰€æœ‰å›¾è¡¨ä¹‹å</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; charts.length; i++) &#123;</span><br><span class="line">      charts[i].resize();</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>Liquibase ä½¿ç”¨</title>
      <link href="/2019/01/18/yuque/Liquibase%20%E4%BD%BF%E7%94%A8/"/>
      <url>/2019/01/18/yuque/Liquibase%20%E4%BD%BF%E7%94%A8/</url>
      
        <content type="html"><![CDATA[<h4 id="å¯¼åŒ…"><a href="#å¯¼åŒ…" class="headerlink" title="å¯¼åŒ…"></a>å¯¼åŒ…</h4><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;dependency&gt;</span><br><span class="line">  &lt;groupId&gt;org.liquibase&lt;/groupId&gt;</span><br><span class="line">  &lt;artifactId&gt;liquibase-core&lt;/artifactId&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br></pre></td></tr></table></figure><h4 id="ç›®å½•"><a href="#ç›®å½•" class="headerlink" title="ç›®å½•"></a>ç›®å½•</h4><p><img src="https://cdn.nlark.com/yuque/0/2019/png/113243/1547778589258-b6dddbbf-2d29-4e81-b176-1fbe108d47c3.png#align=left&amp;display=inline&amp;height=511&amp;name=PN%7B%603%28%5BC%5D2NWR%40X%7DEX%40TSAK.png&amp;originHeight=511&amp;originWidth=437&amp;size=23713&amp;width=437" alt="PN{`3([C]2NWR@X}EX@TSAK.png"></p><h4 id="master-xml"><a href="#master-xml" class="headerlink" title="master.xml"></a>master.xml</h4><p>åŠ è½½é…ç½®æ–‡ä»¶</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="utf-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">databaseChangeLog</span></span></span><br><span class="line"><span class="tag">        <span class="attr">xmlns</span>=<span class="string">"http://www.liquibase.org/xml/ns/dbchangelog"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">xsi:schemaLocation</span>=<span class="string">"http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.5.xsd"</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">include</span> <span class="attr">file</span>=<span class="string">"config/liquibase/changelog/201811101308_add_entity_Student_Info.xml"</span> <span class="attr">relativeToChangelogFile</span>=<span class="string">"false"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">include</span> <span class="attr">file</span>=<span class="string">"config/liquibase/changelog/201811101309_add_entity_Teacher_Info.xml"</span> <span class="attr">relativeToChangelogFile</span>=<span class="string">"false"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">include</span> <span class="attr">file</span>=<span class="string">"config/liquibase/changelog/201811101310_add_entity_Course.xml"</span> <span class="attr">relativeToChangelogFile</span>=<span class="string">"false"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">include</span> <span class="attr">file</span>=<span class="string">"config/liquibase/changelog/201811182205_add_entity_CoursePlan.xml"</span> <span class="attr">relativeToChangelogFile</span>=<span class="string">"false"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">include</span> <span class="attr">file</span>=<span class="string">"config/liquibase/changelog/201811181517_add_entity_Student_Appraise.xml"</span> <span class="attr">relativeToChangelogFile</span>=<span class="string">"false"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">include</span> <span class="attr">file</span>=<span class="string">"config/liquibase/changelog/201811181517_add_entity_Teacher_Appraise.xml"</span> <span class="attr">relativeToChangelogFile</span>=<span class="string">"false"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">include</span> <span class="attr">file</span>=<span class="string">"config/liquibase/changelog/201812042230_add_entity_User.xml"</span> <span class="attr">relativeToChangelogFile</span>=<span class="string">"false"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">include</span> <span class="attr">file</span>=<span class="string">"config/liquibase/changelog/201812080813_add_entity_Permission.xml"</span> <span class="attr">relativeToChangelogFile</span>=<span class="string">"false"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">include</span> <span class="attr">file</span>=<span class="string">"config/liquibase/changelog/201812182216_add_entity_User_File.xml"</span> <span class="attr">relativeToChangelogFile</span>=<span class="string">"false"</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">include</span> <span class="attr">file</span>=<span class="string">"config/liquibase/changelog/99999999999999_import_data.xml"</span> <span class="attr">relativeToChangelogFile</span>=<span class="string">"false"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">databaseChangeLog</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="import-data-xml"><a href="#import-data-xml" class="headerlink" title="import_data.xml"></a>import_data.xml</h4><p>å¯¼å…¥æ•°æ®</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="utf-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">databaseChangeLog</span></span></span><br><span class="line"><span class="tag">        <span class="attr">xmlns</span>=<span class="string">"http://www.liquibase.org/xml/ns/dbchangelog"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">xsi:schemaLocation</span>=<span class="string">"http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.4.xsd"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">changeSet</span> <span class="attr">id</span>=<span class="string">"course"</span> <span class="attr">author</span>=<span class="string">"jhipster"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">loadData</span> <span class="attr">encoding</span>=<span class="string">"UTF-8"</span></span></span><br><span class="line"><span class="tag">                  <span class="attr">file</span>=<span class="string">"config/liquibase/course.csv"</span></span></span><br><span class="line"><span class="tag">                  <span class="attr">separator</span>=<span class="string">";"</span></span></span><br><span class="line"><span class="tag">                  <span class="attr">tableName</span>=<span class="string">"course"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">changeSet</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">databaseChangeLog</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="entity-xml"><a href="#entity-xml" class="headerlink" title="entity.xml"></a>entity.xml</h4><p>ç”Ÿæˆæ•°æ®åº“è¡¨ç»“æ„</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">databaseChangeLog</span></span></span><br><span class="line"><span class="tag">        <span class="attr">xmlns</span>=<span class="string">"http://www.liquibase.org/xml/ns/dbchangelog"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">xsi:schemaLocation</span>=<span class="string">"http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.1.xsd"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"now"</span> <span class="attr">value</span>=<span class="string">"now()"</span> <span class="attr">dbms</span>=<span class="string">"mysql"</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">changeSet</span> <span class="attr">id</span>=<span class="string">"course"</span> <span class="attr">author</span>=<span class="string">"jhipster"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">preConditions</span> <span class="attr">onFail</span>=<span class="string">"MARK_RAN"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">not</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">tableExists</span> <span class="attr">tableName</span>=<span class="string">"course"</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">not</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">preConditions</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">createTable</span> <span class="attr">tableName</span>=<span class="string">"course"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">column</span> <span class="attr">name</span>=<span class="string">"id"</span> <span class="attr">type</span>=<span class="string">"varchar(22)"</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">constraints</span> <span class="attr">primaryKey</span>=<span class="string">"true"</span> <span class="attr">nullable</span>=<span class="string">"false"</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">column</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">column</span> <span class="attr">name</span>=<span class="string">"name"</span> <span class="attr">type</span>=<span class="string">"varchar(50)"</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">constraints</span> <span class="attr">nullable</span>=<span class="string">"true"</span> /&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">column</span>&gt;</span></span><br><span class="line"></span><br><span class="line">            <span class="tag">&lt;<span class="name">column</span> <span class="attr">name</span>=<span class="string">"teacher_id"</span> <span class="attr">type</span>=<span class="string">"varchar(22)"</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">constraints</span> <span class="attr">nullable</span>=<span class="string">"true"</span> /&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">column</span>&gt;</span></span><br><span class="line"></span><br><span class="line">            <span class="tag">&lt;<span class="name">column</span> <span class="attr">name</span>=<span class="string">"jhi_date"</span> <span class="attr">type</span>=<span class="string">"timestamp"</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">constraints</span> <span class="attr">nullable</span>=<span class="string">"true"</span> /&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">column</span>&gt;</span></span><br><span class="line"></span><br><span class="line">            <span class="tag">&lt;<span class="name">column</span> <span class="attr">name</span>=<span class="string">"start_time"</span> <span class="attr">type</span>=<span class="string">"timestamp"</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">constraints</span> <span class="attr">nullable</span>=<span class="string">"true"</span> /&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">column</span>&gt;</span></span><br><span class="line"></span><br><span class="line">            <span class="tag">&lt;<span class="name">column</span> <span class="attr">name</span>=<span class="string">"end_time"</span> <span class="attr">type</span>=<span class="string">"timestamp"</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">constraints</span> <span class="attr">nullable</span>=<span class="string">"true"</span> /&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">column</span>&gt;</span></span><br><span class="line"></span><br><span class="line">            <span class="tag">&lt;<span class="name">column</span> <span class="attr">name</span>=<span class="string">"created_by"</span> <span class="attr">type</span>=<span class="string">"varchar(20)"</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">constraints</span> <span class="attr">nullable</span>=<span class="string">"true"</span> /&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">column</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">column</span> <span class="attr">name</span>=<span class="string">"created_date"</span> <span class="attr">type</span>=<span class="string">"timestamp"</span> <span class="attr">defaultValueDate</span>=<span class="string">"$&#123;now&#125;"</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">constraints</span> <span class="attr">nullable</span>=<span class="string">"false"</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">column</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">createTable</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;/<span class="name">changeSet</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">databaseChangeLog</span>&gt;</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>Hexo æ­å»ºåšå®¢</title>
      <link href="/2019/01/12/yuque/Hexo%20%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2/"/>
      <url>/2019/01/12/yuque/Hexo%20%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2/</url>
      
        <content type="html"><![CDATA[<h3 id="é…ç½®"><a href="#é…ç½®" class="headerlink" title="é…ç½®"></a>é…ç½®</h3><h4 id="å®‰è£…-Node-js"><a href="#å®‰è£…-Node-js" class="headerlink" title="å®‰è£… Node.js"></a>å®‰è£… Node.js</h4><p>éªŒè¯</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">node -v</span><br><span class="line">npm -v</span><br></pre></td></tr></table></figure><h4 id="å®‰è£…-Git"><a href="#å®‰è£…-Git" class="headerlink" title="å®‰è£… Git"></a>å®‰è£… Git</h4><p>éªŒè¯</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git --version</span><br></pre></td></tr></table></figure><h4 id="å®‰è£…-Hexo"><a href="#å®‰è£…-Hexo" class="headerlink" title="å®‰è£… Hexo"></a>å®‰è£… Hexo</h4><p>æ–°å»ºæ–‡ä»¶å¤¹ï¼Œæ‰“å¼€å‘½ä»¤è¡Œ</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-cli -g</span><br><span class="line">npm install hexo --save</span><br><span class="line">hexo -v</span><br><span class="line"><span class="meta">#</span> åˆå§‹åŒ–hexo</span><br><span class="line">hexo init</span><br><span class="line"><span class="meta">#</span> å®‰è£…ç»„ä»¶</span><br><span class="line">npm install</span><br></pre></td></tr></table></figure><p>è¿è¡Œ</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">hexo g</span><br><span class="line">hexo s</span><br></pre></td></tr></table></figure><h4 id="Hexo-äºŒæ¬¡åˆ›å»º"><a href="#Hexo-äºŒæ¬¡åˆ›å»º" class="headerlink" title="Hexo äºŒæ¬¡åˆ›å»º"></a>Hexo äºŒæ¬¡åˆ›å»º</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span> æ‰“å¼€ä¸€ä¸ªæ–‡ä»¶å¤¹</span><br><span class="line">hexo init filename</span><br><span class="line">cd filename</span><br><span class="line">hexo g</span><br><span class="line">hexo s</span><br></pre></td></tr></table></figure><h4 id="é…ç½®åˆ°-GitHub"><a href="#é…ç½®åˆ°-GitHub" class="headerlink" title="é…ç½®åˆ° GitHub"></a>é…ç½®åˆ° GitHub</h4><p>å®‰è£…æ’ä»¶</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-deployer-git --save</span><br></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git config --global user.name "yourname"</span><br><span class="line">git config --global user.email "youremail"</span><br></pre></td></tr></table></figure><p>åœ¨é…ç½®æ–‡ä»¶<code>_config.yml</code>ä¸­ï¼Œæ‰¾åˆ°<code>Deployment</code>ï¼Œè¿›è¡Œä¿®æ”¹ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">deploy:</span><br><span class="line">  type: git</span><br><span class="line">  repo: git@github.com:yourname/yourname.github.io.git</span><br><span class="line">  branch: master</span><br></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span> ä¸Šä¼ åˆ°github</span><br><span class="line">hexo d</span><br></pre></td></tr></table></figure><h4 id="æ–°å»ºæ–‡ç« "><a href="#æ–°å»ºæ–‡ç« " class="headerlink" title="æ–°å»ºæ–‡ç« "></a>æ–°å»ºæ–‡ç« </h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">---</span><br><span class="line">title: hello-world   //åœ¨æ­¤å¤„æ·»åŠ ä½ çš„æ ‡é¢˜ã€‚</span><br><span class="line">date: 2014-11-7 08:55:29   //åœ¨æ­¤å¤„è¾“å…¥ä½ ç¼–è¾‘è¿™ç¯‡æ–‡ç« çš„æ—¶é—´ã€‚</span><br><span class="line">categories: Exercise   //åœ¨æ­¤å¤„è¾“å…¥è¿™ç¯‡æ–‡ç« çš„åˆ†ç±»ã€‚</span><br><span class="line">toc: true  //åœ¨æ­¤å¤„è®¾å®šæ˜¯å¦å¼€å¯ç›®å½•ï¼Œéœ€è¦ä¸»é¢˜æ”¯æŒã€‚</span><br><span class="line">---</span><br></pre></td></tr></table></figure><h3 id="æ·»åŠ è¯„è®º"><a href="#æ·»åŠ è¯„è®º" class="headerlink" title="æ·»åŠ è¯„è®º"></a>æ·»åŠ è¯„è®º</h3><h4 id="æ·»åŠ æ¥å¿…åŠ›è¯„è®º"><a href="#æ·»åŠ æ¥å¿…åŠ›è¯„è®º" class="headerlink" title="æ·»åŠ æ¥å¿…åŠ›è¯„è®º"></a>æ·»åŠ æ¥å¿…åŠ›è¯„è®º</h4><p>ä¿®æ”¹<code>_config.yml</code>æ–‡ä»¶ï¼Œå¼€å¯æ¥å¿…åˆ©è¯„è®ºï¼š<code>livere: true</code></p><p>ç„¶ååœ¨<code>\yilia\layout\_partial\post</code>ç›®å½•ä¸‹æ·»åŠ <code>livere.ejs</code> ï¼Œç„¶åæŠŠ livere å®‰è£…ä»£ç å¤åˆ¶è¿›å»ï¼Œæ–‡ä»¶å†…å®¹å¦‚ä¸‹ï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- æ¥å¿…åŠ›Cityç‰ˆå®‰è£…ä»£ç  --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"lv-container"</span> <span class="attr">data-id</span>=<span class="string">"city"</span> <span class="attr">data-uid</span>=<span class="string">"ä½ çš„é‚£ä¸ªid"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span></span><br><span class="line"><span class="javascript">    (<span class="function"><span class="keyword">function</span> (<span class="params">d, s</span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">      <span class="keyword">var</span> j,</span></span><br><span class="line">        e = d.getElementsByTagName(s)[0];</span><br><span class="line"><span class="javascript">      <span class="keyword">if</span> (<span class="keyword">typeof</span> LivereTower === <span class="string">"function"</span>) &#123;</span></span><br><span class="line"><span class="javascript">        <span class="keyword">return</span>;</span></span><br><span class="line">      &#125;</span><br><span class="line">      j = d.createElement(s);</span><br><span class="line"><span class="javascript">      j.src = <span class="string">"https://cdn-city.livere.com/js/embed.dist.js"</span>;</span></span><br><span class="line"><span class="javascript">      j.async = <span class="literal">true</span>;</span></span><br><span class="line">      e.parentNode.insertBefore(j, e);</span><br><span class="line"><span class="javascript">    &#125;)(<span class="built_in">document</span>, <span class="string">"script"</span>);</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">noscript</span>&gt;</span> ä¸ºæ­£å¸¸ä½¿ç”¨æ¥å¿…åŠ›è¯„è®ºåŠŸèƒ½è¯·æ¿€æ´»JavaScript<span class="tag">&lt;/<span class="name">noscript</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- Cityç‰ˆå®‰è£…ä»£ç å·²å®Œæˆ --&gt;</span></span><br></pre></td></tr></table></figure><p>åœ¨<code>\yilia\layout\_partial</code> çš„<code>article.ejs</code>ä¸­<code>&lt;% if (!index &amp;&amp; post.comments){ %&gt;</code> ï¼Œåé¢æ·»åŠ å¦‚ä¸‹ä»£ç ï¼š</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;% <span class="keyword">if</span> (theme.livere)&#123; %&gt;</span><br><span class="line">&lt;%- partial(<span class="string">'post/livere'</span>, &#123;</span><br><span class="line">    key: post.slug,</span><br><span class="line">    title: post.title,</span><br><span class="line">    url: config.url+url_for(post.path)</span><br><span class="line">  &#125;) %&gt;</span><br><span class="line">&lt;% &#125; %&gt;</span><br></pre></td></tr></table></figure><h4 id="Valine-è¯„è®º"><a href="#Valine-è¯„è®º" class="headerlink" title="Valine è¯„è®º"></a>Valine è¯„è®º</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://ioliu.cn/2017/add-valine-comments-to-your-blog/#comments</span><br></pre></td></tr></table></figure><h3 id="ä¸»é¢˜"><a href="#ä¸»é¢˜" class="headerlink" title="ä¸»é¢˜"></a>ä¸»é¢˜</h3><h4 id="ä¿®æ”¹ä¸»é¢˜"><a href="#ä¿®æ”¹ä¸»é¢˜" class="headerlink" title="ä¿®æ”¹ä¸»é¢˜"></a>ä¿®æ”¹ä¸»é¢˜</h4><ol><li><strong>fexo</strong></li></ol><p><a href="http://forsigner.com/fexo-doc-zh-cn/" target="_blank" rel="noopener">http://forsigner.com/fexo-doc-zh-cn/</a></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span> git clone git@github.com:forsigner/fexo.git themes/fexo</span><br></pre></td></tr></table></figure><ol start="2"><li><strong>Maupassant</strong></li></ol><p><a href="https://www.haomwei.com/technology/maupassant-hexo.html" target="_blank" rel="noopener">https://www.haomwei.com/technology/maupassant-hexo.html</a></p><p>ä¸Šé¢ä¸¤ä¸ªæ˜¯æˆ‘æ¯”è¾ƒå–œæ¬¢çš„ä¸»é¢˜ï¼Œä½ ä¹Ÿå¯ä»¥åœ¨<a href="https://github.com/hexojs/hexo/wiki/Themes" target="_blank" rel="noopener">è¿™é‡Œ</a>å¯»æ‰¾æ›´å¤šä¸»é¢˜</p><h3 id="éŸ³ä¹æ’­æ”¾å™¨"><a href="#éŸ³ä¹æ’­æ”¾å™¨" class="headerlink" title="éŸ³ä¹æ’­æ”¾å™¨"></a>éŸ³ä¹æ’­æ”¾å™¨</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--ç½‘æ˜“äº‘éŸ³ä¹æ’­æ”¾å™¨--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">iframe</span></span></span><br><span class="line"><span class="tag">  <span class="attr">frameborder</span>=<span class="string">"no"</span></span></span><br><span class="line"><span class="tag">  <span class="attr">border</span>=<span class="string">"0"</span></span></span><br><span class="line"><span class="tag">  <span class="attr">marginwidth</span>=<span class="string">"0"</span></span></span><br><span class="line"><span class="tag">  <span class="attr">marginheight</span>=<span class="string">"0"</span></span></span><br><span class="line"><span class="tag">  <span class="attr">width</span>=<span class="string">"330"</span></span></span><br><span class="line"><span class="tag">  <span class="attr">height</span>=<span class="string">"450"</span></span></span><br><span class="line"><span class="tag">  <span class="attr">src</span>=<span class="string">"//music.163.com/outchain/player?type=0&amp;id=2268258693&amp;auto=0&amp;height=430"</span></span></span><br><span class="line"><span class="tag">&gt;</span><span class="tag">&lt;/<span class="name">iframe</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="æ·»åŠ -RSS"><a href="#æ·»åŠ -RSS" class="headerlink" title="æ·»åŠ  RSS"></a>æ·»åŠ  RSS</h3><p>å®‰è£…æ’ä»¶</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-generator-feed</span><br></pre></td></tr></table></figure><p>ä¿®æ”¹é…ç½®æ–‡ä»¶ï¼Œæ·»åŠ å¦‚ä¸‹å†…å®¹</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span> Extensions</span><br><span class="line"><span class="meta">#</span># Plugins: http://hexo.io/plugins/</span><br><span class="line"><span class="meta">#</span>RSSè®¢é˜…</span><br><span class="line">plugin:</span><br><span class="line">- hexo-generator-feed</span><br><span class="line"><span class="meta">#</span>Feed Atom</span><br><span class="line">feed:</span><br><span class="line">type: atom</span><br><span class="line">path: atom.xml</span><br><span class="line">limit: 20</span><br></pre></td></tr></table></figure><h3 id="åŒæ­¥è¯­é›€çŸ¥è¯†åº“"><a href="#åŒæ­¥è¯­é›€çŸ¥è¯†åº“" class="headerlink" title="åŒæ­¥è¯­é›€çŸ¥è¯†åº“"></a>åŒæ­¥è¯­é›€çŸ¥è¯†åº“</h3><p>å‚è€ƒï¼š<a href="https://www.yuque.com/page/luan.ma/yuque2blog" target="_blank" rel="noopener">https://www.yuque.com/page/luan.ma/yuque2blog</a></p><p>å®‰è£… yuque-hexo</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i -g yuque-hexo</span><br></pre></td></tr></table></figure><p>æ³¨å†Œè¯­é›€ï¼Œåˆ›å»ºçŸ¥è¯†åº“ï¼Œè·å¾—ä½ çš„ä¸ªäººè·¯å¾„å’ŒçŸ¥è¯†åº“çš„åå­—ï¼Œæ¯”å¦‚æˆ‘çš„åšå®¢çš„çŸ¥è¯†åº“æ˜¯ <a href="https://www.yuque.com/glacier/github.io" target="_blank" rel="noopener">https://www.yuque.com/glacier/github.io</a></p><p>ä¿®æ”¹  package.json æ–‡ä»¶</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">"name"</span>: <span class="string">"your hexo project"</span>, <span class="comment">//å¦‚æœåŸæ¥å·²ç»æœ‰è¿™ä¸ªä¸ç”¨å†åŠ äº†ï¼Œç›´æ¥åŠ ä¸‹é¢çš„å°±å¯ä»¥</span></span><br><span class="line">  <span class="attr">"yuqueConfig"</span>: &#123;</span><br><span class="line">    <span class="attr">"baseUrl"</span>: <span class="string">"https://www.yuque.com/api/v2"</span>,</span><br><span class="line">    <span class="attr">"login"</span>: <span class="string">"glacier"</span>,</span><br><span class="line">    <span class="attr">"repo"</span>: <span class="string">"github.io"</span>,</span><br><span class="line">    <span class="attr">"mdNameFormat"</span>: <span class="string">"slug"</span>,</span><br><span class="line">    <span class="attr">"postPath"</span>: <span class="string">"source/_posts/yuque"</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åŒæ­¥æ–‡ç« </p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yuque-hexo sync</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>å¥½çš„ä»£ç åº”è¯¥æ˜¯ä¾¿äºç»´æŠ¤çš„</title>
      <link href="/2019/01/12/yuque/%E5%A5%BD%E7%9A%84%E4%BB%A3%E7%A0%81%E5%BA%94%E8%AF%A5%E6%98%AF%E4%BE%BF%E4%BA%8E%E7%BB%B4%E6%8A%A4%E7%9A%84/"/>
      <url>/2019/01/12/yuque/%E5%A5%BD%E7%9A%84%E4%BB%A3%E7%A0%81%E5%BA%94%E8%AF%A5%E6%98%AF%E4%BE%BF%E4%BA%8E%E7%BB%B4%E6%8A%A4%E7%9A%84/</url>
      
        <content type="html"><![CDATA[<h4 id="å¥½çš„å‘½åæ¯”æ³¨é‡Šè¦å¥½"><a href="#å¥½çš„å‘½åæ¯”æ³¨é‡Šè¦å¥½" class="headerlink" title="å¥½çš„å‘½åæ¯”æ³¨é‡Šè¦å¥½"></a>å¥½çš„å‘½åæ¯”æ³¨é‡Šè¦å¥½</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span> å›¢é˜Ÿç»Ÿä¸€å®šä¹‰æ ‡è®°ï¼š</span><br><span class="line">TODO  å¾…å¤„ç†çš„é—®é¢˜</span><br><span class="line">FIXME  å·²çŸ¥æœ‰é—®é¢˜çš„ä»£ç </span><br><span class="line">HACK ä¸å¾—ä¸é‡‡ç”¨çš„ç²—ç³™çš„è§£å†³æ–¹æ¡ˆ</span><br></pre></td></tr></table></figure><p>æ ·å¼ä¿®æ”¹ - è¦ä¹ˆåŸç”Ÿ JS è¦ä¹ˆ JQuery  ç”¨ submit äº‹ä»¶</p><p>å¤åˆ¶è¿‡æ¥ä¸ç”¨çš„ä»£ç éƒ½åˆ æ‰</p><p>æºä»£ç ä¸­çš„ html æ³¨é‡Šæ˜¯ä¸€ç§åŒç‰©, å¢åŠ é˜…è¯»éš¾åº¦</p><h4 id="æ³¨é‡Š"><a href="#æ³¨é‡Š" class="headerlink" title="æ³¨é‡Š"></a>æ³¨é‡Š</h4><p>æ³¨é‡Šæ¨¡æ¿ ä¸è¦ç•™ç©º</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"># å…¸å‹çš„çƒ‚æ³¨é‡Šï¼š</span><br><span class="line">ä¸æ°å½“çš„ä¿¡æ¯</span><br><span class="line">åºŸå¼ƒçš„æ³¨é‡Š</span><br><span class="line">å†—ä½™æ³¨é‡Š</span><br><span class="line">ç³Ÿç³•çš„æ³¨é‡Š</span><br><span class="line">æ³¨é‡Šæ‰çš„ä»£ç </span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"># å”¯ä¸€çœŸæ­£å¥½çš„æ³¨é‡Šæ˜¯ä½ æƒ³åŠæ³•ä¸å»å†™çš„æ³¨é‡Šï¼š</span><br><span class="line">ä¸è¦æœ‰å¾ªè§„å¼æ³¨é‡Šï¼Œæ¯”å¦‚ setter/getter æ³¨é‡Š</span><br><span class="line">ä¸è¦æ·»åŠ æ—¥å¿—å¼æ³¨é‡Šï¼Œæ¯”å¦‚ä¿®æ”¹æ—¶é—´ç­‰ä¿¡æ¯ï¼ˆ git å¯ä»¥åšçš„äº‹æƒ…ï¼‰</span><br><span class="line">æ³¨é‡Šä¸€å®šæ˜¯è¡¨è¾¾ä»£ç ä¹‹å¤–çš„ä¸œè¥¿ï¼Œä»£ç å¯ä»¥åŒ…å«çš„å†…å®¹ï¼Œæ³¨é‡Šä¸­ä¸€å®šä¸è¦å‡ºç°</span><br><span class="line">å¦‚æœæœ‰å¿…è¦æ³¨é‡Šï¼Œè¯·æ³¨é‡Šæ„å›¾ï¼ˆwhyï¼‰ï¼Œè€Œä¸è¦å»æ³¨é‡Šå®ç°ï¼ˆhow)ï¼Œå¤§å®¶éƒ½ä¼šçœ‹ä»£ç </span><br><span class="line">é€‚å½“æ·»åŠ è­¦ç¤ºæ³¨é‡Š</span><br></pre></td></tr></table></figure><h4 id="å‘½å"><a href="#å‘½å" class="headerlink" title="å‘½å"></a>å‘½å</h4><p>äº†è§£ä¸€äº›è®¾è®¡æ¨¡å¼ï¼Œè¿™æ ·çœ‹åˆ°åå­—é‡Œæœ‰ proxyï¼Œbuilderï¼Œfactory ä¹‹ç±»çš„ï¼Œå°±å¿ƒé¢†ç¥ä¼šäº†</p><p>ä»£ç éƒ½æ˜¯åˆ†æ¨¡å—çš„ï¼Œæœ‰çš„æ˜¯ coreï¼Œæœ‰çš„æ˜¯ utilï¼Œparser ä¹‹ç±»çš„</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">å°½å¯èƒ½ä½¿ç”¨æ ‡å‡†å‘½åæ–¹æ³•ï¼Œæ¯”å¦‚è®¾è®¡æ¨¡å¼ï¼Œé€šç”¨å­¦æœ¯åè¯ç­‰</span><br><span class="line">å‘½åè¦æ‰¾æ›´æœ‰è¡¨ç°åŠ›çš„è¯</span><br><span class="line">ä½¿ç”¨æ›´ä¸“ä¸šçš„è¯ï¼Œæ¯”å¦‚ä¸ç”¨ get è€Œä½¿ç”¨ fetch æˆ–è€… download</span><br><span class="line">é¿å…ç©ºæ³›çš„åå­—ï¼Œåƒ tmp</span><br><span class="line">ä½¿ç”¨å…·ä½“çš„åå­—æ¥ç»†è‡´çš„æè¿°äº‹ç‰©</span><br><span class="line">ç»™å˜é‡åå¸¦ä¸Šé‡è¦çš„ç»†èŠ‚ï¼Œæ¯”å¦‚åŠ ä¸Šå•ä½msç­‰</span><br><span class="line">ä¸ºä½œç”¨åŸŸå¤§çš„åå­—é‡‡ç”¨æ›´é•¿çš„åå­—ï¼Œä½œç”¨åŸŸå°çš„ä½¿ç”¨çŸ­åå­—</span><br><span class="line">å˜é‡ç±»å‹ä¸ºå¸ƒå°”å€¼è¡¨è¾¾åŠ ä¸Š isï¼Œhas ï¼Œcan ï¼Œshould è¿™æ ·çš„è¯ä¼šæ›´æ˜ç¡®</span><br><span class="line">å˜é‡åç§°é•¿çŸ­åº”è¯¥ä¸å…¶ä½œç”¨åŸŸå¯¹åº”</span><br><span class="line">åˆ«å®³æ€•é•¿åç§°ï¼Œé•¿è€Œå…·æœ‰æè¿°æ€§çš„åç§°æ¯”çŸ­è€Œä»¤äººè´¹è§£çš„åç§°å¥½</span><br><span class="line">å‡½æ•°åç§°åº”è¯¥è¯´æ˜å‰¯ä½œç”¨ï¼Œåç§°åº”è¯¥è¡¨è¾¾å‡½æ•°ï¼Œå˜é‡æˆ–ç±»çš„ä¸€åˆ‡ä¿¡æ¯ï¼Œè¯·ä¸è¦æ©ç›–å‰¯ä½œç”¨ï¼Œæ¯”å¦‚ CreateAndReturnXXX</span><br></pre></td></tr></table></figure><h4 id="commit"><a href="#commit" class="headerlink" title="commit"></a>commit</h4><blockquote><p>commit çš„ message ä¸€å®šè¦è§„èŒƒ</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">featï¼šæ–°åŠŸèƒ½ï¼ˆfeatureï¼‰</span><br><span class="line">fixï¼šä¿®è¡¥bug</span><br><span class="line">docsï¼šæ–‡æ¡£ï¼ˆdocumentationï¼‰</span><br><span class="line">styleï¼š æ ¼å¼ï¼ˆä¸å½±å“ä»£ç è¿è¡Œçš„å˜åŠ¨ï¼‰</span><br><span class="line">refactorï¼šé‡æ„ï¼ˆå³ä¸æ˜¯æ–°å¢åŠŸèƒ½ï¼Œä¹Ÿä¸æ˜¯ä¿®æ”¹bugçš„ä»£ç å˜åŠ¨ï¼‰</span><br><span class="line">testï¼šå¢åŠ æµ‹è¯•</span><br><span class="line">choreï¼šæ„å»ºè¿‡ç¨‹æˆ–è¾…åŠ©å·¥å…·çš„å˜åŠ¨</span><br></pre></td></tr></table></figure><p><a href="https://mp.weixin.qq.com/s/W9VOXPPZgChwi9daJKIH2A" target="_blank" rel="noopener">å¦‚ä½•é¿å…è‡ªå·±å†™çš„ä»£ç æˆä¸ºåˆ«äººçœ¼ä¸­çš„ä¸€å¨å±ï¼</a></p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>Python æ•°æ®åº“æ“ä½œ</title>
      <link href="/2019/01/12/yuque/Python%20%E6%95%B0%E6%8D%AE%E5%BA%93%E6%93%8D%E4%BD%9C/"/>
      <url>/2019/01/12/yuque/Python%20%E6%95%B0%E6%8D%AE%E5%BA%93%E6%93%8D%E4%BD%9C/</url>
      
        <content type="html"><![CDATA[<h3 id="Example-1"><a href="#Example-1" class="headerlink" title="Example 1"></a>Example 1</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pymysql.cursors</span><br><span class="line"></span><br><span class="line"><span class="comment"># Connect to the database</span></span><br><span class="line">connection = pymysql.connect(host=<span class="string">'localhost'</span>,</span><br><span class="line">                             user=<span class="string">'user'</span>,</span><br><span class="line">                             password=<span class="string">'passwd'</span>,</span><br><span class="line">                             db=<span class="string">'db'</span>,</span><br><span class="line">                             charset=<span class="string">'utf8mb4'</span>,</span><br><span class="line">                             cursorclass=pymysql.cursors.DictCursor)</span><br><span class="line"></span><br><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    <span class="keyword">with</span> connection.cursor() <span class="keyword">as</span> cursor:</span><br><span class="line">        <span class="comment"># Create a new record</span></span><br><span class="line">        sql = <span class="string">"INSERT INTO `users` (`email`, `password`) VALUES (%s, %s)"</span></span><br><span class="line">        cursor.execute(sql, (<span class="string">'webmaster@python.org'</span>, <span class="string">'very-secret'</span>))</span><br><span class="line"></span><br><span class="line">    <span class="comment"># connection is not autocommit by default. So you must commit to save</span></span><br><span class="line">    <span class="comment"># your changes.</span></span><br><span class="line">    connection.commit()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">with</span> connection.cursor() <span class="keyword">as</span> cursor:</span><br><span class="line">        <span class="comment"># Read a single record</span></span><br><span class="line">        sql = <span class="string">"SELECT `id`, `password` FROM `users` WHERE `email`=%s"</span></span><br><span class="line">        cursor.execute(sql, (<span class="string">'webmaster@python.org'</span>,))</span><br><span class="line">        result = cursor.fetchone()</span><br><span class="line">        print(result)</span><br><span class="line"><span class="keyword">finally</span>:</span><br><span class="line">    connection.close()</span><br></pre></td></tr></table></figure><h3 id="Example-2"><a href="#Example-2" class="headerlink" title="Example 2"></a>Example 2</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pymysql.cursors</span><br><span class="line"></span><br><span class="line"><span class="comment"># é“¾æ¥æ•°æ®åº“</span></span><br><span class="line">conn = pymysql.connect(</span><br><span class="line">    <span class="string">"localhost"</span>,</span><br><span class="line">    <span class="string">"root"</span>,</span><br><span class="line">    <span class="string">"123456"</span>,</span><br><span class="line">    <span class="string">"drug"</span>,</span><br><span class="line">    charset=<span class="string">'utf8'</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">sqlCount = <span class="string">"SELECT COUNT(0) FROM DWRS_SIM_SDML WHERE YPDM ='210000280' AND YPGG = '0.25g*16'"</span></span><br><span class="line">sqlResult = <span class="string">"SELECT YPFL FROM DWRS_SIM_SDML WHERE YPDM ='210000280' AND YPGG = '0.25g*16'"</span></span><br><span class="line"></span><br><span class="line">typeList = [<span class="string">"è¥¿è¯"</span>, <span class="string">"ä¸­è¯"</span>, <span class="string">"è‰è¯"</span>, <span class="string">"è¯Šç–—"</span>, <span class="string">"åŒ»é™¢åˆ¶å‰‚"</span>]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">findType</span><span class="params">(sqlCount, sqlResult)</span>:</span></span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        <span class="keyword">with</span> conn.cursor() <span class="keyword">as</span> cursor:</span><br><span class="line">            count = cursor.execute(sqlCount)</span><br><span class="line">            conn.commit()</span><br><span class="line">            print(count)</span><br><span class="line">        <span class="keyword">if</span> count &gt; <span class="number">0</span>:</span><br><span class="line">            <span class="keyword">with</span> conn.cursor() <span class="keyword">as</span> cursor:</span><br><span class="line">                cursor.execute(sqlResult)</span><br><span class="line">                result = cursor.fetchone()</span><br><span class="line">                result = str(result[<span class="number">0</span>]).replace(<span class="string">"0"</span>, <span class="string">""</span>)</span><br><span class="line">                print(typeList[int(result)])</span><br><span class="line"></span><br><span class="line">    <span class="keyword">except</span>:</span><br><span class="line">        print(<span class="string">"å‡ºé”™å•¦ï¼"</span>)</span><br><span class="line">        conn.rollback()</span><br><span class="line">    <span class="keyword">finally</span>:</span><br><span class="line">        <span class="comment"># å…³é—­æ•°æ®åº“è¿æ¥</span></span><br><span class="line">        conn.close()</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    findType(sqlCount, sqlResult)</span><br></pre></td></tr></table></figure><h3 id="Example-3"><a href="#Example-3" class="headerlink" title="Example 3"></a>Example 3</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">findDrugs</span><span class="params">(start, end)</span>:</span></span><br><span class="line">    sql = <span class="string">"SELECT drugSpec.code,spec.name FROM drug  LEFT JOIN drug_spec AS drugSpec ON drug.id = drugSpec.drug_id "</span> \</span><br><span class="line">          <span class="string">"LEFT JOIN spec ON spec.id = drugSpec.spec_id LIMIT %s,%s"</span></span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        <span class="keyword">with</span> conn.cursor() <span class="keyword">as</span> cursor:</span><br><span class="line">            cursor.execute(sql, (start, end,))</span><br><span class="line">            result = cursor.fetchall()</span><br><span class="line">            print(result)</span><br><span class="line">    <span class="keyword">except</span>:</span><br><span class="line">        print(<span class="string">"find error!"</span>)</span><br><span class="line">    <span class="keyword">finally</span>:</span><br><span class="line">        conn.close()</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>Git å¸¸ç”¨å‘½ä»¤</title>
      <link href="/2019/01/12/yuque/Git%20%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/"/>
      <url>/2019/01/12/yuque/Git%20%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/</url>
      
        <content type="html"><![CDATA[<h4 id="åˆå§‹åŒ–"><a href="#åˆå§‹åŒ–" class="headerlink" title="åˆå§‹åŒ–"></a>åˆå§‹åŒ–</h4><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># è¾“å…¥ä½ çš„github æ³¨å†Œçš„ID</span></span><br><span class="line">git config -<span class="literal">-global</span> user.name <span class="string">"Your Name"</span></span><br><span class="line"><span class="comment"># è¾“å…¥ä½ çš„github æ³¨å†Œçš„é‚®ç®±</span></span><br><span class="line">git config -<span class="literal">-global</span> user.email <span class="string">"email@example.com"</span></span><br></pre></td></tr></table></figure><p>ç”ŸæˆæŒ‡å®šåå­—çš„å¯†é’¥</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh<span class="literal">-keygen</span> <span class="literal">-t</span> rsa <span class="literal">-C</span> <span class="string">"é‚®ç®±åœ°å€"</span> <span class="operator">-f</span> ~/.ssh/github_jslite</span><br></pre></td></tr></table></figure><p>ä¼šç”Ÿæˆ github_jslite å’Œ github_jslite.pub è¿™ä¸¤ä¸ªæ–‡ä»¶</p><p>ç™»é™† GitHubï¼Œåœ¨ settings é‡Œé¢æ·»åŠ  SSH Keysï¼Œæ·»åŠ  SSH Keyï¼Œåœ¨ Key æ–‡æœ¬æ¡†é‡Œç²˜è´´ github_jslite.pub æ–‡ä»¶çš„å†…å®¹ï¼Œå³å¯ã€‚</p><h4 id="æäº¤"><a href="#æäº¤" class="headerlink" title="æäº¤"></a>æäº¤</h4><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># é»˜è®¤æ˜¯masteråˆ†æ”¯</span></span><br><span class="line">git add file1.txt</span><br><span class="line">git add file2.txt file3.txt</span><br><span class="line">git commit <span class="literal">-m</span> <span class="string">"add 3 files."</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## commit ä¹‹ågithub ä»“åº“å†…å®¹è¿˜ä¸ä¼šæ›´æ”¹ï¼Œåªä¼šåœ¨ä½ æœ¬åœ°ä»“åº“è¿›è¡Œä¿®æ”¹ï¼Œè¿˜éœ€è¦pushåˆ°ä»“åº“</span></span><br><span class="line"><span class="comment">## æ¨é€ä¸»åˆ†æ”¯</span></span><br><span class="line">git push origin master</span><br><span class="line"><span class="comment">## æ¨é€devåˆ†æ”¯</span></span><br><span class="line">git push origin dev</span><br></pre></td></tr></table></figure><h4 id="åˆ é™¤æ–‡ä»¶"><a href="#åˆ é™¤æ–‡ä»¶" class="headerlink" title="åˆ é™¤æ–‡ä»¶"></a>åˆ é™¤æ–‡ä»¶</h4><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">rm <span class="literal">-rf</span> directory</span><br><span class="line">git add <span class="literal">-A</span></span><br><span class="line">git commit <span class="literal">-m</span> <span class="string">'remove dir'</span></span><br><span class="line">git push origin master</span><br></pre></td></tr></table></figure><h4 id="æ‹‰å–ä»£ç "><a href="#æ‹‰å–ä»£ç " class="headerlink" title="æ‹‰å–ä»£ç "></a>æ‹‰å–ä»£ç </h4><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git pull</span><br></pre></td></tr></table></figure><h4 id="åˆ†æ”¯"><a href="#åˆ†æ”¯" class="headerlink" title="åˆ†æ”¯"></a>åˆ†æ”¯</h4><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## åˆ›å»ºdevåˆ†æ”¯ å¹¶åˆ‡æ¢åˆ°dev</span></span><br><span class="line">git checkout <span class="literal">-b</span> dev</span><br><span class="line"></span><br><span class="line"><span class="comment">## ç›¸å½“äºä¸‹é¢ä¸¤æ¡å‘½ä»¤</span></span><br><span class="line">git branch dev</span><br><span class="line">git checkout dev</span><br><span class="line"></span><br><span class="line"><span class="comment">## æŸ¥çœ‹å½“å‰åˆ†æ”¯</span></span><br><span class="line">git branch</span><br><span class="line"></span><br><span class="line"><span class="comment">## å°†devåˆå¹¶åˆ° master</span></span><br><span class="line">git merge dev</span><br><span class="line"></span><br><span class="line"><span class="comment">## åˆ é™¤devåˆ†æ”¯</span></span><br><span class="line">git branch <span class="literal">-d</span> dev</span><br><span class="line"></span><br><span class="line"><span class="comment">## æŸ¥çœ‹å½“å‰åˆ†æ”¯</span></span><br><span class="line">git branch   <span class="comment">## åˆ é™¤devï¼Œè¿™æ—¶å€™åªå‰©masterï¼Œä¸»åˆ†æ”¯äº†</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## æ¨é€ä¸»åˆ†æ”¯</span></span><br><span class="line">git push origin master</span><br><span class="line"><span class="comment">## æ¨é€devåˆ†æ”¯</span></span><br><span class="line">git push origin dev</span><br></pre></td></tr></table></figure><h4 id="ç‰ˆæœ¬å›é€€"><a href="#ç‰ˆæœ¬å›é€€" class="headerlink" title="ç‰ˆæœ¬å›é€€"></a>ç‰ˆæœ¬å›é€€</h4><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## æŸ¥çœ‹å†å²</span></span><br><span class="line"><span class="variable">$</span> git log</span><br><span class="line">commit <span class="number">87</span>c9ab105e1ff2886d5f603954d72859cba8769a</span><br><span class="line">Author: heyglacier &lt;<span class="number">2284711614</span>@qq.com&gt;</span><br><span class="line">Date:   Wed Jun <span class="number">27</span> <span class="number">08</span>:<span class="number">54</span>:<span class="number">19</span> <span class="number">2018</span> +<span class="number">0800</span></span><br><span class="line"></span><br><span class="line">    specEditController é¡µé¢è¯¯åˆ ï¼Ÿ</span><br><span class="line"></span><br><span class="line"><span class="comment">## å›é€€åˆ°æŒ‡å®šç‰ˆæœ¬</span></span><br><span class="line"><span class="variable">$</span> git reset -<span class="literal">-hard</span> d53a025f3e760fe1f1a7a116750def90cd1aaa5d</span><br></pre></td></tr></table></figure><p>PSï¼š</p><p>å‘½ä»¤è¡Œè¿˜æ˜¯æ¯”è¾ƒéº»çƒ¦çš„ï¼Œè¿˜æ˜¯å»ºè®®ä½¿ç”¨ IDEA è¿™æ ·çš„é›†æˆå·¥å…·ã€‚</p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>Linux é…ç½®å®šæ—¶ä»»åŠ¡</title>
      <link href="/2019/01/12/yuque/Linux%20%E9%85%8D%E7%BD%AE%E5%AE%9A%E6%97%B6%E4%BB%BB%E5%8A%A1/"/>
      <url>/2019/01/12/yuque/Linux%20%E9%85%8D%E7%BD%AE%E5%AE%9A%E6%97%B6%E4%BB%BB%E5%8A%A1/</url>
      
        <content type="html"><![CDATA[<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># é…ç½®å®šæ—¶ä»»åŠ¡</span></span><br><span class="line">crontab <span class="literal">-e</span></span><br><span class="line"><span class="number">00</span> <span class="number">03</span> * * * /<span class="keyword">data</span>/mysql_backup.sh</span><br><span class="line">*  *  *  *  *   command</span><br><span class="line">åˆ† æ—¶ å¤©  æœˆ æ˜ŸæœŸ å‘½ä»¤</span><br></pre></td></tr></table></figure><p><strong>shell è„šæœ¬ï¼ˆå®šæ—¶å¤‡ä»½ mysql æ•°æ®åº“ï¼Œå¹¶æ ¹æ®å½“å¤©æ—¥æœŸæ‰“åŒ…ï¼‰</strong><br>**</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="meta">#</span>!/bin/bash</span><br><span class="line"></span><br><span class="line">backupdir=/data/mysql_backup</span><br><span class="line">time=` date +%Y%m%d%H`</span><br><span class="line">mysqldump -uroot -p'netmatch' drug-app &gt; drug_app_$time.sql</span><br><span class="line">mysqldump -uroot -p'netmatch' drug-rx &gt; drug_rx_$time.sql</span><br><span class="line">mysqldump -uroot -p'netmatch' drug-task &gt; drug_task_$time.sql</span><br><span class="line">tar -cf sql_$time.tar *.sql</span><br><span class="line">rm -rf *.sql</span><br><span class="line">find $backupdir -name "db_*.sql.gz" -type f -mtime +5 -exec rm &#123;&#125; \; &gt; /dev/null 2&gt;&amp;1</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
    </entry>
    
    
  
  
</search>
